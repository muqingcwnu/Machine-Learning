<html id="top" class="js"><!--<![endif]--><head><script type="text/javascript" async="" src="//app.meetami.ai/launchpad.php?c=302220474411"></script><script async="" src="https://connect.facebook.net/en_US/fbevents.js"></script><script type="text/javascript" async="" src="https://www.google-analytics.com/analytics.js"></script><script type="text/javascript" async="" src="https://static.ads-twitter.com/uwt.js"></script><script type="text/javascript" async="" src="https://snap.licdn.com/li.lms-analytics/insight.min.js"></script><script type="text/javascript" async="" src="https://www.google.com/pagead/conversion_async.js"></script><script type="text/javascript" async="" src="https://www.google-analytics.com/analytics.js"></script><script src="https://cdn.dynamicyield.com/scripts/12533/dy-coll-nojq-min.js" type="text/javascript" async="true"></script><script async="" src="//www.googletagmanager.com/gtm.js?id=GTM-KCFJMVP"></script><script async="" src="https://www.googletagservices.com/tag/js/gpt.js"></script><script>
    (function(H){H.className=H.className.replace(/\bno-js\b/,'js')})(document.documentElement);

    if (window.history.replaceState && window.location.href.slice(-1) === '#') {
        window.history.replaceState({},document.title,window.location.href.slice(0,-1));
    }
</script>
        
        
                        <title>Liverpool FC - Team</title>
        <meta name="keywords" content="Liverpool FC Team, lfc first team, first team, liverpool football club team, Mohamed Salah, Sadio Mane, Roberto Firmino, Philippe Coutinho, James Milner, Jordan Henderson, Adam Lallana, Ben Woodburn">
<meta name="description" content="The official home of the Liverpool FC first team. Discover profiles, images and videos featuring all of your LFC players.">
<meta name="robots" content="index, follow">
<meta property="og:site_name" content="Liverpool FC">
<meta property="og:description" content="The official home of the Liverpool FC first team. Discover profiles, images and videos featuring all of your LFC players.">
<meta property="og:type" content="article">
<meta property="fb:pages" content="67920382572">
<meta property="og:title" content="Liverpool FC - Team">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta charset="UTF-8">


        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
                          <link rel="shortcut icon" href="https://d3j2s6hdd6a7rg.cloudfront.net/v2/JE-552/lfc/images/favicon.png" type="image/png">
                  

        <link rel="stylesheet" href="https://secure.widget.cloud.opta.net/v3/css/v3.football.opta-widgets.css">

                <link rel="stylesheet" href="https://d3j2s6hdd6a7rg.cloudfront.net/v2/JE-552/lfc/css/styles.css">
        
                <!--[if  (lt IE 9) & (!IEMobile)]>
            <link rel="stylesheet" href="https://d3j2s6hdd6a7rg.cloudfront.net/v2/JE-552/lfc/css/styles-ie8.css" />
        <![endif]-->
        
                
                <!--[if lt IE 9]>
            <script src="https://d3j2s6hdd6a7rg.cloudfront.net/v2/JE-552/lfc/js/polyfills-ie8.min.js"></script>
        <![endif]-->
        
                <!--[if IE 9]>
        <script src="https://d3j2s6hdd6a7rg.cloudfront.net/v2/JE-552/lfc/js/polyfills-ie9.min.js"></script>
        <![endif]-->
        
        
    
                        <script src="https://d3j2s6hdd6a7rg.cloudfront.net/v2/JE-552/lfc/js/base.js"></script>
            
            <link rel="dns-prefetch" href="//cdn.dynamicyield.com">
<link rel="dns-prefetch" href="//st.dynamicyield.com">
<link rel="dns-prefetch" href="//rcom.dynamicyield.com">
 
<script>
 
window.DY = window.DY || {};
DY.recommendationContext = {type: 'OTHER'};
 
</script>
 
<script type="text/javascript" src="//cdn.dynamicyield.com/api/8772718/api_dynamic.js"></script>
<script type="text/javascript" src="//cdn.dynamicyield.com/api/8772718/api_static.js"></script><style id="dy-common-style" class="dy-common-style" type="text/css">.dy-wysiwyg{line-height:normal;direction:ltr;align-text:left;margin:0;padding:0;background-color:transparent}.dy-wysiwyg a{text-decoration:none;color:#00E}.dynotifyjs-wrapper .dy-lb-close{z-index:1;top:-8px;right:-9px;border:none;transition:opacity .15s;opacity:.7;background-size:14px;background-repeat:no-repeat;background-position:2px;width:18px;height:18px}.dynotifyjs-wrapper .dy-lb-close:hover{opacity:1}.dynotifyjs-corner{position:fixed;margin:0;z-index:1050}.dynotifyjs-corner .dynotifyjs-container,.dynotifyjs-corner .dynotifyjs-wrapper{position:relative;display:block;height:inherit;width:inherit;margin:11px 8px}.dynotifyjs-wrapper{z-index:1;position:absolute;display:inline-block;height:0;width:0}.dynotifyjs-container{display:none;z-index:1;position:absolute}[data-dynotify-html],[data-dynotify-text]{position:relative}.dynotifyjs-arrow{position:absolute;z-index:2;width:0;height:0}.dy-lb-close{position:absolute;top:-12px;right:-11px;cursor:pointer;color:#fff;border:1px solid #918686;border-radius:30px;display:inline-block;height:22px;width:22px;background:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSIwIDAgNTUgNTUiIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDU1IDU1IiB4bWw6c3BhY2U9InByZXNlcnZlIj48ZyBpZD0iY2xvc2UiPjxwb2x5Z29uIGZpbGw9IiNGRkZGRkYiIHBvaW50cz0iNDMuNSwxNC43IDQwLjMsMTEuNSAyNy41LDI0LjMgMTQuNywxMS41IDExLjUsMTQuNyAyNC4zLDI3LjUgMTEuNSw0MC4zIDE0LjcsNDMuNSAyNy41LDMwLjcgNDAuMyw0My41IDQzLjUsNDAuMyAzMC43LDI3LjUgIi8+PC9nPjwvc3ZnPg==) #575757;background-size:22px}.dy-full-width-notifications-close{top:5px;right:5px;z-index:1;border:none;transition:opacity .15s;-webkit-transition:opacity .15s;opacity:.7;width:18px;height:18px;position:absolute;cursor:pointer;color:#fff;border-radius:30px;display:inline-block;background:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSIwIDAgNTUgNTUiIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDU1IDU1IiB4bWw6c3BhY2U9InByZXNlcnZlIj48ZyBpZD0iY2xvc2UiPjxwb2x5Z29uIGZpbGw9IiNGRkZGRkYiIHBvaW50cz0iNDMuNSwxNC43IDQwLjMsMTEuNSAyNy41LDI0LjMgMTQuNywxMS41IDExLjUsMTQuNyAyNC4zLDI3LjUgMTEuNSw0MC4zIDE0LjcsNDMuNSAyNy41LDMwLjcgNDAuMyw0My41IDQzLjUsNDAuMyAzMC43LDI3LjUgIi8+PC9nPjwvc3ZnPg==) 2px no-repeat #575757;background-size:14px}.dy-full-width-notifications-close:hover{opacity:1}.dy_full_width_notifications_container{position:fixed;left:0;right:0;z-index:1040}.dy_full_width_notifications_container.dy_bottom_notification{bottom:0}.dy_full_width_notifications_container.dy_top_notification{top:0}.dy_full_width_notifications_container .dy_full_width_notification_instance{opacity:0;-webkit-transition:opacity .15s;transition:opacity .15s;position:relative}.dy_full_width_notifications_container .dy_full_width_notification_instance.dy_notification_instance_active{opacity:1}.dy_full_width_notifications_container .dy_full_width_notification_instance.dy_notification_from_bottom{-webkit-animation:dy_appear_from_bottom .25s;animation:dy_appear_from_bottom .25s}.dy_full_width_notifications_container .dy_full_width_notification_instance.dy_notification_from_top{-webkit-animation:dy_appear_from_top .25s;animation:dy_appear_from_top .25s}.dy_full_width_notifications_container .dy_full_width_notification_instance.dy_notification_instance_will_exit_top{-webkit-animation:dy_exit_top .25s;animation:dy_exit_top .25s;animation-fill-mode:forwards;-webkit-animation-fill-mode:forwards}.dy_full_width_notifications_container .dy_full_width_notification_instance.dy_notification_instance_will_exit_bottom{-webkit-animation:dy_exit_bottom .25s;animation:dy_exit_bottom .25s;animation-fill-mode:forwards;-webkit-animation-fill-mode:forwards}@-webkit-keyframes dy_appear_from_bottom{0%{-webkit-transform:translateY(100%);transform:translateY(100%)}100%{-webkit-transform:translateY(0);transform:translateY(0)}}@keyframes dy_appear_from_bottom{0%{-webkit-transform:translateY(100%);transform:translateY(100%)}100%{-webkit-transform:translateY(0);transform:translateY(0)}}@-webkit-keyframes dy_appear_from_top{0%{-webkit-transform:translateY(-100%);transform:translateY(-100%)}100%{-webkit-transform:translateY(0);transform:translateY(0)}}@keyframes dy_appear_from_top{0%{-webkit-transform:translateY(-100%);transform:translateY(-100%)}100%{-webkit-transform:translateY(0);transform:translateY(0)}}@-webkit-keyframes dy_exit_top{100%{-webkit-transform:translateY(-100%);transform:translateY(-100%)}}@keyframes dy_exit_top{100%{-webkit-transform:translateY(-100%);transform:translateY(-100%)}}@-webkit-keyframes dy_exit_bottom{100%{-webkit-transform:translateY(100%);transform:translateY(100%)}}@keyframes dy_exit_bottom{100%{-webkit-transform:translateY(100%);transform:translateY(100%)}}.dy-modal-container{position:fixed;z-index:99999;top:0;left:0;bottom:0;right:0;width:100%;height:100vh;display:table;-webkit-transition:opacity .2s ease;transition:opacity .2s ease}.dy-modal-container .dy-modal-backdrop{position:absolute;top:0;left:0;right:0;bottom:0;width:100%;height:100%;opacity:0;-webkit-transition:opacity .2s;transition:opacity .2s;background-color:#000}.dy-modal-container .dy-modal-wrapper{position:relative;z-index:1;display:table-cell;vertical-align:middle;text-align:center;width:100%}.dy-modal-container .dy-modal-wrapper.dy-modal-bottom{padding-bottom:20px;vertical-align:bottom}.dy-modal-container .dy-modal-wrapper.dy-modal-top{padding-top:20px;vertical-align:top}.dy-modal-container .dy-modal-wrapper .dy-modal-contents{position:relative;display:inline-block;-webkit-animation:dy-modal-enter .25s;animation:dy-modal-enter .25s;visibility:hidden}.dy-modal-container .dy-modal-wrapper .dy-modal-contents .dy-lb-close{z-index:1;top:-9px;right:-9px;border:none;opacity:.7;transition:opacity .15s;width:18px;height:18px;cursor:pointer;position:absolute;border-radius:30px;color:#fff;background:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSIwIDAgNTUgNTUiIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDU1IDU1IiB4bWw6c3BhY2U9InByZXNlcnZlIj48ZyBpZD0iY2xvc2UiPjxwb2x5Z29uIGZpbGw9IiNGRkZGRkYiIHBvaW50cz0iNDMuNSwxNC43IDQwLjMsMTEuNSAyNy41LDI0LjMgMTQuNywxMS41IDExLjUsMTQuNyAyNC4zLDI3LjUgMTEuNSw0MC4zIDE0LjcsNDMuNSAyNy41LDMwLjcgNDAuMyw0My41IDQzLjUsNDAuMyAzMC43LDI3LjUgIi8+PC9nPjwvc3ZnPg==) 2px no-repeat #575757;background-size:14px}.dy-modal-container .dy-modal-wrapper .dy-modal-contents .dy-lb-close:hover{opacity:1}@-webkit-keyframes dy-modal-enter{0%{opacity:0;-webkit-transform:scale(.5);transform:scale(.5)}50%{-webkit-transform:scale(1.05);transform:scale(1.05)}85%{-webkit-transform:scale(1.1);transform:scale(1.1)}100%{opacity:1;-webkit-transform:scale(1);transform:scale(1)}}</style><script type="text/javascript" async="true" src="//st.dynamicyield.com/st?sec=8772718&amp;inHead=true&amp;id=0&amp;jsession=&amp;ref=&amp;scriptVersion=12533&amp;dyid_server=&amp;ctx=%7B%22type%22%3A%22OTHER%22%7D"></script>

<style type="text/css">
a.post-next.post-next-top {
   display:none;
}

div.post-next.post-next-bottom {
   display:none;
}
</style>

<script>
 // create Lfc element with GPT command queue
 var Lfc = Lfc || {};
 Lfc.gtmAdQueue = Lfc.gtmAdQueue || [];
 
 // Load GPT asynchronously
 var googletag = googletag || {};
 googletag.cmd = googletag.cmd || [];
 (function() {
   var gads = document.createElement('script');
   gads.async = true;
   var useSSL = 'https:' == document.location.protocol;
   gads.src = (useSSL ? 'https:' : 'http:') +
       '//www.googletagservices.com/tag/js/gpt.js';
   var node = document.getElementsByTagName('script')[0];
   node.parentNode.insertBefore(gads, node);
 })();
</script>
<script> 
$( document ).ready(function() {

$('.masthead .link-login a').attr('href', 'https://www.liverpoolfc.com/my-lfc/login?fragment=&referer='+(document.URL));

// remove age restricted footer logos
var checkString = window.location.href;
if( checkString.indexOf("academy") !== -1 || checkString.indexOf("under-23") !== -1 || checkString.indexOf("under-18") !== -1 || checkString.indexOf("soccerschools") !== -1  || checkString.indexOf("soccer-schools") !== -1  || checkString.indexOf("u23") !== -1  || checkString.indexOf("u18") !== -1){
$('a[title="Carlsberg"], a[title="Betvictor"], a[title="Liverpool Vodka"], a[title="Draft Kings"], a[title="1XBET"]').remove();
}

if( checkString.indexOf("/women/") !== -1 || checkString.indexOf("/news/women") !== -1 || checkString.indexOf("/team/women") !== -1 || checkString.indexOf("/fans/liverpool-fc-women") !== -1) {
    $('a[title="Western Union"], a[title="Carlsberg"],a[title="MG"],a[title="Nivea"],a[title="Falken Tyres"],a[title="TigerWit"],a[title="EA Sports"],a[title="Chaokoh"],a[title="NH Foods"],a[title="Lavazza"],a[title="Petro-Canada"],a[title="Liverpool Vodka"],a[title="Levis"],a[title="iugis"],a[title="Mitel"],a[title="Verbier"],a[title="Tribus"],a[title="Cadbury UK"],a[title="Cadbury ROW"],a[title="Holly Frontier"],a[title="Quorn"],a[title="Mauritius"],a[title="Acronis"]').remove();
}

// remove link
$('a[title="1XBET"]'). removeAttr("href");

// HOT FIX - REMOVING MORE MENU FROM INTERNATIONAL SITES
var urlHostName = window.location.hostname;
if (urlHostName.indexOf('indonesia') !== -1 || urlHostName.indexOf('thailand') !== -1 || urlHostName.indexOf('japan') !== -1) {
$('.main-menu ul.more-menu').hide();
}

          })
</script>
<style>
.site-header-inner .masthead .masthead-links .more-menu ul li a {
  background: none!important;
}
.site-header-inner .social-links li.skype {
  display: none;
}
.vixlet {
   display:none !important; 
}
.video-error__content {
padding-top:3%!important;
}
.video-error__listing {
margin:15px 0!important;
}

.video-error__subtitle-mobile,
.video-error__registered {
color:white!important;
}

.video-player-embeddable .video-error--embed .video-error__listing-group ul li {
margin:0 0 5px 0!important;
}
.video-error__call-to-action a.js-subscribe-button {
font-size:0.8em!important;
background:white!important;
text-transform:uppercase!important;
}
.video-error__call-to-action a.js-subscribe-button:hover {
color:#e31b23!important;
}

@media only screen and (min-width: 551px) {
.video-error__subtitle-mobile {
margin:10px 0!important;
padding:0!important;
}
}

@media only screen and (min-width: 775px) and (max-width: 975px) {
.video-error__listing-group {
display:none!important;
}
}

/*@media screen and (min-width: 700px) {
.site-header-inner .main-menu .more-menu .more-menu-link>ul li {
display:block !important;
}
}*/

@media screen and (min-width: 1000px) {
.site-header-inner .masthead .masthead-links .more-menu.noLogin ul {
top: 100%!important;
}
}

/* IE ONLY */
@media screen\0 {
.video-player-embeddable .video .shard-overlay {position: absolute !important;}
}

.home .featured-news-carousel .media-image-wrap .indent {text-indent: -99999px;}

.dy_unit .dy-sliding-drawer-container{bottom: 25%;}
</style>


            <script>
var Lfc = Lfc || {};

Lfc.messagesConfig = {
    messages: [
        // COOKIE NOTIFICATION
        {
            id: 'cookie-notification',
            maximumDisplayCount: 1,
            content: '<div class="cookie-message-wrapper"><p>This site uses cookies. By continuing to browse the site you are consenting to their use. <a href="http://www.liverpoolfc.com/legal/cookies" target="_blank">View cookie policy.</a></p><a href="javascript:void(0);" class="close">ACCEPT & CLOSE</a></div>',
            style: 'bottom-overlay',
            displayCondition: function() {
                // don't show on app pages
                var pathStart = window.location.pathname.substr(0,5);
                if (pathStart == "/app/" || pathStart == "/app") {
                    return false;
                }
                // don't show if already been shown anywhere
                return !Lfc.Cookie.has('cookie-notification-shown', true);
            },
            onShow: function() {
                // set cross-subdomain cookie so all microsites know this has been shown
                Lfc.Cookie.set('cookie-notification-shown', '1', true);
            }
        },

        // ANDROID APP BANNER
        {
            id: 'android-app-banner',
            maximumDisplayCount: 1,
            displayCondition: function() {
                // don't show on non-Android devices
                if (navigator.userAgent.match(/Android/i) === null || navigator.userAgent.indexOf('Windows') > -1) {
                    return false;
                }
                // only show on home and news pages
                var pathStart = window.location.pathname.substr(0,6);
                if (pathStart != "/news/" && pathStart != "/news" && pathStart != "/") {
                    return false;
                }
                // only show if valid app id meta tag exists
                //  (e.g. <meta name="google-play-app" content="app-id=tv.liverpoolfc">)
                var $meta = $('meta[name="google-play-app"]');
                if ($meta.length > 0) {
                    var appId = /app-id=([^\s,]+)/.exec($meta.attr('content'));
                    if (appId) {
                        return true;
                    }
                }
            },
            content: function() {
                // get app id from meta tag
                var $meta = $('meta[name="google-play-app"]');
                if ($meta.length > 0) {
                    var appId = /app-id=([^\s,]+)/.exec($meta.attr('content'));
                    if (appId) {
                        var linkUrl = 'https://play.google.com/store/apps/details?id=' + appId[1] +
                                '&referrer=utm_source%3DWebsite%26utm_medium%3DHEADER_APP_CARD_MAIN_SITE%26utm_content%3DDigital%26utm_campaign%3DClub%2520App';
                        
                        return '<div id="android-app-banner">' +
                            '<a href="javascript:void(0);" class="close">&times;</a>' +
                            '<a href="' + linkUrl + '">' +
                                '<span class="app-icon"></span>' +
                                '<div class="app-info">' +
                                    '<strong>LFC Official App</strong>' +
                                    '<span>Liverpool Football Club</span>' +
                                    '<span>FREE in Google Play</span>' +
                                '</div>' +
                                '<span class="view">VIEW</span>' +
                            '</a>' +
                        '</div>';
                    }
                }
            },
            style: "styled-header"
        },

        // REGISTRATION POP-UP
        {
            id : 'registration-popup',
            minimumInterval : 10*24*60*60*1000, // 10 days = 10*24*60*60*1000
            displayCondition: function() {
                // don't show to logged in users
                if (Lfc.Login.isLoggedIn()) {
                    Lfc.Cookie.set("registration-popup-logout-time", "logged in");
                    return false;
                }
                // don't show immediately after logout -- wait 1 day
                var now = (new Date()).getTime(),
                    logOutTime = Lfc.Cookie.get("registration-popup-logout-time");
                    
                if (logOutTime == "logged in") {
                    // immediately after logout, store timestamp
                    Lfc.Cookie.set("registration-popup-logout-time", now);
                    return false;
                } else {
                    // if one day has not yet passed since first known logged out time, don't show
                    if (logOutTime && (now - logOutTime < 24*60*60*1000)) { // 1 day = 24*60*60*1000
                        return false;
                    };
                }
                // only show on home and news pages
                var pathStart = window.location.pathname.substr(0,6);
                if (pathStart != "/news/" && pathStart != "/news" && pathStart != "/") {
                    return false;
                }
                // only show to "A" group people
                var abGroup = Lfc.Cookie.getABGroup("registration-popup");
                if (!abGroup) {
                    abGroup = Lfc.Cookie.setABGroup("registration-popup");
                    dataLayer.push({'event': 'registration-popup-ab-assignment', 'abGroup': abGroup });
                }
                return abGroup === "A";
            },
            onShow: function() {
                dataLayer.push({'event': 'registration-popup-shown'});
            },
            content : function() {
                if ($(window).width() < 1000) {
                    // header message
                    return regMessageHeaderMarkup + regMessageHeaderStyling;
                } else {
                    // big popup with login
                    return regMessagePopupMarkup + regMessagePopupStyling;
                }
            },
            style: function() {
                if ($(window).width() < 1000) {
                    return 'default-header';
                } else {
                    return 'popup';
                }
            }
        },
    ],
    minimumMessageInterval : 60*60*1000, // 1 hour = 60*60*1000
}


// REGISTRATION POPUP MARKUP & STYLING
var regMessagePopupMarkup = '<div class="registration-popup-message"> <h1>GET MORE FROM LFC.</h1> <div id="not-logged-in-actions"> <h2>Register and get immediate access to:</h2> <fieldset class="reg-signup"> <div class="new-user-content"> <div class="signUpMessage registerText" style="line-height: 24px;"> <ul> <li class="image-bullet video">Free LFC videos</li> <li class="image-bullet match">Listen to live match commentary</li> <li class="image-bullet win">Exclusive competitions</li> <li class="image-bullet news">Receive the official club newsletter - All in Red</li> <li class="image-bullet forum">Join the conversation on the official LFC forums</li> <li class="image-bullet shirt">The Official Online Store</li> </ul> <p>...and it&rsquo;s completely <span>FREE!</span></p> </div> </div> <a href="/my-lfc/join/user-details?user_type=free&source=audbuild"> <div class="buttonPlaceholder buttonPlaceholderPopUp"> <input type="button" value="Register" class="btn right metroButton"/> <span class="buttonIcon"></span> </div> </a> </fieldset> </div> <div id="LoginBox"> <h2>Login</h2> <div class="LoginFormBox"> <form id="WholesaleContact" title="Login" method="post" name="Login" action="/scripts/login.php?login=LfcTVLogin"> <fieldset> <div class="login-content"> <table class="lfcMembershipTable"> <tr class="LoginTableSpacing"> <th><label for="LoginUsernameId">Username</label></th> <td><input id="LoginUsernameId" class="InputLoginBox " type="text" name="username" /></td> <td class="formHelp">Email address</td> </tr> <tr class="LoginTableSpacing"> <th><label for="LoginPasswordId">Password</label></th> <td><input id="LoginPasswordId" class="InputLoginBox" type="password" name="password" /></td> <td class="formHelp"> <p><a href="/my-lfc/login/forgotten-password">Forgotten password?</a></p> </td> </tr> <tr class="remember LoginTableSpacing"> <th><label for="remember_me">Remember</label></th> <td style="vertical-align: middle;" class="rememberSideText formHelp" colspan="2"> <input type="checkbox" name="remember_me" class="remember_checkbox" /> <p class="rememberSideText formHelp">Remember your details on this machine?</p> </td> </tr> </table> </div> <div class="ArticleContent"> <div class="buttonPlaceholder"> <input type="submit" value="Login" class="btn right metroButton"/> <span class="buttonIcon"></span> </div> </div> <input type="hidden" name="referer" value="http://www.liverpoolfc.com/" /> </fieldset> </form> <script type="text/javascript"> $("#LoginUsernameId, #LoginPasswordId").on("keydown", function (evt) { if(evt.keyCode == 13) { $("#LoginForm").submit(); } }); <\/script> </div> </div></div>';

var regMessagePopupStyling = '<style> /* header */ #cboxLoadedContent .registration-popup-message h1 { background: #E31B23; color: #FFF; padding: 0px 20px; line-height: 64px; font-size: 30px; } #colorbox #cboxClose { background: none; height: 58px; width: 50px; top: 3px!important; right: 3px; border: none; } #colorbox #cboxClose::after { content: "\\2716"; position: absolute; top: 0; left: 0; right: 0; line-height: 58px; text-align: center; font-size: 24px; text-indent: 0; color: #fff; } /* layout */ #cboxLoadedContent .registration-popup-message #not-logged-in-actions { width: 65%; padding: 20px; } #cboxLoadedContent .registration-popup-message #LoginBox { width: 35%; padding: 20px; } #cboxLoadedContent .registration-popup-message .login-content, #cboxLoadedContent .registration-popup-message .new-user-content { height: 250px; } #cboxLoadedContent .registration-popup-message h2 { border-bottom: 1px solid #DDD; margin: 0; padding: 2px 0 8px; } /* registration benefits */ #cboxLoadedContent .registration-popup-message .signUpMessage > p, #cboxLoadedContent .registration-popup-message .signUpMessage > ul { line-height: 36px; font-size: 16px; margin-bottom: 12px; } #cboxLoadedContent .registration-popup-message .signUpMessage > ul li.image-bullet { background-size: 24px; padding-left: 36px; } #cboxLoadedContent .registration-popup-message .signUpMessage > p { line-height: 36px; font-size: 16px; } /* login form */ #cboxLoadedContent .registration-popup-message #socialSignOn { margin: -10px 0 0; } #cboxLoadedContent .registration-popup-message .socialLogin { text-indent: -9999px; width: 40px; height: 40px; background-size: auto 40px; margin: 0 0 0 5px; } #cboxLoadedContent .registration-popup-message .lfcMembershipTable { clear: both; } #cboxLoadedContent .registration-popup-message .lfcMembershipTable th, #cboxLoadedContent .registration-popup-message .lfcMembershipTable td { float: left; width: 100%; } #cboxLoadedContent .registration-popup-message .lfcMembershipTable input { width: 100%; } #cboxLoadedContent .registration-popup-message .lfcMembershipTable th { text-align: left; } #cboxLoadedContent .registration-popup-message .lfcMembershipTable td.formHelp { text-align: right; padding: 5px 0; } #cboxLoadedContent .registration-popup-message .lfcMembershipTable tr.remember input { width: 19px; margin-right: 5px; } #cboxLoadedContent .registration-popup-message .lfcMembershipTable tr.remember td { text-align: left; }<style>';

var regMessageHeaderMarkup = '<div class="richtext"> <h1>GET MORE FROM LFC</h1> <p class="small-content">Register or log in now to access <strong>FREE</strong> benefits</p> <p class="medium-content">Log in now, or register to access a range of <strong>FREE</strong> benefits including videos and exclusive competitions.</p> <p class="buttons"> <a href="javascript:void(0);" class="main-button close">No thanks</a> <a href="/my-lfc/join/user-details?user_type=free&source=audbuild" class="main-button">Yes, please!</a> </p></div>';

var regMessageHeaderStyling = '<style> .header-message { background: #FFF; text-align: center; border-bottom: 2px solid #FFF; overflow: hidden; } .header-message::after { background: #C8C8C8; height: 6px; } .header-message > a.close { display: none; } .header-message .richtext a { text-decoration: none; } .header-message .buttons { margin: 10px 0; } .header-message .buttons a.main-button { margin: 0.2em 0.5em 0; padding: 0.8em 2em; } .header-message .buttons a.main-button.close { background: #FFF; color: #E31B23; border: 1px solid #E31B23; } .header-message p.medium-content { display: none; } @media screen and (min-width: 500px) { .header-message p.small-content { display: none; } .header-message p.medium-content { display: block; margin-bottom: 0; } .header-message .buttons { position: absolute; top: 0; right: 0; width: 11.5em; margin-bottom: 0; margin-right: 20px; } .header-message { min-height: 9em; } .header-message .richtext { margin-right: 14em; } .header-message .buttons a.main-button { display: block; margin: 0.6em 0; } }</style>';

</script>

        

        <script type="text/javascript">

 googletag.cmd.push(function() {

  //general size mapping
  var mapResMainRightOne = googletag.sizeMapping().
   addSize([0, 0], [320, 50]). 
   addSize([500, 0], [486, 60]).
   addSize([758, 0], [300, 250]).build();

  var mapResMainRightTwo = googletag.sizeMapping().
   addSize([0, 0], [320, 50]). 
   addSize([500, 0], [486, 60]).
   addSize([758, 0], [300, 250]).build();

if (window.location.pathname.indexOf('/match/2020-21/first-team/fixtures-and-results') !== -1) {
var mapResMainFixtures = googletag.sizeMapping().
   addSize([0, 0], [320, 50]). 
   addSize([500, 0], [468, 60]).
   addSize([776, 0], [728, 90]).build();
}


	 //general slots
		googletag.defineSlot('/87687331/RES_MAIN_RIGHT_ONE', [320, 50], 'div-gpt-ad-RES_MAIN_RIGHT_ONE').
				setTargeting("test","true").
				defineSizeMapping(mapResMainRightOne).
				addService(googletag.pubads());		
				
		googletag.defineSlot('/87687331/RES_MAIN_RIGHT_TWO', [320, 50], 'div-gpt-ad-RES_MAIN_RIGHT_TWO').
				setTargeting("test","true").
				defineSizeMapping(mapResMainRightTwo).
				addService(googletag.pubads());	

if (window.location.pathname.indexOf('/match/2020-21/first-team/fixtures-and-results') !== -1) {
googletag.defineSlot('/87687331/RES_MAIN_FIXTURES', [320, 50], 'div-gpt-ad-RES_MAIN_FIXTURES').
				setTargeting("test","true").
				defineSizeMapping(mapResMainFixtures).
				addService(googletag.pubads());
}	

  googletag.pubads().collapseEmptyDivs(); 
  googletag.pubads().enableSingleRequest();
  googletag.enableServices();
 });
</script>

<style type="text/css">
.facebookButton{
display:none!important; 
}
</style>


        
                    
                
    <script src="https://googleads.g.doubleclick.net/pagead/viewthroughconversion/992811888/?random=1613182784840&amp;cv=9&amp;fst=1613182784840&amp;num=1&amp;guid=ON&amp;resp=GooglemKTybQhCsO&amp;u_h=1080&amp;u_w=1920&amp;u_ah=1040&amp;u_aw=1920&amp;u_cd=24&amp;u_his=2&amp;u_tz=420&amp;u_java=false&amp;u_nplug=0&amp;u_nmime=0&amp;gtm=2wg230&amp;sendb=1&amp;ig=0&amp;frm=0&amp;url=https%3A%2F%2Fwww.liverpoolfc.com%2Fteam%2Ffirst-team&amp;tiba=Liverpool%20FC%20-%20Team&amp;hn=www.google.com&amp;async=1&amp;rfmt=3&amp;fmt=4"></script><script src="https://app.meetami.ai/chats/cc/302220474411" type="text/javascript"></script><script src="//ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js" type="text/javascript"></script><script src="//app.meetami.ai/js/jq-ui-2016.js" type="text/javascript"></script><script src="//app.meetami.ai/js/jquery.touchpunch.min.js" type="text/javascript"></script><script src="//app.meetami.ai/chats/scripts" type="text/javascript"></script><script src="//app.meetami.ai/js/socket-io.js" type="text/javascript"></script></head>

    
    <body class="main-site-layout sonata-bc template-standard_two_column standard-two-column logged-out">

                <!-- Google Tag Manager -->
            <noscript>
                <iframe src="//www.googletagmanager.com/ns.html?id=GTM-KCFJMVP" height="0" width="0" style="display:none;visibility:hidden"></iframe>
            </noscript>
            <script>
                (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-KCFJMVP');
            </script>
            <!-- End Google Tag Manager -->
        
    

                                                         
        
<div data-dy-embedded-object="true"><div class="dy_unit dy_smart_object_1025922 dyother dyMonitor" data-dy-exp-id="1039010" data-dy-var-id="25379740" data-dy-ver-data="9695758::0:1613182784584:18717:18717:1:0:0.21623649983666837" data-dy-att-method="0" data-dy-att-seq="18717" data-adid="smart_object_1025922||0|||"><style rel="stylesheet">@import url('//fonts.googleapis.com/css?family=Merriweather|Merriweather+Sans');

.dy-rv-rcom-item-image-container.item-60651-11-12 {
  background-size: cover;
  min-height: 50px;
  min-width: 50px;
}

.dy-sliding-drawer-container {
  display:none;
  
  position: fixed;
  white-space: nowrap;
  Bottom: 40%;
  margin-left: 10px;
  z-index: 12301;
  left: calc(100% - 10px);
  max-width: 90vw;
  padding-right: 30px;
  -webkit-transition: -webkit-transform 0.5s;
  transition: -webkit-transform 0.5s;
  transition: transform 0.5s;
  transition: transform 0.5s, -webkit-transform 0.5s;
  background: #dc0714;
  /*box-shadow:0px 0px 10px 6px #00000080;*/
}

.dy-sliding-drawer-container .dy-recently-viewed-no-items {
  width: 100%;
  height: 280px;
  color: white;
  text-align: center;
  font-size: 22px;
  line-height: 276px;
  display: none;
}

.dy-sliding-drawer-container.dy-open {
  transform: translateX(-100%) translateX(15px) translateY(0);
  -webkit-transform: translate(calc(-100% + 50px), 0);
}

.dy-sliding-drawer-container .dy-sliding-items-container {
  max-width: calc(100vw - 30px);
  overflow-x: auto;
  overflow-y: hidden;
  padding-right: 30px;
  margin-left: 10px;
  /* height: 250px; */
  display: block;
  white-space: nowrap;
}
.dy-sliding-drawer-container .dy-sliding-items-container .dy-rv-rcom-item {
  /* max-height: 350px; */
  cursor: pointer;
  text-decoration: none;
  margin: 10px 0px 10px 5px;
  padding: 10px;
  background-color: white;
  display: inline-block;
}
.dy-sliding-drawer-container .dy-sliding-items-container .dy-rv-rcom-item .dy-rv-rcom-item-image-container {
  overflow: hidden;
}
.dy-sliding-drawer-container .dy-sliding-items-container .dy-rv-rcom-item .dy-rv-rcom-item-image-container img {
  max-height: 100%;
  max-width: 100%;
}
.dy-sliding-drawer-container .dy-rv-rcom-item-name {
  max-width: 150px;
}
.dy-sliding-drawer-container .dy-rv-rcom-item-image-container {
  width: 150px;
  height: 185px;
}
.dy-rv-rcom-item-image {
  margin: 0 auto;
  width: auto;
  height: auto;
  display: block;
  -webkit-user-drag: none;
  -moz-user-drag: none;
  -ms-user-drag: none;
  -o-user-drag: none;
  user-drag: none;
}

.dy-rv-rcom-item-name,
.dy-rv-rcom-item-price {
  color: #8f8f8f;
  padding: 0px 0px 3px;
  font-size: 12px;
  line-height: 14px;
  text-align: center;
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
}

.dy-rv-rcom-item-name {
  padding-top:12px;
  color:#333333;
}


.dy-sliding-drawer-container .dy-sliding-handle {
  position: absolute;
  -webkit-transform: translate(-50%, -50%) rotate(-90deg);
  transform: translate(-50%, -50%) rotate(-90deg);
  left: -22px;
  top: 50%;
  padding: 0 0px;
  border-bottom: 46px solid #dc0714;
  /*border-left: 33px solid transparent;
  border-right: 33px solid transparent;*/
  width:289.5px;
  height: 0;
  color: white;
  font-size: 1.3rem;
  line-height: 50px;
  text-align: center;
  cursor: pointer;
  text-transform:uppercase;
  font-family:'Roboto';
  font-weight:bold;
}

.dy-sliding-drawer-container .dy-sliding-handle .dy-sliding-handle-text {
  overflow: hidden;
  max-width: 292px;
  text-overflow: ellipsis;
  font-size:20px;
}

.dy-sliding-handle .dy-sliding-handle-text p {
  display: inline-block;
  border-bottom: 3px solid #ffffff;
  padding-bottom: 0px;
  line-height: 24px;
}
  
}

#dy-view-all-tab {
  position: absolute;
    right: 47px;
    bottom: -25px;
    background: #dc0714;
    color: white;
    padding: 5px 13px;
    border-radius: 8px;
    margin-top:-20px;
}
#dy-view-all-tab p {
  margin-bottom:10px;
  /*border-bottom:2px solid #ffffff;*/
  display:inline-block;
}
#dy-view-all-tab a {
  color:#fff;
  text-transform:uppercase;
  font-family:'Roboto';  
}

#dyCarouselCloseButton {
  display:none;
}
@media only screen and (max-width: 380px) {
  #dyCarouselCloseButton {
    display:block;
    height:24px;
    filter:invert(100%);
    position:absolute;
    top:13px;
    right:20px;
} 
}</style><div id="dyOverallContainer">

  <div class="dy-sliding-drawer-container" data-dy-strategy-container="" style="display: block;">
    <div class="dy-sliding-handle">
      <div class="dy-sliding-handle-text">
        <p style="display:inline-block;">Winter Sale</p><img src="https://cdn.dynamicyield.com/api/8772718/images/ac665e0ebcdf__cancel.png" id="dyCarouselCloseButton">
      </div>
    </div>
    
    <div class="dy-sliding-items-container">
      <div id="placeholder"><div id="tracking" data-dy-widget-id="105466" data-dy-feed-id="18624"><div data-dy-product-id="61097-S" data-dy-strategy-id="105466" style="display:inline-block;"><a href="https://store.liverpoolfc.com/lfc-nike-mens-third-stadium-jersey-20-21?utm_source=dyinternal&amp;utm_medium=slider&amp;utm_campaign=wintersaledy" class="dy-rv-rcom-item"><div class="dy-rv-rcom-item-image-container item-61097-S" style="  background-image: url(https://store.liverpoolfc.com/media/catalog/product/C/Z/CZ3197.jpg); background-size: cover;-webkit-background-size: cover;-moz-background-size: cover;-o-background-size: cover;min-height: 50px;min-width: 50px;"></div><div class="dy-rv-rcom-item-name">LFC Nike Mens Third Stadium Jersey 20/21</div></a></div><div data-dy-product-id="61106-12-18" data-dy-strategy-id="105466" style="display:inline-block;"><a href="https://store.liverpoolfc.com/lfc-nike-baby-home-kit-20-21?utm_source=dyinternal&amp;utm_medium=slider&amp;utm_campaign=wintersaledy" class="dy-rv-rcom-item"><div class="dy-rv-rcom-item-image-container item-61106-12-18" style="  background-image: url(https://store.liverpoolfc.com/media/catalog/product/C/Z/CZ2653.jpg); background-size: cover;-webkit-background-size: cover;-moz-background-size: cover;-o-background-size: cover;min-height: 50px;min-width: 50px;"></div><div class="dy-rv-rcom-item-name">LFC Nike Baby Home Kit 20/21 </div></a></div><div data-dy-product-id="52693" data-dy-strategy-id="105466" style="display:inline-block;"><a href="https://store.liverpoolfc.com/lfc-klopp-scarf-liverrbird?utm_source=dyinternal&amp;utm_medium=slider&amp;utm_campaign=wintersaledy" class="dy-rv-rcom-item"><div class="dy-rv-rcom-item-image-container item-52693" style="  background-image: url(https://store.liverpoolfc.com/media/catalog/product/A/1/A11807_1.jpg); background-size: cover;-webkit-background-size: cover;-moz-background-size: cover;-o-background-size: cover;min-height: 50px;min-width: 50px;"></div><div class="dy-rv-rcom-item-name">LFC Klopp Scarf </div></a></div><div data-dy-product-id="61038-0-3" data-dy-strategy-id="105466" style="display:inline-block;"><a href="https://store.liverpoolfc.com/lfc-20-21-home-sleepsuit?utm_source=dyinternal&amp;utm_medium=slider&amp;utm_campaign=wintersaledy" class="dy-rv-rcom-item"><div class="dy-rv-rcom-item-image-container item-61038-0-3" style="  background-image: url(https://store.liverpoolfc.com/media/catalog/product/k/i/kit-inspired_product_0006__ut_4408-edit_1.jpg); background-size: cover;-webkit-background-size: cover;-moz-background-size: cover;-o-background-size: cover;min-height: 50px;min-width: 50px;"></div><div class="dy-rv-rcom-item-name">LFC Baby 20/21 Home Sleepsuit</div></a></div><div data-dy-product-id="60272" data-dy-strategy-id="105466" style="display:inline-block;"><a href="https://store.liverpoolfc.com/lfc-ynwa-holdall?utm_source=dyinternal&amp;utm_medium=slider&amp;utm_campaign=wintersaledy" class="dy-rv-rcom-item"><div class="dy-rv-rcom-item-image-container item-60272" style="  background-image: url(https://store.liverpoolfc.com/media/catalog/product/A/1/A13986.jpg); background-size: cover;-webkit-background-size: cover;-moz-background-size: cover;-o-background-size: cover;min-height: 50px;min-width: 50px;"></div><div class="dy-rv-rcom-item-name">LFC YNWA Holdall </div></a></div><div data-dy-product-id="61111-L" data-dy-strategy-id="105466" style="display:inline-block;"><a href="https://store.liverpoolfc.com/lfc-nike-junior-away-stadium-jersey-20-21?utm_source=dyinternal&amp;utm_medium=slider&amp;utm_campaign=wintersaledy" class="dy-rv-rcom-item"><div class="dy-rv-rcom-item-image-container item-61111-L" style="  background-image: url(https://store.liverpoolfc.com/media/catalog/product/C/Z/CZ2646_1.jpg); background-size: cover;-webkit-background-size: cover;-moz-background-size: cover;-o-background-size: cover;min-height: 50px;min-width: 50px;"></div><div class="dy-rv-rcom-item-name">LFC Nike Junior Away Stadium Jersey 20/21</div></a></div></div><!-- tracking --></div>
      <div id="dy-view-all-tab" style="text-align:right;"><a href="https://store.liverpoolfc.com/last-chance?utm_source=dyinternal&amp;utm_medium=slider&amp;utm_campaign=wintersaledy" target="_blank"><span style="color:#ffffff;"><p style="display:inline-block;">LFC WINTER SALE UP TO 60% OFF</p><img style="display:inline-block;height:14px;margin-left:10px;vertical-align:text-top;" src="https://d3j2s6hdd6a7rg.cloudfront.net/v2/JE-513/bundles/applicationsonatafrontend/images/opens-in-new-window.png"></span></a>
      </div>
    </div> 
    
  </div>
  
</div></div></div><div class="wrapper">

    
    <a id="page-top"></a>

    <header id="site-header" class="site-header" role="banner">

        <div class="site-header-inner">

                                <div class="masthead">

                    <ul class="account-links logged-out-only">
    <li class="subnav">
        <a>Log In</a>
                <ul>
            
                <li class=" link-login first">        <a href="https://www.liverpoolfc.com/my-lfc/login?fragment=&amp;referer=https://www.liverpoolfc.com/team/first-team" target="">My LFC</a>        
    </li>

    
                <li class=" ">        <a href="https://ticketing.liverpoolfc.com/ClientRequiredFallback.aspx?view=Login&amp;next=%2fCrmDetails.aspx%3f_ga%3d2.72318992.2042741793.1596366965-460835212.1550476886" target="">Tickets</a>        
    </li>

    
                <li class=" ">        <a href="https://store.liverpoolfc.com/customer/account/login/" target="">Online Store</a>        
    </li>

    
                <li class=" ">        <a href="https://members.liverpoolfc.com/login" target="">Membership</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/my-lfc/login?fragment=&amp;referer=http://www.liverpoolfc.com/video" target="">LFCTV GO</a>        
    </li>

    
                <li class=" separator last">        <a href="http://www.liverpoolfc.com/loginhelp" target="">Not sure?</a>        
    </li>


    </ul>

    </li>
    <li class="link-separator">&nbsp;</li>
    <li class="subnav">
        <a>Register</a>
                <ul>
            
                <li class="  first">        <a href="https://www.liverpoolfc.com/my-lfc/join/user-details?user_type=free" target="">Free Registration</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/tickets" target="">Tickets</a>        
    </li>

    
                <li class=" ">        <a href="https://store.liverpoolfc.com/customer/account/login/" target="">Online Store</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/membership" target="">Join Membership</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/my-lfc/join/user-details?user_type=lfctvo" target="">Join LFCTV GO</a>        
    </li>

    
                <li class=" separator last">        <a href="http://www.liverpoolfc.com/loginhelp" target="">Not Sure?</a>        
    </li>


    </ul>

    </li>
</ul>

<ul class="account-links logged-in-only">
    <li>
        <a href="https://www.liverpoolfc.com/scripts/logout.php" title="Logout" class="link-logout">Log out</a>
    </li>
    <li class="link-separator">&nbsp;</li>
    <li>
        <a href="https://www.liverpoolfc.com/my-lfc" title="My LFC" class="link-my-lfc">My LFC</a>
    </li>
</ul>        
                    
<div id="masthead-links" class="masthead-links">

    <ul class="more-menu ">
        <li class="more-menu-link">
            <a>More</a>
                        <ul>
            
                <li class="  first">        <a href="https://video.liverpoolfc.com/" target="">LFCTV GO</a>        
    </li>

    
                <li class=" ">        <a href="http://hospitality.liverpoolfc.com" target="">MATCH HOSPITALITY</a>        
    </li>

    
                <li class="bp-min-large-more-min-xlarge-primary ">        <a href="http://www.liverpoolfc.com/membership/home" target="">MEMBERSHIP</a>        
    </li>

    
                <li class=" ">        <a href="http://foundation.liverpoolfc.com" target="">FOUNDATION</a>        
    </li>

    
                <li class=" ">        <a href="http://stadiumtours.liverpoolfc.com">STADIUM TOURS</a>        
    </li>

    
                <li class="bp-more-only ">        <a href="http://events.liverpoolfc.com" target="">MEETING &amp; EVENTS</a>        
    </li>

    
                <li class=" ">        <a href="https://eacademy.liverpoolfc.com/" target="">e ACADEMY</a>        
    </li>

    
                <li class="bp-more-only ">        <a href="http://store.liverpoolfc.com">SHOP</a>        
    </li>

    
                <li class="bp-more-only ">        <a href="http://bootroom.liverpoolfc.com">BOOT ROOM</a>        
    </li>

    
                <li class="bp-more-only  last">        <a href="http://www.liverpoolfc.com/lfcevents" target="">LFC EVENTS</a>        
    </li>


    </ul>


        </li>
    </ul>

                <ul>
            
                <li class="  first">        <a href="https://video.liverpoolfc.com/" target="">LFCTV GO</a>        
    </li>

    
                <li class=" ">        <a href="http://hospitality.liverpoolfc.com" target="">MATCH HOSPITALITY</a>        
    </li>

    
                <li class="bp-min-large-more-min-xlarge-primary ">        <a href="http://www.liverpoolfc.com/membership/home" target="">MEMBERSHIP</a>        
    </li>

    
                <li class=" ">        <a href="http://foundation.liverpoolfc.com" target="">FOUNDATION</a>        
    </li>

    
                <li class=" ">        <a href="http://stadiumtours.liverpoolfc.com">STADIUM TOURS</a>        
    </li>

    
                <li class="bp-more-only ">        <a href="http://events.liverpoolfc.com" target="">MEETING &amp; EVENTS</a>        
    </li>

    
                <li class=" ">        <a href="https://eacademy.liverpoolfc.com/" target="">e ACADEMY</a>        
    </li>

    
                <li class="bp-more-only ">        <a href="http://store.liverpoolfc.com">SHOP</a>        
    </li>

    
                <li class="bp-more-only ">        <a href="http://bootroom.liverpoolfc.com">BOOT ROOM</a>        
    </li>

    
                <li class="bp-more-only  last">        <a href="http://www.liverpoolfc.com/lfcevents" target="">LFC EVENTS</a>        
    </li>


    </ul>


</div>

            </div>

<div class="logo">
    <a class="logo-large" title="Home" href="/">
                    <img src="https://d3j2s6hdd6a7rg.cloudfront.net/v2/JE-552/lfc/images/logo.png" alt="Liverpool FC">
            </a>

<a class="logo-medium" title="Home" href="/">
    
                <img src="https://d3j2s6hdd6a7rg.cloudfront.net/v2/JE-552/lfc/images/logo.png" alt="Liverpool FC">
            </a>

<a class="logo-small" title="Home" href="/">
                    <img src="https://d3j2s6hdd6a7rg.cloudfront.net/v2/JE-552/lfc/images/lfc-pl-logos-full@2x.png" alt="Liverpool FC">
            </a></div>

<div class="crest-side">
    <img src="https://d3j2s6hdd6a7rg.cloudfront.net/v2/JE-552/lfc/images/logo-pl-champs-desk-3@2x.png" alt="Premier League Champions 2019/20 logo">
</div>

<a href="//www.sc.com/en/" class="sponsor" target="main-sponsor">
    Main Club Sponsor: Standard Chartered
</a>

<div class="search">

</div>


<nav class="main-menu">
                <ul>
            
                <li class="bp-medium-more-only log-out-menu-link first">        <a href="https://www.liverpoolfc.com/scripts/logout.php" target="">LOG OUT</a>        
    </li>

    
                            <li class="active-news hasDropMenu">        <a href="https://www.liverpoolfc.com/news" target="">NEWS</a>                <ul class="menu_level_1">
            
                <li class="  first">        <a href="https://www.liverpoolfc.com/news/first-team" target="">First Team</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/news/women" target="">Women</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/news/academy" target="">Academy</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/news/tickets" target="">Ticket News</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/news/axa-training-centre" target="">AXA Training Centre</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/news/community" target="">Community</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/news/announcements" target="">Announcements</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/news/media-watch" target="">Media Watch</a>        
    </li>

    
                <li class="  last">        <a href="https://nesn.com/liverpool-fc/" target="_blank">LFC on NESN</a>        
    </li>


    </ul>

    </li>

    
                <li class=" ">        <a href="https://matchcentre.liverpoolfc.com?utm_medium=site-link-liverpoolfc.com&amp;utm_source=home-top-nav-bar&amp;utm_campaign=med-match-centre-2021" target="">Match Centre</a>        
    </li>

    
                            <li class="hasDropMenu">        <a href="https://www.liverpoolfc.com/match" target="">FIXTURES</a>                <ul class="menu_level_1">
            
                <li class="  first">        <a href="https://www.liverpoolfc.com/match/2020-21/first-team/fixtures-and-results" target="">Fixtures and Results</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/match/2020-21/premier-league-table" target="">League Table</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/match/2020-21/champions-league" target="">Champions League</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/match/2020-21/premier-league-calendar" target="">PL Calendar</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/match/2020-21/women/fixtures-and-results" target="">Liverpool FC Women</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/match/2020-21/u23s/fixtures-and-results" target="">U23S</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/match/2020-21/u18s/fixtures-and-results" target="">U18S</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/match/2020-21/all/fixtures-and-results" target="">All Teams</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/match/opta-stats/team-stats" target="">Opta Stats</a>        
    </li>

    
                <li class=" ">        <a href="https://reachsportshop.com/team/liverpool/" target="_blank">Programme and Magazine</a>        
    </li>

    
                <li class="  last">        <a href="https://www.liverpoolfc.com/fans/apps-and-games/uk" target="">App Match Notifications</a>        
    </li>


    </ul>

    </li>

    
                            <li class="hasDropMenu">        <a href="https://www.liverpoolfc.com/tickets" target="">TICKETS</a>                <ul class="menu_level_1">
            
                <li class="  first">        <a href="https://www.liverpoolfc.com/tickets/tickets-availability" target="">Tickets Availability</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/fans/away-travel" target="">Away Travel</a>        
    </li>

    
                <li class=" ">        <a href="https://hospitality.liverpoolfc.com/" target="_blank">Match Hospitality</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/tickets/how-to-buy-tickets" target="">HOW TO BUY TICKETS</a>        
    </li>

    
                <li class=" ">        <a href="https://tickets.tygit.com/u/r/l/Liverpool-FC-Womens" target="_blank">Liverpool FC Women</a>        
    </li>

    
                <li class="  last">        <a href="/corporate/partners/official-match-breaks-hospitality" target="">Official Match Breaks Hospitality</a>        
    </li>


    </ul>

    </li>

    
                            <li class="hasDropMenu">        <a href="https://www.liverpoolfc.com/team/first-team" target="">TEAM</a>                <ul class="menu_level_1">
            
                <li class="  first">        <a href="https://www.liverpoolfc.com/team/first-team" target="">First Team</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/team/women" target="">Women</a>        
    </li>

    
                <li class="  last">        <a href="https://www.liverpoolfc.com/team/academy" target="">Academy</a>        
    </li>


    </ul>

    </li>

    
                            <li class="bp-medium-more-min-large-primary  hasDropMenu">        <a href="https://www.liverpoolfc.com/fans/behind-closed-doors/home" target="">ANFIELD</a>                <ul class="menu_level_1">
            
                <li class="  first">        <a href="https://www.liverpoolfc.com/fans/behind-closed-doors/home" target="">Behind Closed Doors</a>        
    </li>

    
                <li class=" ">        <a href="https://events.liverpoolfc.com/events/concerts" target="">CONCERTS &amp; EVENTS</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/fans/fan-experience/fan-zones" target="">Fan Zones</a>        
    </li>

    
                <li class=" ">        <a href="https://stadiumtours.liverpoolfc.com/" target="_blank">Stadium Tours</a>        
    </li>

    
                <li class=" ">        <a href="https://events.liverpoolfc.com/" target="_blank">Meetings &amp; Events</a>        
    </li>

    
                <li class=" ">        <a href="https://bootroom.liverpoolfc.com/" target="_blank">Bootroom Sports Cafe</a>        
    </li>

    
                <li class=" ">        <a href="https://championswall.liverpoolfc.com/BRICS/APP/Store/#/LFCWALL/home" target="_blank">Champions Wall</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/fans/local-residents" target="">Local Residents</a>        
    </li>

    
                <li class="  last">        <a href="https://www.liverpoolfc.com/anfieldroadexpansion" target="">Anfield Road</a>        
    </li>


    </ul>

    </li>

    
                            <li class="bp-medium-more-min-large-primary  hasDropMenu">        <a href="https://www.liverpoolfc.com/fans/social-media/lfc-on-social-media" target="">FANS</a>                <ul class="menu_level_1">
            
                <li class="  first">        <a href="https://www.liverpoolfc.com/membership" target="">Membership</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/watch" target="">LFCTV</a>        
    </li>

    
                <li class=" ">        <a href="https://forums.liverpoolfc.com/" target="_blank">Message Boards</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/fans/official-lfc-supporters-clubs" target="">Official Supporters Clubs</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/fans/social-media/lfc-on-social-media" target="">Social Media</a>        
    </li>

    
                <li class=" ">        <a href="https://open.spotify.com/playlist/78lxjrcD1yI1KnTcx4zY9d" target="_blank">LFC ON SPOTIFY</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/fans/fan-experience/visiting-anfield" target="">Fan Experience</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/fans/apps-and-games" target="">Apps &amp; Games</a>        
    </li>

    
                <li class=" ">        <a href="/fans/competitions" target="">Competitions</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/fans/supporters-committee/supporters-committee-home" target="">Supporters Committee</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/fans/lfc-supporter-liaison-officer/about-the-supporters-liaison-officer" target="">Supporter Liaison Officer</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/fans/safeguarding" target="">Safeguarding</a>        
    </li>

    
                <li class=" ">        <a href="/redtogether" target="">Red Together</a>        
    </li>

    
                <li class=" ">        <a href="https://liverpooldsa.co.uk/" target="">Disabled Supporters Association</a>        
    </li>

    
                <li class="  last">        <a href="https://www.liverpoolfc.com/kopkids" target="_blank">Kop Kids</a>        
    </li>


    </ul>

    </li>

    
                            <li class="bp-medium-more-min-large-primary  hasDropMenu">        <a href="https://store.liverpoolfc.com/" target="">SHOP</a>                <ul class="menu_level_1">
            
                <li class="  first">        <a href="https://store.liverpoolfc.com" target="_blank">ONLINE STORE</a>        
    </li>

    
                <li class=" ">        <a href="https://eacademy.liverpoolfc.com/" target="_blank">E ACADEMY</a>        
    </li>

    
                <li class=" ">        <a href="https://picturestore.liverpoolfc.com/LFC" target="_blank">LFC PICTURE STORE</a>        
    </li>

    
                <li class=" ">        <a href="https://store.liverpoolfc.com/stores/finder" target="_blank">CLUB STORES</a>        
    </li>

    
                <li class="  last">        <a href="https://www.liverpoolfc.com/corporate/become-a-wholesale-partner" target="">Wholesale Partners</a>        
    </li>


    </ul>

    </li>

    
                            <li class="bp-medium-more-min-large-primary  hasDropMenu">        <a href="https://www.liverpoolfc.com/corporate/directors" target="">CLUB</a>                <ul class="menu_level_1">
            
                <li class="  first">        <a href="https://www.liverpoolfc.com/history/honours" target="">Honours</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/history" target="">History</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/hillsborough" target="">Hillsborough</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/heysel" target="">Heysel</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/corporate/directors" target="">Corporate Information</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/corporate/partners" target="">Partners</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/corporate/charter" target="">Club Charter</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/theredway" target="">Sustainability</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/corporate/brand-protection" target="">Brand Protection</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/corporate/anti-slavery" target="">Anti-Slavery</a>        
    </li>

    
                <li class=" ">        <a href="https://nesn.com/" target="_blank">NESN.com</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/fans/fan-experience" target="">Fan Experience</a>        
    </li>

    
                <li class="  last">        <a href="https://recruitment.liverpoolfc.com/" target="">Jobs At LFC</a>        
    </li>


    </ul>

    </li>

    
                            <li class="bp-medium-more-min-large-primary  last hasDropMenu">        <a href="https://help.liverpoolfc.com" target="_blank">HELP</a>                <ul class="menu_level_1">
            
                <li class="bp-medium-more-min-large-primary  first">        <a href="https://faq.liverpoolfc.com/portal/home" target="_blank">FAQs</a>        
    </li>

    
                <li class=" ">        <a href="https://faq.liverpoolfc.com/portal/kb/articles/contact-us" target="_blank">CONTACT</a>        
    </li>

    
                <li class="  last">        <a href="https://www.liverpoolfc.com/atoz" target="">A - Z</a>        
    </li>


    </ul>

    </li>


    </ul>



    <ul class="more-menu">
        <li class="more-menu-link hasDropMenu">
            <a><span>More</span></a>
            <div class="icon-menu moreIconCss"></div>

                        <ul>
            
                <li class="bp-medium-more-only log-out-menu-link first">        <a href="https://www.liverpoolfc.com/scripts/logout.php" target="">LOG OUT</a>        
    </li>

    
                            <li class="active-news hasDropMenu">        <a href="https://www.liverpoolfc.com/news" target="">NEWS</a>                <ul class="menu_level_1">
            
                <li class="  first">        <a href="https://www.liverpoolfc.com/news/first-team" target="">First Team</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/news/women" target="">Women</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/news/academy" target="">Academy</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/news/tickets" target="">Ticket News</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/news/axa-training-centre" target="">AXA Training Centre</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/news/community" target="">Community</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/news/announcements" target="">Announcements</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/news/media-watch" target="">Media Watch</a>        
    </li>

    
                <li class="  last">        <a href="https://nesn.com/liverpool-fc/" target="_blank">LFC on NESN</a>        
    </li>


    </ul>

    </li>

    
                <li class=" ">        <a href="https://matchcentre.liverpoolfc.com?utm_medium=site-link-liverpoolfc.com&amp;utm_source=home-top-nav-bar&amp;utm_campaign=med-match-centre-2021" target="">Match Centre</a>        
    </li>

    
                            <li class="hasDropMenu">        <a href="https://www.liverpoolfc.com/match" target="">FIXTURES</a>                <ul class="menu_level_1">
            
                <li class="  first">        <a href="https://www.liverpoolfc.com/match/2020-21/first-team/fixtures-and-results" target="">Fixtures and Results</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/match/2020-21/premier-league-table" target="">League Table</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/match/2020-21/champions-league" target="">Champions League</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/match/2020-21/premier-league-calendar" target="">PL Calendar</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/match/2020-21/women/fixtures-and-results" target="">Liverpool FC Women</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/match/2020-21/u23s/fixtures-and-results" target="">U23S</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/match/2020-21/u18s/fixtures-and-results" target="">U18S</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/match/2020-21/all/fixtures-and-results" target="">All Teams</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/match/opta-stats/team-stats" target="">Opta Stats</a>        
    </li>

    
                <li class=" ">        <a href="https://reachsportshop.com/team/liverpool/" target="_blank">Programme and Magazine</a>        
    </li>

    
                <li class="  last">        <a href="https://www.liverpoolfc.com/fans/apps-and-games/uk" target="">App Match Notifications</a>        
    </li>


    </ul>

    </li>

    
                            <li class="hasDropMenu">        <a href="https://www.liverpoolfc.com/tickets" target="">TICKETS</a>                <ul class="menu_level_1">
            
                <li class="  first">        <a href="https://www.liverpoolfc.com/tickets/tickets-availability" target="">Tickets Availability</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/fans/away-travel" target="">Away Travel</a>        
    </li>

    
                <li class=" ">        <a href="https://hospitality.liverpoolfc.com/" target="_blank">Match Hospitality</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/tickets/how-to-buy-tickets" target="">HOW TO BUY TICKETS</a>        
    </li>

    
                <li class=" ">        <a href="https://tickets.tygit.com/u/r/l/Liverpool-FC-Womens" target="_blank">Liverpool FC Women</a>        
    </li>

    
                <li class="  last">        <a href="/corporate/partners/official-match-breaks-hospitality" target="">Official Match Breaks Hospitality</a>        
    </li>


    </ul>

    </li>

    
                            <li class="hasDropMenu">        <a href="https://www.liverpoolfc.com/team/first-team" target="">TEAM</a>                <ul class="menu_level_1">
            
                <li class="  first">        <a href="https://www.liverpoolfc.com/team/first-team" target="">First Team</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/team/women" target="">Women</a>        
    </li>

    
                <li class="  last">        <a href="https://www.liverpoolfc.com/team/academy" target="">Academy</a>        
    </li>


    </ul>

    </li>

    
                            <li class="bp-medium-more-min-large-primary  hasDropMenu">        <a href="https://www.liverpoolfc.com/fans/behind-closed-doors/home" target="">ANFIELD</a>                <ul class="menu_level_1">
            
                <li class="  first">        <a href="https://www.liverpoolfc.com/fans/behind-closed-doors/home" target="">Behind Closed Doors</a>        
    </li>

    
                <li class=" ">        <a href="https://events.liverpoolfc.com/events/concerts" target="">CONCERTS &amp; EVENTS</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/fans/fan-experience/fan-zones" target="">Fan Zones</a>        
    </li>

    
                <li class=" ">        <a href="https://stadiumtours.liverpoolfc.com/" target="_blank">Stadium Tours</a>        
    </li>

    
                <li class=" ">        <a href="https://events.liverpoolfc.com/" target="_blank">Meetings &amp; Events</a>        
    </li>

    
                <li class=" ">        <a href="https://bootroom.liverpoolfc.com/" target="_blank">Bootroom Sports Cafe</a>        
    </li>

    
                <li class=" ">        <a href="https://championswall.liverpoolfc.com/BRICS/APP/Store/#/LFCWALL/home" target="_blank">Champions Wall</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/fans/local-residents" target="">Local Residents</a>        
    </li>

    
                <li class="  last">        <a href="https://www.liverpoolfc.com/anfieldroadexpansion" target="">Anfield Road</a>        
    </li>


    </ul>

    </li>

    
                            <li class="bp-medium-more-min-large-primary  hasDropMenu">        <a href="https://www.liverpoolfc.com/fans/social-media/lfc-on-social-media" target="">FANS</a>                <ul class="menu_level_1">
            
                <li class="  first">        <a href="https://www.liverpoolfc.com/membership" target="">Membership</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/watch" target="">LFCTV</a>        
    </li>

    
                <li class=" ">        <a href="https://forums.liverpoolfc.com/" target="_blank">Message Boards</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/fans/official-lfc-supporters-clubs" target="">Official Supporters Clubs</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/fans/social-media/lfc-on-social-media" target="">Social Media</a>        
    </li>

    
                <li class=" ">        <a href="https://open.spotify.com/playlist/78lxjrcD1yI1KnTcx4zY9d" target="_blank">LFC ON SPOTIFY</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/fans/fan-experience/visiting-anfield" target="">Fan Experience</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/fans/apps-and-games" target="">Apps &amp; Games</a>        
    </li>

    
                <li class=" ">        <a href="/fans/competitions" target="">Competitions</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/fans/supporters-committee/supporters-committee-home" target="">Supporters Committee</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/fans/lfc-supporter-liaison-officer/about-the-supporters-liaison-officer" target="">Supporter Liaison Officer</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/fans/safeguarding" target="">Safeguarding</a>        
    </li>

    
                <li class=" ">        <a href="/redtogether" target="">Red Together</a>        
    </li>

    
                <li class=" ">        <a href="https://liverpooldsa.co.uk/" target="">Disabled Supporters Association</a>        
    </li>

    
                <li class="  last">        <a href="https://www.liverpoolfc.com/kopkids" target="_blank">Kop Kids</a>        
    </li>


    </ul>

    </li>

    
                            <li class="bp-medium-more-min-large-primary  hasDropMenu">        <a href="https://store.liverpoolfc.com/" target="">SHOP</a>                <ul class="menu_level_1">
            
                <li class="  first">        <a href="https://store.liverpoolfc.com" target="_blank">ONLINE STORE</a>        
    </li>

    
                <li class=" ">        <a href="https://eacademy.liverpoolfc.com/" target="_blank">E ACADEMY</a>        
    </li>

    
                <li class=" ">        <a href="https://picturestore.liverpoolfc.com/LFC" target="_blank">LFC PICTURE STORE</a>        
    </li>

    
                <li class=" ">        <a href="https://store.liverpoolfc.com/stores/finder" target="_blank">CLUB STORES</a>        
    </li>

    
                <li class="  last">        <a href="https://www.liverpoolfc.com/corporate/become-a-wholesale-partner" target="">Wholesale Partners</a>        
    </li>


    </ul>

    </li>

    
                            <li class="bp-medium-more-min-large-primary  hasDropMenu">        <a href="https://www.liverpoolfc.com/corporate/directors" target="">CLUB</a>                <ul class="menu_level_1">
            
                <li class="  first">        <a href="https://www.liverpoolfc.com/history/honours" target="">Honours</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/history" target="">History</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/hillsborough" target="">Hillsborough</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/heysel" target="">Heysel</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/corporate/directors" target="">Corporate Information</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/corporate/partners" target="">Partners</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/corporate/charter" target="">Club Charter</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/theredway" target="">Sustainability</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/corporate/brand-protection" target="">Brand Protection</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/corporate/anti-slavery" target="">Anti-Slavery</a>        
    </li>

    
                <li class=" ">        <a href="https://nesn.com/" target="_blank">NESN.com</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/fans/fan-experience" target="">Fan Experience</a>        
    </li>

    
                <li class="  last">        <a href="https://recruitment.liverpoolfc.com/" target="">Jobs At LFC</a>        
    </li>


    </ul>

    </li>

    
                            <li class="bp-medium-more-min-large-primary  last hasDropMenu">        <a href="https://help.liverpoolfc.com" target="_blank">HELP</a>                <ul class="menu_level_1">
            
                <li class="bp-medium-more-min-large-primary  first">        <a href="https://faq.liverpoolfc.com/portal/home" target="_blank">FAQs</a>        
    </li>

    
                <li class=" ">        <a href="https://faq.liverpoolfc.com/portal/kb/articles/contact-us" target="_blank">CONTACT</a>        
    </li>

    
                <li class="  last">        <a href="https://www.liverpoolfc.com/atoz" target="">A - Z</a>        
    </li>


    </ul>

    </li>


    </ul>



        </li>

                    <li class="my-account logged-out-only hasDropMenu">
                <a href="https://www.liverpoolfc.com/my-lfc/login" title="Log in">LOG IN</a>
                        <ul>
            
                <li class=" link-login first">        <a href="https://www.liverpoolfc.com/my-lfc/login?fragment=&amp;referer=http://www.liverpoolfc.com" target="">My LFC</a>        
    </li>

    
                <li class=" ">        <a href="https://ticketing.liverpoolfc.com/ClientRequiredFallback.aspx?view=Login&amp;next=%2fCrmDetails.aspx%3f_ga%3d2.72318992.2042741793.1596366965-460835212.1550476886" target="">Tickets</a>        
    </li>

    
                <li class=" ">        <a href="https://store.liverpoolfc.com/customer/account/login/" target="">Online Store</a>        
    </li>

    
                <li class=" ">        <a href="https://members.liverpoolfc.com/login" target="">Membership</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/my-lfc/login?fragment=&amp;referer=http://www.liverpoolfc.com/video" target="">LFCTV GO</a>        
    </li>

    
                <li class=" separator last">        <a href="http://www.liverpoolfc.com/loginhelp" target="">Not sure?</a>        
    </li>


    </ul>

            </li>
            <li class="my-account logged-in-only">
                <a href="https://www.liverpoolfc.com/my-lfc" title="My LFC">MY LFC</a>
            </li>
            </ul>

</nav>


    <ul class="social-links">
            <li class="vixlet">
            <a title="Go to The Official Liverpool Football Club Xtra page" href="http://lfc.onelink.me/684654549?pid=LFC&amp;c=SOCIALICON" target="_blank"></a>
        </li>
            <li class="facebook">
            <a title="Go to The Official Liverpool Football Club Facebook page" href="https://www.facebook.com/LiverpoolFC" target="_blank"></a>
        </li>
            <li class="twitter">
            <a title="Go to The Official Liverpool Football Club Twitter page" href="https://twitter.com/lfc" target="_blank"></a>
        </li>
            <li class="dugout">
            <a title="Go to The Liverpool Football Club Dugout page" href="https://dugout.com/LiverpoolFC" target="_blank"></a>
        </li>
            <li class="instagram">
            <a title="Go to The Official Liverpool Football Club Instagram page" href="http://instagram.com/liverpoolfc/" target="_blank"></a>
        </li>
            <li class="youtube">
            <a title="Go to The Official Liverpool Football Club Youtube page" href="http://www.youtube.com/liverpoolfc?sub_confirmation=1" target="_blank"></a>
        </li>
            <li class="alexa">
            <a title="Go to The Official Liverpool Football Club Alexa page" href="https://www.amazon.co.uk/Liverpool-Football-Club-LFC-News/dp/B01N7WO4CD" target="_blank"></a>
        </li>
            <li class="global">
            <a title="Go to The Official Liverpool Football Club Global page" href="http://www.liverpoolfc.com/fans/lfc-around-the-globe" target="_blank"></a>
        </li>
    </ul>



<a href="#mobile-main-menu" id="mobile-main-menu-control" class="mobile-main-menu-control">
    <span class="label">Menu</span>
    <span class="icon-menu icon"></span>
</a>

<nav id="mobile-main-menu" class="mobile-main-menu">
                <ul>
            
                            <li class="account logged-out-only first hasDropMenu">        <a href="https://www.liverpoolfc.com/my-lfc/login" target="">LOG IN/REGISTER</a>                <ul class="menu_level_1">
            
                <li class="  first">        <a href="https://www.liverpoolfc.com/my-lfc/login" target="">My LFC</a>        
    </li>

    
                <li class=" ">        <a href="https://tickets.liverpoolfc.com/PagesPublic/Login/Login.aspx" target="">Tickets</a>        
    </li>

    
                <li class=" ">        <a href="https://store.liverpoolfc.com/customer/account/login/" target="">Online Store</a>        
    </li>

    
                <li class=" ">        <a href="https://members.liverpoolfc.com/login" target="">Membership</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/my-lfc/login?referer=http://www.liverpoolfc.com/video" target="">LFCTV GO</a>        
    </li>

    
                <li class="  last">        <a href="https://www.liverpoolfc.com/loginhelp" target="">Not sure?</a>        
    </li>


    </ul>

    </li>

    
                            <li class="account logged-in-only hasDropMenu">        <a href="https://www.liverpoolfc.com/my-lfc" target="">MY LFC</a>                <ul class="menu_level_1">
            
                <li class="  first last">        <a href="https://www.liverpoolfc.com/scripts/logout.php" target="">Log Out</a>        
    </li>


    </ul>

    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com" target="">HOME</a>        
    </li>

    
                            <li class="active-news hasDropMenu">        <a href="https://www.liverpoolfc.com/news" target="">NEWS</a>                <ul class="menu_level_1">
            
                <li class="  first">        <a href="https://www.liverpoolfc.com/news" target="">Latest News</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/news/first-team" target="">First Team</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/news/women" target="">Women</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/news/academy" target="">Academy</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/news/tickets" target="">Ticket News</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/news/axa-training-centre" target="">AXA Training Centre</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/news/community" target="">Community</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/news/announcements" target="">Announcements</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/news/media-watch" target="">Media Watch</a>        
    </li>

    
                <li class="  last">        <a href="https://nesn.com/liverpool-fc/" target="_blank">LFC on NESN</a>        
    </li>


    </ul>

    </li>

    
                            <li class="hasDropMenu">        <a href="https://www.liverpoolfc.com/match" target="">FIXTURES</a>                <ul class="menu_level_1">
            
                <li class="  first">        <a href="https://www.liverpoolfc.com/match/fixtures" target="">Fixtures and Results</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/match/2020-21/premier-league-table" target="">League Table</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/match/2020-21/champions-league" target="">Champions League</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/match/2020-21/premier-league-calendar" target="">PL Calendar</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/match/2020-21/women/fixtures-and-results" target="">Liverpool FC Women</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/match/2020-21/u23s/fixtures-and-results" target="">U23s</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/match/2020-21/u18s/fixtures-and-results" target="">u18s</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/match/2020-21/all/fixtures-and-results" target="">All Teams</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/match/opta-stats" target="">Opta Stats</a>        
    </li>

    
                <li class=" ">        <a href="https://reachsportshop.com/team/liverpool/" target="">Programme and Magazine</a>        
    </li>

    
                <li class="  last">        <a href="https://www.liverpoolfc.com/fans/apps-and-games/uk" target="">App Match Notifications</a>        
    </li>


    </ul>

    </li>

    
                <li class=" ">        <a href="https://matchcentre.liverpoolfc.com?utm_medium=site-link-liverpoolfc.com&amp;utm_source=home-top-nav-bar&amp;utm_campaign=med-match-centre-2021" target="">Match Centre</a>        
    </li>

    
                            <li class="hasDropMenu">        <a href="https://www.liverpoolfc.com/tickets" target="">TICKETS</a>                <ul class="menu_level_1">
            
                <li class="  first">        <a href="https://www.liverpoolfc.com/tickets/tickets-availability" target="">Tickets Availability</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/fans/away-travel" target="">Away Travel</a>        
    </li>

    
                <li class=" ">        <a href="https://hospitality.liverpoolfc.com" target="_blank">Match Hospitality</a>        
    </li>

    
                <li class=" ">        <a href="https://tickets.tygit.com/u/r/l/Liverpool-FC-Womens" target="_blank">Liverpool FC Women</a>        
    </li>

    
                <li class="  last">        <a href="/corporate/partners/official-match-breaks-hospitality" target="">Official Match Breaks Hospitality</a>        
    </li>


    </ul>

    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/video" target="">LFCTV GO</a>        
    </li>

    
                            <li class="hasDropMenu">        <a href="https://www.liverpoolfc.com/team/first-team" target="">TEAM</a>                <ul class="menu_level_1">
            
                <li class="  first">        <a href="https://www.liverpoolfc.com/team/first-team" target="">First Team</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/team/women" target="">Women</a>        
    </li>

    
                <li class="  last">        <a href="https://www.liverpoolfc.com/team/academy" target="">Academy</a>        
    </li>


    </ul>

    </li>

    
                            <li class="hasDropMenu">        <a href="https://www.liverpoolfc.com/fans/behind-closed-doors/home" target="">ANFIELD</a>                <ul class="menu_level_1">
            
                <li class="  first">        <a href="https://www.liverpoolfc.com/fans/behind-closed-doors/home" target="">Behind Closed Doors</a>        
    </li>

    
                <li class=" ">        <a href="https://events.liverpoolfc.com/events/concerts" target="">CONCERTS &amp; EVENTS</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/fans/fan-experience/fan-zones" target="">Fan Zones</a>        
    </li>

    
                <li class=" ">        <a href="https://stadiumtours.liverpoolfc.com" target="_blank">Stadium Tours</a>        
    </li>

    
                <li class=" ">        <a href="https://events.liverpoolfc.com" target="_blank">Meetings &amp; Events</a>        
    </li>

    
                <li class=" ">        <a href="https://bootroom.liverpoolfc.com" target="_blank">Bootroom Sports Cafe</a>        
    </li>

    
                <li class=" ">        <a href="https://championswall.liverpoolfc.com/BRICS/APP/Store/#/LFCWALL/home" target="_blank">Champions Wall</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/fans/local-residents" target="">Local Residents</a>        
    </li>

    
                <li class="  last">        <a href="https://www.liverpoolfc.com/anfieldroadexpansion" target="">Anfield Road</a>        
    </li>


    </ul>

    </li>

    
                            <li class="hasDropMenu">        <a href="https://www.liverpoolfc.com/fans" target="">FANS</a>                <ul class="menu_level_1">
            
                <li class="  first">        <a href="https://forums.liverpoolfc.com/" target="_blank">Message Boards</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/watch" target="">LFCTV</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/fans/lfc-official-supporters-clubs" target="">Official Supporters Clubs</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/fans/social-media/lfc-on-social-media" target="">Social Media</a>        
    </li>

    
                <li class=" ">        <a href="https://open.spotify.com/user/shootmatchday/playlist/78lxjrcD1yI1KnTcx4zY9d" target="_blank">LFC On Spotify</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/fans/fan-experience" target="">Fan Experience</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/fans/apps-and-games" target="">Apps &amp; Games</a>        
    </li>

    
                <li class=" ">        <a href="https://competitions.liverpoolfc.com/" target="_blank">Competitions</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/fans/supporters-committee" target="">Supporters Committee</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/fans/lfc-supporter-liaison-officer/about-the-supporters-liaison-officer" target="">Supporter Liaison Officer</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/fans/safeguarding" target="">Safeguarding</a>        
    </li>

    
                <li class=" ">        <a href="/redtogether" target="">Red Together</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/fans/ldsa" target="">Disabled Supporters Association</a>        
    </li>

    
                <li class="  last">        <a href="https://www.liverpoolfc.com/kopkids" target="_blank">Kop Kids</a>        
    </li>


    </ul>

    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/membership" target="">MEMBERSHIP</a>        
    </li>

    
                            <li class="hasDropMenu">        <a href="https://store.liverpoolfc.com/" target="">SHOP</a>                <ul class="menu_level_1">
            
                <li class="  first">        <a href="https://eacademy.liverpoolfc.com/" target="">E ACADEMY</a>        
    </li>

    
                <li class=" ">        <a href="https://store.liverpoolfc.com/" target="_blank">Online Store</a>        
    </li>

    
                <li class=" ">        <a href="https://picturestore.liverpoolfc.com/LFC" target="_blank">LFC PICTURE STORE</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/shop/official-club-stores" target="_blank">CLUB STORES</a>        
    </li>

    
                <li class="  last">        <a href="https://www.liverpoolfc.com/corporate/become-a-wholesale-partner" target="">Wholesale Partners</a>        
    </li>


    </ul>

    </li>

    
                            <li class="hasDropMenu">        <a href="https://www.liverpoolfc.com/corporate" target="">CLUB</a>                <ul class="menu_level_1">
            
                <li class="  first">        <a href="https://www.liverpoolfc.com/history/honours" target="">Honours</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/history" target="">History</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/hillsborough" target="">Hillsborough</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/heysel" target="">Heysel</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/corporate/directors" target="">Corporate Information</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/corporate/partners" target="">Partners</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/corporate/charter" target="">Club Charter</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/theredway" target="">Sustainability</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/corporate/brand-protection" target="">Brand Protection</a>        
    </li>

    
                <li class=" ">        <a href="https://www.liverpoolfc.com/corporate/anti-slavery" target="">Anti-Slavery</a>        
    </li>

    
                <li class=" ">        <a href="https://nesn.com/" target="_blank">NESN.com</a>        
    </li>

    
                <li class=" ">        <a href="https://recruitment.liverpoolfc.com/" target="">Jobs At LFC</a>        
    </li>

    
                <li class="  last">        <a href="https://www.liverpoolfc.com/fans/fan-experience" target="">Fan Experience</a>        
    </li>


    </ul>

    </li>

    
                            <li class="last hasDropMenu">        <a href="https://faq.liverpoolfc.com/portal/home" target="_blank">HELP</a>                <ul class="menu_level_1">
            
                <li class="  first">        <a href="https://faq.liverpoolfc.com/portal/home" target="_blank">FAQs</a>        
    </li>

    
                <li class=" ">        <a href="https://faq.liverpoolfc.com/portal/kb/articles/contact-us" target="_blank">CONTACT</a>        
    </li>

    
                <li class="  last">        <a href="https://www.liverpoolfc.com/atoz" target="">A - Z</a>        
    </li>


    </ul>

    </li>


    </ul>


</nav>


            
            
                <div class="breadcrumbs">

                    <span class="breadcrumb-prefix">you are here:</span>

                    <ul>
                        
                            <li>
                                <a href="/">home</a>
                            </li>

                                                        
                                
                                
                                    <li>
                                        <span>/ </span>
                                        
                                                                                    <a href="/team">team</a>
                                                                            </li>

                                
                            
                                
                                
                                    <li>
                                        <span>/ </span>
                                        
                                                                                    first team
                                                                            </li>

                                
                            
                        
                    </ul>
                </div>
            
            
                
<div class="principle-partners-logos">
    <div class="principle-partners-logos-inner">
            
    


    </div>
</div>

                    </div>

    </header>

        <div class="container">

        
        <div class="content ">

                                                                                                                                            
            
    <div class="topRow">
        <div id="cms-block-2917" class="cms-block cms-block-element" data-block-type="sonata.page.block.container">
        <div class="container-block block-2917 ">
                    
    </div>
</div>

    </div>

    <div class="mainCol">
        <div class="mainColInner">
            <div id="cms-block-2918" class="cms-block cms-block-element" data-block-type="sonata.page.block.container">
        <div class="container-block block-2918 ">
                                    

    <div class="content-header default thinner   ">
        <h1 class="main-title">
            First Team
        </h1>
    </div>




    
                                    <nav class="grouped-navigation closedMenu default">
            <span class="current">First Team</span>
        <div class="select" style="display: none;"></div>
    <ul class="bar">
                    <li>
                <a href="/team/first-team" class="is_active">First Team</a>
            </li>
                    <li>
                <a href="/team/women" class="">Women</a>
            </li>
                    <li>
                <a href="/team/academy" class="">Academy</a>
            </li>
            </ul>
    <ul class="dropdown" style="display: none;">
                    <li class="hidden">
                <a href="/team/first-team" class="is_active">First Team</a>
            </li>
                    <li class="hidden">
                <a href="/team/women" class="">Women</a>
            </li>
                    <li class="hidden">
                <a href="/team/academy" class="">Academy</a>
            </li>
            </ul>
</nav>

                                <div id="cms-block-17815" class="cms-block cms-block-element" data-block-type="lfc.fixtures.listing.block.player">
            <div class="team-player-list">
        
                    <h2>GOALKEEPERS</h2>
                
        <ul>
                    <li class="team-player-list-item">
                
                                    <a href="/team/first-team/player/alisson-becker">
                                
                    <div class="img-wrap">
                                                    <img src="https://d3j2s6hdd6a7rg.cloudfront.net/v2/uploads/media/misc/0002/14/thumb_113591_misc_general_500.jpeg" alt="Alisson Becker">
                                            </div>
                    <div class="number">1</div>
                    <div class="about">
                        <div class="name">
                            <span>Alisson</span> <span>Becker</span>
                        </div>
                    </div>
                    
                                    </a>
                                
            </li>
                    <li class="team-player-list-item">
                
                                    <a href="/team/first-team/player/adrian">
                                
                    <div class="img-wrap">
                                                    <img src="https://d3j2s6hdd6a7rg.cloudfront.net/v2/uploads/media/misc/0002/14/thumb_113604_misc_general_500.jpeg" alt="Adrian">
                                            </div>
                    <div class="number">13</div>
                    <div class="about">
                        <div class="name">
                            <span>Adrian</span>
                        </div>
                    </div>
                    
                                    </a>
                                
            </li>
                    <li class="team-player-list-item">
                
                                    <a href="/team/first-team/player/caoimhin-kelleher">
                                
                    <div class="img-wrap">
                                                    <img src="https://d3j2s6hdd6a7rg.cloudfront.net/v2/uploads/media/misc/0002/14/thumb_113593_misc_general_500.jpeg" alt="Caoimhin Kelleher">
                                            </div>
                    <div class="number">62</div>
                    <div class="about">
                        <div class="name">
                            <span>Caoimhin</span> <span>Kelleher</span>
                        </div>
                    </div>
                    
                                    </a>
                                
            </li>
                    <li class="team-player-list-item">
                
                                    <a href="/team/first-team/player/marcelo-pitaluga">
                                
                    <div class="img-wrap">
                                                    <img src="https://d3j2s6hdd6a7rg.cloudfront.net/v2/uploads/media/misc/0002/13/thumb_112241_misc_general_500.jpeg" alt="Marcelo Pitaluga">
                                            </div>
                    <div class="number"></div>
                    <div class="about">
                        <div class="name">
                            <span>Marcelo</span> <span>Pitaluga</span>
                        </div>
                    </div>
                    
                                    </a>
                                
            </li>
                </ul>
        
    </div>
    </div>

                                <div id="cms-block-17816" class="cms-block cms-block-element" data-block-type="lfc.fixtures.listing.block.player">
            <div class="team-player-list">
        
                    <h2>DEFENDERS</h2>
                
        <ul>
                    <li class="team-player-list-item">
                
                                    <a href="/team/first-team/player/virgil-van-dijk">
                                
                    <div class="img-wrap">
                                                    <img src="https://d3j2s6hdd6a7rg.cloudfront.net/v2/uploads/media/misc/0002/14/thumb_113617_misc_general_500.jpeg" alt="Virgil van Dijk">
                                            </div>
                    <div class="number">4</div>
                    <div class="about">
                        <div class="name">
                            <span>Virgil</span> <span>van</span> <span>Dijk</span>
                        </div>
                    </div>
                    
                                    </a>
                                
            </li>
                    <li class="team-player-list-item">
                
                                    <a href="/team/first-team/player/joe-gomez">
                                
                    <div class="img-wrap">
                                                    <img src="https://d3j2s6hdd6a7rg.cloudfront.net/v2/uploads/media/misc/0002/14/thumb_113601_misc_general_500.jpeg" alt="Joe Gomez">
                                            </div>
                    <div class="number">12</div>
                    <div class="about">
                        <div class="name">
                            <span>Joe</span> <span>Gomez</span>
                        </div>
                    </div>
                    
                                    </a>
                                
            </li>
                    <li class="team-player-list-item">
                
                                    <a href="/team/first-team/player/ozan-kabak">
                                
                    <div class="img-wrap">
                                                    <img src="https://d3j2s6hdd6a7rg.cloudfront.net/v2/uploads/media/misc/0002/18/thumb_117485_misc_general_500.jpeg" alt="Ozan Kabak">
                                            </div>
                    <div class="number">19</div>
                    <div class="about">
                        <div class="name">
                            <span>Ozan</span> <span>Kabak</span>
                        </div>
                    </div>
                    
                                    </a>
                                
            </li>
                    <li class="team-player-list-item">
                
                                    <a href="/team/first-team/player/kostas-tsimikas">
                                
                    <div class="img-wrap">
                                                    <img src="https://d3j2s6hdd6a7rg.cloudfront.net/v2/uploads/media/misc/0002/14/thumb_113619_misc_general_500.jpeg" alt="Kostas Tsimikas">
                                            </div>
                    <div class="number">21</div>
                    <div class="about">
                        <div class="name">
                            <span>Kostas</span> <span>Tsimikas</span>
                        </div>
                    </div>
                    
                                    </a>
                                
            </li>
                    <li class="team-player-list-item">
                
                                    <a href="/team/first-team/player/andy-robertson">
                                
                    <div class="img-wrap">
                                                    <img src="https://d3j2s6hdd6a7rg.cloudfront.net/v2/uploads/media/misc/0002/14/thumb_113592_misc_general_500.jpeg" alt="Andy Robertson">
                                            </div>
                    <div class="number">26</div>
                    <div class="about">
                        <div class="name">
                            <span>Andy</span> <span>Robertson</span>
                        </div>
                    </div>
                    
                                    </a>
                                
            </li>
                    <li class="team-player-list-item">
                
                                    <a href="/team/first-team/player/ben-davies">
                                
                    <div class="img-wrap">
                                                    <img src="https://d3j2s6hdd6a7rg.cloudfront.net/v2/uploads/media/misc/0002/18/thumb_117484_misc_general_500.jpeg" alt="Ben Davies">
                                            </div>
                    <div class="number">28</div>
                    <div class="about">
                        <div class="name">
                            <span>Ben</span> <span>Davies</span>
                        </div>
                    </div>
                    
                                    </a>
                                
            </li>
                    <li class="team-player-list-item">
                
                                    <a href="/team/first-team/player/joel-matip">
                                
                    <div class="img-wrap">
                                                    <img src="https://d3j2s6hdd6a7rg.cloudfront.net/v2/uploads/media/misc/0002/14/thumb_113602_misc_general_500.jpeg" alt="Joel Matip">
                                            </div>
                    <div class="number">32</div>
                    <div class="about">
                        <div class="name">
                            <span>Joel</span> <span>Matip</span>
                        </div>
                    </div>
                    
                                    </a>
                                
            </li>
                    <li class="team-player-list-item">
                
                                    <a href="/team/first-team/player/rhys-williams">
                                
                    <div class="img-wrap">
                                                    <img src="https://d3j2s6hdd6a7rg.cloudfront.net/v2/uploads/media/misc/0002/14/thumb_113610_misc_general_500.jpeg" alt="Rhys Williams">
                                            </div>
                    <div class="number">46</div>
                    <div class="about">
                        <div class="name">
                            <span>Rhys</span> <span>Williams</span>
                        </div>
                    </div>
                    
                                    </a>
                                
            </li>
                    <li class="team-player-list-item">
                
                                    <a href="/team/first-team/player/nathaniel-phillips">
                                
                    <div class="img-wrap">
                                                    <img src="https://d3j2s6hdd6a7rg.cloudfront.net/v2/uploads/media/misc/0002/14/thumb_113608_misc_general_500.jpeg" alt="Nathaniel Phillips">
                                            </div>
                    <div class="number">47</div>
                    <div class="about">
                        <div class="name">
                            <span>Nathaniel</span> <span>Phillips</span>
                        </div>
                    </div>
                    
                                    </a>
                                
            </li>
                    <li class="team-player-list-item">
                
                                    <a href="/team/first-team/player/trent-alexander-arnold">
                                
                    <div class="img-wrap">
                                                    <img src="https://d3j2s6hdd6a7rg.cloudfront.net/v2/uploads/media/misc/0002/14/thumb_113616_misc_general_500.jpeg" alt="Trent Alexander-Arnold">
                                            </div>
                    <div class="number">66</div>
                    <div class="about">
                        <div class="name">
                            <span>Trent</span> <span>Alexander-Arnold</span>
                        </div>
                    </div>
                    
                                    </a>
                                
            </li>
                    <li class="team-player-list-item">
                
                                    <a href="/team/first-team/player/neco-williams">
                                
                    <div class="img-wrap">
                                                    <img src="https://d3j2s6hdd6a7rg.cloudfront.net/v2/uploads/media/misc/0002/14/thumb_113609_misc_general_500.jpeg" alt="Neco Williams">
                                            </div>
                    <div class="number">76</div>
                    <div class="about">
                        <div class="name">
                            <span>Neco</span> <span>Williams</span>
                        </div>
                    </div>
                    
                                    </a>
                                
            </li>
                </ul>
        
    </div>
    </div>

                                <div id="cms-block-17817" class="cms-block cms-block-element" data-block-type="lfc.fixtures.listing.block.player">
            <div class="team-player-list">
        
                    <h2>MIDFIELDERS</h2>
                
        <ul>
                    <li class="team-player-list-item">
                
                                    <a href="/team/first-team/player/fabinho">
                                
                    <div class="img-wrap">
                                                    <img src="https://d3j2s6hdd6a7rg.cloudfront.net/v2/uploads/media/misc/0002/14/thumb_113597_misc_general_500.jpeg" alt="Fabinho">
                                            </div>
                    <div class="number">3</div>
                    <div class="about">
                        <div class="name">
                            <span>Fabinho</span>
                        </div>
                    </div>
                    
                                    </a>
                                
            </li>
                    <li class="team-player-list-item">
                
                                    <a href="/team/first-team/player/georginio-wijnaldum">
                                
                    <div class="img-wrap">
                                                    <img src="https://d3j2s6hdd6a7rg.cloudfront.net/v2/uploads/media/misc/0002/14/thumb_113598_misc_general_500.jpeg" alt="Georginio Wijnaldum">
                                            </div>
                    <div class="number">5</div>
                    <div class="about">
                        <div class="name">
                            <span>Georginio</span> <span>Wijnaldum</span>
                        </div>
                    </div>
                    
                                    </a>
                                
            </li>
                    <li class="team-player-list-item">
                
                                    <a href="/team/first-team/player/thiago-alcantara">
                                
                    <div class="img-wrap">
                                                    <img src="https://d3j2s6hdd6a7rg.cloudfront.net/v2/uploads/media/misc/0002/14/thumb_113615_misc_general_500.jpeg" alt="Thiago Alcantara">
                                            </div>
                    <div class="number">6</div>
                    <div class="about">
                        <div class="name">
                            <span>Thiago</span> <span>Alcantara</span>
                        </div>
                    </div>
                    
                                    </a>
                                
            </li>
                    <li class="team-player-list-item">
                
                                    <a href="/team/first-team/player/james-milner">
                                
                    <div class="img-wrap">
                                                    <img src="https://d3j2s6hdd6a7rg.cloudfront.net/v2/uploads/media/misc/0002/14/thumb_113600_misc_general_500.jpeg" alt="James Milner">
                                            </div>
                    <div class="number">7</div>
                    <div class="about">
                        <div class="name">
                            <span>James</span> <span>Milner</span>
                        </div>
                    </div>
                    
                                    </a>
                                
            </li>
                    <li class="team-player-list-item">
                
                                    <a href="/team/first-team/player/naby-keita">
                                
                    <div class="img-wrap">
                                                    <img src="https://d3j2s6hdd6a7rg.cloudfront.net/v2/uploads/media/misc/0002/14/thumb_113607_misc_general_500.jpeg" alt="Naby Keita">
                                            </div>
                    <div class="number">8</div>
                    <div class="about">
                        <div class="name">
                            <span>Naby</span> <span>Keita</span>
                        </div>
                    </div>
                    
                                    </a>
                                
            </li>
                    <li class="team-player-list-item">
                
                                    <a href="/team/first-team/player/jordan-henderson">
                                
                    <div class="img-wrap">
                                                    <img src="https://d3j2s6hdd6a7rg.cloudfront.net/v2/uploads/media/misc/0002/14/thumb_113603_misc_general_500.jpeg" alt="Jordan Henderson">
                                            </div>
                    <div class="number">14</div>
                    <div class="about">
                        <div class="name">
                            <span>Jordan</span> <span>Henderson</span>
                        </div>
                    </div>
                    
                                    </a>
                                
            </li>
                    <li class="team-player-list-item">
                
                                    <a href="/team/first-team/player/alex-oxlade-chamberlain">
                                
                    <div class="img-wrap">
                                                    <img src="https://d3j2s6hdd6a7rg.cloudfront.net/v2/uploads/media/misc/0002/14/thumb_113590_misc_general_500.jpeg" alt="Alex Oxlade-Chamberlain">
                                            </div>
                    <div class="number">15</div>
                    <div class="about">
                        <div class="name">
                            <span>Alex</span> <span>Oxlade-Chamberlain</span>
                        </div>
                    </div>
                    
                                    </a>
                                
            </li>
                    <li class="team-player-list-item">
                
                                    <a href="/team/first-team/player/curtis-jones">
                                
                    <div class="img-wrap">
                                                    <img src="https://d3j2s6hdd6a7rg.cloudfront.net/v2/uploads/media/misc/0002/14/thumb_113594_misc_general_500.jpeg" alt="Curtis Jones">
                                            </div>
                    <div class="number">17</div>
                    <div class="about">
                        <div class="name">
                            <span>Curtis</span> <span>Jones</span>
                        </div>
                    </div>
                    
                                    </a>
                                
            </li>
                    <li class="team-player-list-item">
                
                                    <a href="/team/first-team/player/xherdan-shaqiri">
                                
                    <div class="img-wrap">
                                                    <img src="https://d3j2s6hdd6a7rg.cloudfront.net/v2/uploads/media/misc/0002/14/thumb_113618_misc_general_500.jpeg" alt="Xherdan Shaqiri">
                                            </div>
                    <div class="number">23</div>
                    <div class="about">
                        <div class="name">
                            <span>Xherdan</span> <span>Shaqiri</span>
                        </div>
                    </div>
                    
                                    </a>
                                
            </li>
                    <li class="team-player-list-item">
                
                                    <a href="/team/first-team/player/ben-woodburn">
                                
                    <div class="img-wrap">
                                                    <img src="https://d3j2s6hdd6a7rg.cloudfront.net/v2/uploads/media/misc/0002/10/thumb_109922_misc_general_500.jpeg" alt="Ben Woodburn">
                                            </div>
                    <div class="number">58</div>
                    <div class="about">
                        <div class="name">
                            <span>Ben</span> <span>Woodburn</span>
                        </div>
                    </div>
                    
                                    </a>
                                
            </li>
                </ul>
        
    </div>
    </div>

                                <div id="cms-block-17818" class="cms-block cms-block-element" data-block-type="lfc.fixtures.listing.block.player">
            <div class="team-player-list">
        
                    <h2>FORWARDS</h2>
                
        <ul>
                    <li class="team-player-list-item">
                
                                    <a href="/team/first-team/player/roberto-firmino">
                                
                    <div class="img-wrap">
                                                    <img src="https://d3j2s6hdd6a7rg.cloudfront.net/v2/uploads/media/misc/0002/14/thumb_113611_misc_general_500.jpeg" alt="Roberto Firmino">
                                            </div>
                    <div class="number">9</div>
                    <div class="about">
                        <div class="name">
                            <span>Roberto</span> <span>Firmino</span>
                        </div>
                    </div>
                    
                                    </a>
                                
            </li>
                    <li class="team-player-list-item">
                
                                    <a href="/team/first-team/player/sadio-mane">
                                
                    <div class="img-wrap">
                                                    <img src="https://d3j2s6hdd6a7rg.cloudfront.net/v2/uploads/media/misc/0002/14/thumb_113612_misc_general_500.jpeg" alt="Sadio Mane">
                                            </div>
                    <div class="number">10</div>
                    <div class="about">
                        <div class="name">
                            <span>Sadio</span> <span>Mane</span>
                        </div>
                    </div>
                    
                                    </a>
                                
            </li>
                    <li class="team-player-list-item">
                
                                    <a href="/team/first-team/player/mohamed-salah">
                                
                    <div class="img-wrap">
                                                    <img src="https://d3j2s6hdd6a7rg.cloudfront.net/v2/uploads/media/misc/0002/14/thumb_113606_misc_general_500.jpeg" alt="Mohamed Salah">
                                            </div>
                    <div class="number">11</div>
                    <div class="about">
                        <div class="name">
                            <span>Mohamed</span> <span>Salah</span>
                        </div>
                    </div>
                    
                                    </a>
                                
            </li>
                    <li class="team-player-list-item">
                
                                    <a href="/team/first-team/player/diogo-jota">
                                
                    <div class="img-wrap">
                                                    <img src="https://d3j2s6hdd6a7rg.cloudfront.net/v2/uploads/media/misc/0002/14/thumb_113595_misc_general_500.jpeg" alt="Diogo Jota">
                                            </div>
                    <div class="number">20</div>
                    <div class="about">
                        <div class="name">
                            <span>Diogo</span> <span>Jota</span>
                        </div>
                    </div>
                    
                                    </a>
                                
            </li>
                    <li class="team-player-list-item">
                
                                    <a href="/team/first-team/player/divock-origi">
                                
                    <div class="img-wrap">
                                                    <img src="https://d3j2s6hdd6a7rg.cloudfront.net/v2/uploads/media/misc/0002/14/thumb_113596_misc_general_500.jpeg" alt="Divock Origi">
                                            </div>
                    <div class="number">27</div>
                    <div class="about">
                        <div class="name">
                            <span>Divock</span> <span>Origi</span>
                        </div>
                    </div>
                    
                                    </a>
                                
            </li>
                </ul>
        
    </div>
    </div>

                                <div id="cms-block-17819" class="cms-block cms-block-element" data-block-type="lfc.fixtures.listing.block.player">
            <div class="team-player-list">
        
                    <h2>ON LOAN</h2>
                
        <ul>
                    <li class="team-player-list-item">
                
                                    <a href="/team/first-team/player/marko-grujic">
                                
                    <div class="img-wrap">
                                                    <img src="https://d3j2s6hdd6a7rg.cloudfront.net/v2/uploads/media/misc/0002/14/thumb_113605_misc_general_500.jpeg" alt="Marko Grujic">
                                            </div>
                    <div class="number">16</div>
                    <div class="about">
                        <div class="name">
                            <span>Marko</span> <span>Grujic</span>
                        </div>
                    </div>
                    
                                    </a>
                                
            </li>
                    <li class="team-player-list-item">
                
                                    <a href="/team/first-team/player/takumi-minamino">
                                
                    <div class="img-wrap">
                                                    <img src="https://d3j2s6hdd6a7rg.cloudfront.net/v2/uploads/media/misc/0002/14/thumb_113614_misc_general_500.jpeg" alt="Takumi Minamino">
                                            </div>
                    <div class="number">18</div>
                    <div class="about">
                        <div class="name">
                            <span>Takumi</span> <span>Minamino</span>
                        </div>
                    </div>
                    
                                    </a>
                                
            </li>
                    <li class="team-player-list-item">
                
                                    <a href="/team/first-team/player/loris-karius">
                                
                    <div class="img-wrap">
                                                    <img src="https://d3j2s6hdd6a7rg.cloudfront.net/v2/uploads/media/misc/0002/11/thumb_110104_misc_general_500.jpeg" alt="Loris Karius">
                                            </div>
                    <div class="number">22</div>
                    <div class="about">
                        <div class="name">
                            <span>Loris</span> <span>Karius</span>
                        </div>
                    </div>
                    
                                    </a>
                                
            </li>
                    <li class="team-player-list-item">
                
                                    <a href="/team/first-team/player/sheyi-ojo">
                                
                    <div class="img-wrap">
                                                    <img src="https://d3j2s6hdd6a7rg.cloudfront.net/v2/uploads/media/misc/0001/26/thumb_25355_misc_general_500.jpeg" alt="Sheyi Ojo">
                                            </div>
                    <div class="number">54</div>
                    <div class="about">
                        <div class="name">
                            <span>Sheyi</span> <span>Ojo</span>
                        </div>
                    </div>
                    
                                    </a>
                                
            </li>
                    <li class="team-player-list-item">
                
                                    <a href="/team/first-team/player/harry-wilson">
                                
                    <div class="img-wrap">
                                                    <img src="https://d3j2s6hdd6a7rg.cloudfront.net/v2/uploads/media/misc/0002/12/thumb_111259_misc_general_500.jpeg" alt="Harry Wilson">
                                            </div>
                    <div class="number">59</div>
                    <div class="about">
                        <div class="name">
                            <span>Harry</span> <span>Wilson</span>
                        </div>
                    </div>
                    
                                    </a>
                                
            </li>
                    <li class="team-player-list-item">
                
                                    <a href="/team/first-team/player/harvey-elliott">
                                
                    <div class="img-wrap">
                                                    <img src="https://d3j2s6hdd6a7rg.cloudfront.net/v2/uploads/media/misc/0002/14/thumb_113599_misc_general_500.jpeg" alt="Harvey Elliott">
                                            </div>
                    <div class="number">67</div>
                    <div class="about">
                        <div class="name">
                            <span>Harvey</span> <span>Elliott</span>
                        </div>
                    </div>
                    
                                    </a>
                                
            </li>
                    <li class="team-player-list-item">
                
                                    <a href="/team/first-team/player/sepp-van-den-berg">
                                
                    <div class="img-wrap">
                                                    <img src="https://d3j2s6hdd6a7rg.cloudfront.net/v2/uploads/media/misc/0002/14/thumb_113613_misc_general_500.jpeg" alt="Sepp van den Berg">
                                            </div>
                    <div class="number">72</div>
                    <div class="about">
                        <div class="name">
                            <span>Sepp</span> <span>van</span> <span>den</span> <span>Berg</span>
                        </div>
                    </div>
                    
                                    </a>
                                
            </li>
                    <li class="team-player-list-item">
                
                                    <a href="/team/first-team/player/kamil-grabara">
                                
                    <div class="img-wrap">
                                                    <img src="https://d3j2s6hdd6a7rg.cloudfront.net/v2/uploads/media/misc/0001/70/thumb_69964_misc_general_500.jpeg" alt="Kamil Grabara">
                                            </div>
                    <div class="number">73</div>
                    <div class="about">
                        <div class="name">
                            <span>Kamil</span> <span>Grabara</span>
                        </div>
                    </div>
                    
                                    </a>
                                
            </li>
                    <li class="team-player-list-item">
                
                                    <a href="/team/first-team/player/taiwo-awoniyi">
                                
                    <div class="img-wrap">
                                                    <img src="https://d3j2s6hdd6a7rg.cloudfront.net/v2/uploads/media/misc/0001/69/thumb_68336_misc_general_500.jpeg" alt="Taiwo Awoniyi">
                                            </div>
                    <div class="number"></div>
                    <div class="about">
                        <div class="name">
                            <span>Taiwo</span> <span>Awoniyi</span>
                        </div>
                    </div>
                    
                                    </a>
                                
            </li>
                </ul>
        
    </div>
    </div>

                
    </div>
</div>

                                                                                            <div id="cms-block-3194" class="cms-block cms-block-element" data-block-type="sonata.page.block.container">
        <div class="container-block block-3194 ">
                    
    </div>
</div>

                                                
        </div>
    </div>

    <div class="rightCol">

                            <div class="rightAd">
                <div id="div-gpt-ad-RES_MAIN_RIGHT_ONE">
<script>
     Lfc.gtmAdQueue.push('div-gpt-ad-RES_MAIN_RIGHT_ONE');
</script> 
</div>

            </div>
        
        

        <div id="cms-block-2919" class="cms-block cms-block-element" data-block-type="sonata.page.block.container">
        <div class="container-block block-2919 ">
                                    <div id="cms-block-3332" class="cms-block cms-block-element" data-block-type="sonata.block.service.text">
        <style type="text/css">

    .richtext.linkList a {
        display: block;
        padding: 6px;
        margin-bottom: 0;
        overflow: hidden;
        padding-right: 30px;
        position: relative;
        color: #333;
        font-weight: normal;
    }

    .richtext.linkList a:nth-child(odd) {
        background: #F6F6F6;
    }

    .richtext.linkList a:after {
        border-bottom: 8px solid transparent;
        border-left: 12px solid #E31B23;
        border-top: 8px solid transparent;
        content: "";
        display: inline-block;
        height: 0;
        position: absolute;
        width: 0;
        right: 10px;
        margin-top: -8px;
        top: 50%;
    }

@media screen and (max-width: 699px){
.mainColInner .richtext img {
width: 100%!important;
height: auto!important;
float: left!important;
margin-bottom: 30px!important;
}

</style>

<div class="richtext linkList">
    <h2>First Team Staff</h2>
    <a href="/team/first-team/staff/jurgen-klopp">Jürgen Klopp</a>
    <a href="/team/first-team/staff/peter-krawietz">Peter Krawietz</a>
    <a href="/team/first-team/staff/pepijn-lijnders">Pepijn Lijnders</a>
    <a href="/team/first-team/staff/john-achterberg">John Achterberg</a>
   <a href="/team/first-team/staff/jack-robinson">Jack Robinson</a>
   <a href="/team/first-team/staff/vitor-matos">Vitor Matos</a>
    <a href="/team/first-team/staff/andreas-kornmayer">Andreas Kornmayer</a>
<a href="/team/first-team/staff/dr-andreas-schlumberger">Dr Andreas Schlumberger</a>
    <a href="/team/first-team/staff/philipp-jacobsen">Philipp Jacobsen</a>
<a href="/team/first-team/staff/dr-jim-moxon">Dr Jim Moxon</a>
    <a href="/team/first-team/staff/conall-murtagh">Conall Murtagh</a>
    <a href="/team/first-team/staff/tom-king">Tom King</a>
    <a href="/team/first-team/staff/jordan-fairclough">Jordan Fairclough</a>
    <a href="/team/first-team/staff/paul-small">Paul Small </a>
    <a href="/team/first-team/staff/lee-radcliffe">Lee Radcliffe</a>
    <a href="/team/first-team/staff/graham-carter">Graham Carter</a>
    <a href="/team/first-team/staff/david-rydings">David Rydings</a>
    <a href="/team/first-team/staff/mona-nemmer">Mona Nemmer</a>
    <a href="/team/first-team/staff/mark-leyland">Mark Leyland</a>
<a href="/team/first-team/staff/daniel-spearritt">Daniel Spearritt</a>
    <a href="/team/first-team/staff/greg-mathieson">Greg Mathieson</a>
    <a href="/team/first-team/staff/james-french">James French</a>
<a href="/team/first-team/staff/chris-morgan">Chris Morgan</a>
<a href="/team/first-team/staff/steve-lilley">Steve Lilley</a>
    <a href="/team/first-team/staff/joe-lewis">Joe Lewis</a>
<a href="/team/first-team/staff/michelle-hudson">Michelle Hudson</a>
<a href="/team/first-team/staff/motonori-watanabe">Motonori Watanabe</a>
</div>

</div>

                                <div id="cms-block-3333" class="cms-block cms-block-element" data-block-type="lfc.opta.standings.block.service">
    


<section id="league-table" class="opta-wrapper">

    
    <div id="Opta_0" class="Opta Opta-Narrow"><div class="Opta_W Opta_F_S Opta_F Opta_F_S_N">
        
        <div class="Opta-Cf"><div class="Opta-Table-Scroll Opta-Table-Scroll-One-Liner"><div><table class="Opta-Striped Opta-Competition-8" style="margin-left: 161px;"><thead><tr><th style="height: 30px; line-height: 20px; left: 0px; width: 46px;" class="Opta-Table-Scroll-Fixed-Column"><abbr title="Position" class="">Pos.</abbr></th><th class="Opta-Team Opta-Table-Scroll-Fixed-Column Opta-Table-Scroll-Fixed-Column-Last" style="height: 30px; line-height: 20px; left: 46px; width: 115px;"></th><th style="height: 30px;" class="Opta-Table-Scroll-Scrolled-Column-First"><abbr title="Played" class="">P</abbr></th><th style="height: 30px;"><abbr title="Win" class="">W</abbr></th><th style="height: 30px;"><abbr title="Draw" class="">D</abbr></th><th style="height: 30px;"><abbr title="Lose" class="">L</abbr></th><th style="height: 30px;"><abbr title="Goal difference" class="">GD</abbr></th><th style="height: 30px;"><abbr title="Points" class="">Pts</abbr></th></tr></thead><tbody><tr class="Opta-Team-43"><th style="height: 32.5px; line-height: 16.5px; left: 0px; width: 46px;" class="Opta-Table-Scroll-Fixed-Column">1</th><td class="Opta-Team Opta-Table-Scroll-Fixed-Column Opta-Table-Scroll-Fixed-Column-Last" style="height: 32.5px; line-height: 16.5px; left: 46px; width: 115px;">Man City</td><td style="height: 32.5px;" class="Opta-Table-Scroll-Scrolled-Column-First">22</td><td style="height: 32.5px;">15</td><td style="height: 32.5px;">5</td><td style="height: 32.5px;">2</td><td style="height: 32.5px;">29</td><td class="Opta-points" style="height: 32.5px;">50</td></tr><tr class="Opta-Team-1"><th style="height: 32.5px; line-height: 16.5px; left: 0px; width: 46px;" class="Opta-Table-Scroll-Fixed-Column">2</th><td class="Opta-Team Opta-Table-Scroll-Fixed-Column Opta-Table-Scroll-Fixed-Column-Last" style="height: 32.5px; line-height: 16.5px; left: 46px; width: 115px;">Man Utd</td><td style="height: 32.5px;" class="Opta-Table-Scroll-Scrolled-Column-First">23</td><td style="height: 32.5px;">13</td><td style="height: 32.5px;">6</td><td style="height: 32.5px;">4</td><td style="height: 32.5px;">19</td><td class="Opta-points" style="height: 32.5px;">45</td></tr><tr class="Opta-Team-13"><th style="height: 32.5px; line-height: 16.5px; left: 0px; width: 46px;" class="Opta-Table-Scroll-Fixed-Column">3</th><td class="Opta-Team Opta-Table-Scroll-Fixed-Column Opta-Table-Scroll-Fixed-Column-Last" style="height: 32.5px; line-height: 16.5px; left: 46px; width: 115px;">Leicester</td><td style="height: 32.5px;" class="Opta-Table-Scroll-Scrolled-Column-First">23</td><td style="height: 32.5px;">13</td><td style="height: 32.5px;">4</td><td style="height: 32.5px;">6</td><td style="height: 32.5px;">14</td><td class="Opta-points" style="height: 32.5px;">43</td></tr><tr class="Opta-Team-14 Opta-highlight"><th style="height: 32.5px; line-height: 16.5px; left: 0px; width: 46px;" class="Opta-Table-Scroll-Fixed-Column">4</th><td class="Opta-Team Opta-Table-Scroll-Fixed-Column Opta-Table-Scroll-Fixed-Column-Last" style="height: 32.5px; line-height: 16.5px; left: 46px; width: 115px;">Liverpool</td><td style="height: 32.5px;" class="Opta-Table-Scroll-Scrolled-Column-First">23</td><td style="height: 32.5px;">11</td><td style="height: 32.5px;">7</td><td style="height: 32.5px;">5</td><td style="height: 32.5px;">15</td><td class="Opta-points" style="height: 32.5px;">40</td></tr><tr class="Opta-Team-8"><th style="height: 32.5px; line-height: 16.5px; left: 0px; width: 46px;" class="Opta-Table-Scroll-Fixed-Column">5</th><td class="Opta-Team Opta-Table-Scroll-Fixed-Column Opta-Table-Scroll-Fixed-Column-Last" style="height: 32.5px; line-height: 16.5px; left: 46px; width: 115px;">Chelsea</td><td style="height: 32.5px;" class="Opta-Table-Scroll-Scrolled-Column-First">23</td><td style="height: 32.5px;">11</td><td style="height: 32.5px;">6</td><td style="height: 32.5px;">6</td><td style="height: 32.5px;">14</td><td class="Opta-points" style="height: 32.5px;">39</td></tr><tr class="Opta-Team-21"><th style="height: 32.5px; line-height: 16.5px; left: 0px; width: 46px;" class="Opta-Table-Scroll-Fixed-Column">6</th><td class="Opta-Team Opta-Table-Scroll-Fixed-Column Opta-Table-Scroll-Fixed-Column-Last" style="height: 32.5px; line-height: 16.5px; left: 46px; width: 115px;">West Ham</td><td style="height: 32.5px;" class="Opta-Table-Scroll-Scrolled-Column-First">23</td><td style="height: 32.5px;">11</td><td style="height: 32.5px;">6</td><td style="height: 32.5px;">6</td><td style="height: 32.5px;">6</td><td class="Opta-points" style="height: 32.5px;">39</td></tr><tr class="Opta-Team-11"><th style="height: 32.5px; line-height: 16.5px; left: 0px; width: 46px;" class="Opta-Table-Scroll-Fixed-Column">7</th><td class="Opta-Team Opta-Table-Scroll-Fixed-Column Opta-Table-Scroll-Fixed-Column-Last" style="height: 32.5px; line-height: 16.5px; left: 46px; width: 115px;">Everton</td><td style="height: 32.5px;" class="Opta-Table-Scroll-Scrolled-Column-First">21</td><td style="height: 32.5px;">11</td><td style="height: 32.5px;">4</td><td style="height: 32.5px;">6</td><td style="height: 32.5px;">6</td><td class="Opta-points" style="height: 32.5px;">37</td></tr><tr class="Opta-Team-6"><th style="height: 32.5px; line-height: 16.5px; left: 0px; width: 46px;" class="Opta-Table-Scroll-Fixed-Column">8</th><td class="Opta-Team Opta-Table-Scroll-Fixed-Column Opta-Table-Scroll-Fixed-Column-Last" style="height: 32.5px; line-height: 16.5px; left: 46px; width: 115px;">Tottenham</td><td style="height: 32.5px;" class="Opta-Table-Scroll-Scrolled-Column-First">22</td><td style="height: 32.5px;">10</td><td style="height: 32.5px;">6</td><td style="height: 32.5px;">6</td><td style="height: 32.5px;">14</td><td class="Opta-points" style="height: 32.5px;">36</td></tr><tr class="Opta-Team-7"><th style="height: 32.5px; line-height: 16.5px; left: 0px; width: 46px;" class="Opta-Table-Scroll-Fixed-Column">9</th><td class="Opta-Team Opta-Table-Scroll-Fixed-Column Opta-Table-Scroll-Fixed-Column-Last" style="height: 32.5px; line-height: 16.5px; left: 46px; width: 115px;">Aston Villa</td><td style="height: 32.5px;" class="Opta-Table-Scroll-Scrolled-Column-First">21</td><td style="height: 32.5px;">11</td><td style="height: 32.5px;">2</td><td style="height: 32.5px;">8</td><td style="height: 32.5px;">12</td><td class="Opta-points" style="height: 32.5px;">35</td></tr><tr class="Opta-Team-2"><th style="height: 32.5px; line-height: 16.5px; left: 0px; width: 46px;" class="Opta-Table-Scroll-Fixed-Column">10</th><td class="Opta-Team Opta-Table-Scroll-Fixed-Column Opta-Table-Scroll-Fixed-Column-Last" style="height: 32.5px; line-height: 16.5px; left: 46px; width: 115px;">Leeds</td><td style="height: 32.5px;" class="Opta-Table-Scroll-Scrolled-Column-First">22</td><td style="height: 32.5px;">10</td><td style="height: 32.5px;">2</td><td style="height: 32.5px;">10</td><td style="height: 32.5px;">0</td><td class="Opta-points" style="height: 32.5px;">32</td></tr><tr class="Opta-Team-3"><th style="height: 32.5px; line-height: 16.5px; left: 0px; width: 46px;" class="Opta-Table-Scroll-Fixed-Column">11</th><td class="Opta-Team Opta-Table-Scroll-Fixed-Column Opta-Table-Scroll-Fixed-Column-Last" style="height: 32.5px; line-height: 16.5px; left: 46px; width: 115px;">Arsenal</td><td style="height: 32.5px;" class="Opta-Table-Scroll-Scrolled-Column-First">23</td><td style="height: 32.5px;">9</td><td style="height: 32.5px;">4</td><td style="height: 32.5px;">10</td><td style="height: 32.5px;">4</td><td class="Opta-points" style="height: 32.5px;">31</td></tr><tr class="Opta-Team-20"><th style="height: 32.5px; line-height: 16.5px; left: 0px; width: 46px;" class="Opta-Table-Scroll-Fixed-Column">12</th><td class="Opta-Team Opta-Table-Scroll-Fixed-Column Opta-Table-Scroll-Fixed-Column-Last" style="height: 32.5px; line-height: 16.5px; left: 46px; width: 115px;">Southampton</td><td style="height: 32.5px;" class="Opta-Table-Scroll-Scrolled-Column-First">22</td><td style="height: 32.5px;">8</td><td style="height: 32.5px;">5</td><td style="height: 32.5px;">9</td><td style="height: 32.5px;">-8</td><td class="Opta-points" style="height: 32.5px;">29</td></tr><tr class="Opta-Team-31"><th style="height: 32.5px; line-height: 16.5px; left: 0px; width: 46px;" class="Opta-Table-Scroll-Fixed-Column">13</th><td class="Opta-Team Opta-Table-Scroll-Fixed-Column Opta-Table-Scroll-Fixed-Column-Last" style="height: 32.5px; line-height: 16.5px; left: 46px; width: 115px;">Crystal Palace</td><td style="height: 32.5px;" class="Opta-Table-Scroll-Scrolled-Column-First">23</td><td style="height: 32.5px;">8</td><td style="height: 32.5px;">5</td><td style="height: 32.5px;">10</td><td style="height: 32.5px;">-12</td><td class="Opta-points" style="height: 32.5px;">29</td></tr><tr class="Opta-Team-39"><th style="height: 32.5px; line-height: 16.5px; left: 0px; width: 46px;" class="Opta-Table-Scroll-Fixed-Column">14</th><td class="Opta-Team Opta-Table-Scroll-Fixed-Column Opta-Table-Scroll-Fixed-Column-Last" style="height: 32.5px; line-height: 16.5px; left: 46px; width: 115px;">Wolves</td><td style="height: 32.5px;" class="Opta-Table-Scroll-Scrolled-Column-First">23</td><td style="height: 32.5px;">7</td><td style="height: 32.5px;">6</td><td style="height: 32.5px;">10</td><td style="height: 32.5px;">-8</td><td class="Opta-points" style="height: 32.5px;">27</td></tr><tr class="Opta-Team-36"><th style="height: 32.5px; line-height: 16.5px; left: 0px; width: 46px;" class="Opta-Table-Scroll-Fixed-Column">15</th><td class="Opta-Team Opta-Table-Scroll-Fixed-Column Opta-Table-Scroll-Fixed-Column-Last" style="height: 32.5px; line-height: 16.5px; left: 46px; width: 115px;">Brighton</td><td style="height: 32.5px;" class="Opta-Table-Scroll-Scrolled-Column-First">23</td><td style="height: 32.5px;">5</td><td style="height: 32.5px;">10</td><td style="height: 32.5px;">8</td><td style="height: 32.5px;">-5</td><td class="Opta-points" style="height: 32.5px;">25</td></tr><tr class="Opta-Team-4"><th style="height: 32.5px; line-height: 16.5px; left: 0px; width: 46px;" class="Opta-Table-Scroll-Fixed-Column">16</th><td class="Opta-Team Opta-Table-Scroll-Fixed-Column Opta-Table-Scroll-Fixed-Column-Last" style="height: 32.5px; line-height: 16.5px; left: 46px; width: 115px;">Newcastle</td><td style="height: 32.5px;" class="Opta-Table-Scroll-Scrolled-Column-First">23</td><td style="height: 32.5px;">7</td><td style="height: 32.5px;">4</td><td style="height: 32.5px;">12</td><td style="height: 32.5px;">-13</td><td class="Opta-points" style="height: 32.5px;">25</td></tr><tr class="Opta-Team-90"><th style="height: 32.5px; line-height: 16.5px; left: 0px; width: 46px;" class="Opta-Table-Scroll-Fixed-Column">17</th><td class="Opta-Team Opta-Table-Scroll-Fixed-Column Opta-Table-Scroll-Fixed-Column-Last" style="height: 32.5px; line-height: 16.5px; left: 46px; width: 115px;">Burnley</td><td style="height: 32.5px;" class="Opta-Table-Scroll-Scrolled-Column-First">22</td><td style="height: 32.5px;">6</td><td style="height: 32.5px;">5</td><td style="height: 32.5px;">11</td><td style="height: 32.5px;">-15</td><td class="Opta-points" style="height: 32.5px;">23</td></tr><tr class="Opta-Team-54"><th style="height: 32.5px; line-height: 16.5px; left: 0px; width: 46px;" class="Opta-Table-Scroll-Fixed-Column">18</th><td class="Opta-Team Opta-Table-Scroll-Fixed-Column Opta-Table-Scroll-Fixed-Column-Last" style="height: 32.5px; line-height: 16.5px; left: 46px; width: 115px;">Fulham</td><td style="height: 32.5px;" class="Opta-Table-Scroll-Scrolled-Column-First">22</td><td style="height: 32.5px;">2</td><td style="height: 32.5px;">9</td><td style="height: 32.5px;">11</td><td style="height: 32.5px;">-14</td><td class="Opta-points" style="height: 32.5px;">15</td></tr><tr class="Opta-Team-35"><th style="height: 32.5px; line-height: 16.5px; left: 0px; width: 46px;" class="Opta-Table-Scroll-Fixed-Column">19</th><td class="Opta-Team Opta-Table-Scroll-Fixed-Column Opta-Table-Scroll-Fixed-Column-Last" style="height: 32.5px; line-height: 16.5px; left: 46px; width: 115px;">West Brom</td><td style="height: 32.5px;" class="Opta-Table-Scroll-Scrolled-Column-First">23</td><td style="height: 32.5px;">2</td><td style="height: 32.5px;">6</td><td style="height: 32.5px;">15</td><td style="height: 32.5px;">-36</td><td class="Opta-points" style="height: 32.5px;">12</td></tr><tr class="Opta-Team-49"><th style="height: 32.5px; line-height: 16.5px; left: 0px; width: 46px;" class="Opta-Table-Scroll-Fixed-Column">20</th><td class="Opta-Team Opta-Table-Scroll-Fixed-Column Opta-Table-Scroll-Fixed-Column-Last" style="height: 32.5px; line-height: 16.5px; left: 46px; width: 115px;">Sheff Utd</td><td style="height: 32.5px;" class="Opta-Table-Scroll-Scrolled-Column-First">23</td><td style="height: 32.5px;">3</td><td style="height: 32.5px;">2</td><td style="height: 32.5px;">18</td><td style="height: 32.5px;">-22</td><td class="Opta-points" style="height: 32.5px;">11</td></tr></tbody></table></div></div></div>
      <div class="Opta-Tooltip " style="display: none;"><span></span><div></div></div></div></div>

    
</section>
</div>

                
    </div>
</div>


                            <div class="rightAd">
                <div id="div-gpt-ad-RES_MAIN_RIGHT_TWO">
<script>
     Lfc.gtmAdQueue.push('div-gpt-ad-RES_MAIN_RIGHT_TWO');
</script> 
</div>

            </div>
        
    </div>


        </div>

        
    </div>

    
        <footer id="page-footer">
    <div class="upperBackground"> 
<section class="partners">

    
    
    <div class="Primary">

        
            <a href="http://www.standardchartered.com/home/en/index.html?camp_id=liverpool_source=liverpoolfctv_medium=4" title="Standard Chartered" target="_blank">

                
                                        <img src="https://d3j2s6hdd6a7rg.cloudfront.net/v2/uploads/media/partnerlogo/0001/16/thumb_15152_partnerlogo_partner_footer.png" alt="Standard Chartered">

                
            </a>

        
            <a href="https://www.nike.com/gb/" title="Nike" target="_blank">

                
                                        <img src="https://d3j2s6hdd6a7rg.cloudfront.net/v2/uploads/media/partnerlogo/0002/09/thumb_108617_partnerlogo_partner_footer.png" alt="Nike">

                
            </a>

        
            <a href="https://www.axa.com/?utm_source=liverpoolfc&amp;utm_medium=logo-partnership&amp;utm_campaign=lfc1819season" title="AXA" target="_blank">

                
                                        <img src="https://d3j2s6hdd6a7rg.cloudfront.net/v2/uploads/media/partnerlogo/0001/74/thumb_73714_partnerlogo_partner_footer.png" alt="AXA">

                
            </a>

        
            <a href="https://www.expedia.co.uk/" title="Expedia" target="_blank">

                
                                        <img src="https://d3j2s6hdd6a7rg.cloudfront.net/v2/uploads/media/partnerlogo/0002/13/thumb_112272_partnerlogo_partner_footer.png" alt="Expedia">

                
            </a>

        
        </div>

    
    <div class="Secondary">

        
            <a href="http://www.carlsberg.com/" title="Carlsberg" target="_blank">

                
                                        <img src="https://d3j2s6hdd6a7rg.cloudfront.net/v2/uploads/media/partnerlogo/0001/92/thumb_91236_partnerlogo_partner_footer.png" alt="Carlsberg">

                
            </a>

        
            <a href="https://www.tourism-mauritius.mu" title="Mauritius" target="_blank">

                
                                        <img src="https://d3j2s6hdd6a7rg.cloudfront.net/v2/uploads/media/partnerlogo/0002/18/thumb_117132_partnerlogo_partner_footer.png" alt="Mauritius">

                
            </a>

        
            <a href="https://www.liverpoolfc.com/match/2020-21/first-team/fixtures-and-results" title="1xBET" target="_blank">

                
                                        <img src="https://d3j2s6hdd6a7rg.cloudfront.net/v2/uploads/media/partnerlogo/0001/90/thumb_89785_partnerlogo_partner_footer.png" alt="1xBET">

                
            </a>

        
            <a href="https://mgcars.com" title="MG Thailand" target="_blank">

                
                                        <img src="https://d3j2s6hdd6a7rg.cloudfront.net/v2/uploads/media/partnerlogo/0001/92/thumb_91232_partnerlogo_partner_footer.png" alt="MG Thailand">

                
            </a>

        
            <a href="https://www.hollyfrontier.com/home/default.aspx" title="Holly Frontier" target="_blank">

                
                                        <img src="https://d3j2s6hdd6a7rg.cloudfront.net/v2/uploads/media/partnerlogo/0002/11/thumb_110194_partnerlogo_partner_footer.png" alt="Holly Frontier">

                
            </a>

        
            <a href="https://uk.tigerwit.com/about/liverpool" title="TigerWit" target="_blank">

                
                                        <img src="https://d3j2s6hdd6a7rg.cloudfront.net/v2/uploads/media/partnerlogo/0001/73/thumb_72810_partnerlogo_partner_footer.png" alt="TigerWit">

                
            </a>

        
            <a href="https://tribus-watches.com/" title="Tribus" target="_blank">

                
                                        <img src="https://d3j2s6hdd6a7rg.cloudfront.net/v2/uploads/media/partnerlogo/0002/13/thumb_112227_partnerlogo_partner_footer.png" alt="Tribus">

                
            </a>

        
            <a href="https://www.easports.com/" title="EA Sports" target="_blank">

                
                                        <img src="https://d3j2s6hdd6a7rg.cloudfront.net/v2/uploads/media/partnerlogo/0002/08/thumb_107697_partnerlogo_partner_footer.png" alt="EA Sports">

                
            </a>

        
            <a href="https://www.quorn.com/" title="Quorn" target="_blank">

                
                                        <img src="https://d3j2s6hdd6a7rg.cloudfront.net/v2/uploads/media/partnerlogo/0002/08/thumb_107008_partnerlogo_partner_footer.png" alt="Quorn">

                
            </a>

        
            <a href="https://www.mondelezinternational.com/" title="Cadbury ROW" target="_blank">

                
                                        <img src="https://d3j2s6hdd6a7rg.cloudfront.net/v2/uploads/media/partnerlogo/0002/17/thumb_116415_partnerlogo_partner_footer.jpeg" alt="Cadbury ROW">

                
            </a>

        
            <a href="https://www.acronis.com/en-gb/" title="Acronis" target="_blank">

                
                                        <img src="https://d3j2s6hdd6a7rg.cloudfront.net/v2/uploads/media/partnerlogo/0002/02/thumb_101725_partnerlogo_partner_footer.png" alt="Acronis">

                
            </a>

        
            <a href="https://www.nipponham.co.jp/eng/" title="NH Foods" target="_blank">

                
                                        <img src="https://d3j2s6hdd6a7rg.cloudfront.net/v2/uploads/media/partnerlogo/0001/86/thumb_85085_partnerlogo_partner_footer.png" alt="NH Foods">

                
            </a>

        
            <a href="https://uk.joiebaby.com/liverpoolfc/" title="Joie Baby" target="_blank">

                
                                        <img src="https://d3j2s6hdd6a7rg.cloudfront.net/v2/uploads/media/partnerlogo/0001/41/thumb_40979_partnerlogo_partner_footer.png" alt="Joie Baby">

                
            </a>

        
            <a href="https://www.mitel.com/learn/case-studies/liverpool-football-club" title="Mitel" target="_blank">

                
                                        <img src="https://d3j2s6hdd6a7rg.cloudfront.net/v2/uploads/media/partnerlogo/0001/78/thumb_77004_partnerlogo_partner_footer.png" alt="Mitel">

                
            </a>

        
        </div>

    


</section>
</div>
    <div class="lowerBackground">
<section class="bottomFooter">

    <div class="footerCrest">
    </div>

    <div class="footerCrestLeft">
    </div>

    <div class="footerText">

                                                                                                                                        

        <div class="footer-middleBottom">
            <a title="Go to Privacy Policy" href="http://www.liverpoolfc.com/legal/privacy-policy">Privacy Policy</a> <span>|</span>
            <a title="Go to Terms and Conditions" href="http://www.liverpoolfc.com/legal/terms-and-conditions">Terms and Conditions</a> <span>|</span>
            <a title="Go to Anti-Slavery" href="http://www.liverpoolfc.com/corporate/anti-slavery">Anti-Slavery</a> <span>|</span>
            <a title="Go to Cookies" href="http://www.liverpoolfc.com/legal/cookies">Cookies</a> <span>|</span>
            <a title="Go to Help" href="https://faq.liverpoolfc.com/portal/home">Help</a> <span>|</span>
            <a title="Go to Browser Support" href="http://www.liverpoolfc.com/corporate/browser-support">Browser Support</a> <span>|</span>
            <a title="Go to RSS Feeds" href="http://www.liverpoolfc.com/corporate/rss-feeds">RSS Feeds</a> <span>|</span>
            <a title="Go to Contact Us" href="http://www.liverpoolfc.com/contactus">Contact Us</a> <span>|</span>
            <a title="Go to Accessibility" href="http://www.liverpoolfc.com/accessible/accessible">Accessibility</a> <br>
        </div>

        <div class="footer-left">
            © Copyright 2021 The Liverpool Football Club and Athletic Grounds Limited. All rights reserved.
        </div>

        <div class="footer-right">
            Developed and maintained by the LFC Technology and Transformation Team
        </div>

        <div class="footer-middle">
            Match Statistics supplied by Opta Sports Data Limited. Reproduced under licence from Football DataCo Limited. All rights reserved.
        </div>

    </div>

</section></div>


</footer></div>


    



        
            <script src="https://d3j2s6hdd6a7rg.cloudfront.net/v2/JE-552/lfc/js/scripts.min.js"></script>
    
        <script src="https://secure.widget.cloud.opta.net/v3/v3.opta-widgets.js"></script>

        <script>
            var opta_settings = {
                   subscription_id: 'da747e372c352a82f3dd6174084858fd',
                   language: 'en_GB',
                   timezone: 'Europe/London',
                   opta_tracking: false
            };
        </script>

                                                                                                 <style>
                            .team-player-list-item .name > span {
width:40px;
}
                        </style>
                                                                    
                
                    

        <!-- monitoring:3e9fda56df2cdd3b039f189693ab7844fbb2d4f6 -->
    

<div id="cboxOverlay" style="display: none;"></div><div id="colorbox" class="" role="dialog" tabindex="-1" style="display: none;"><div id="cboxWrapper"><div><div id="cboxTopLeft" style="float: left;"></div><div id="cboxTopCenter" style="float: left;"></div><div id="cboxTopRight" style="float: left;"></div></div><div style="clear: left;"><div id="cboxMiddleLeft" style="float: left;"></div><div id="cboxContent" style="float: left;"><div id="cboxTitle" style="float: left;"></div><div id="cboxCurrent" style="float: left;"></div><button type="button" id="cboxPrevious"></button><button type="button" id="cboxNext"></button><button id="cboxSlideshow"></button><div id="cboxLoadingOverlay" style="float: left;"></div><div id="cboxLoadingGraphic" style="float: left;"></div></div><div id="cboxMiddleRight" style="float: left;"></div></div><div style="clear: left;"><div id="cboxBottomLeft" style="float: left;"></div><div id="cboxBottomCenter" style="float: left;"></div><div id="cboxBottomRight" style="float: left;"></div></div></div><div style="position: absolute; width: 9999px; visibility: hidden; display: none; max-width: none;"></div></div><div class="bottom-overlay" style=""><div class="cookie-message-wrapper"><p>This site uses cookies. By continuing to browse the site you are consenting to their use. <a href="http://www.liverpoolfc.com/legal/cookies" target="_blank">View cookie policy.</a></p><a href="javascript:void(0);" class="close">ACCEPT &amp; CLOSE</a></div></div>
<script type="text/javascript" id="">!function(b,e,f,g,a,c,d){b.fbq||(a=b.fbq=function(){a.callMethod?a.callMethod.apply(a,arguments):a.queue.push(arguments)},b._fbq||(b._fbq=a),a.push=a,a.loaded=!0,a.version="2.0",a.queue=[],c=e.createElement(f),c.async=!0,c.src=g,d=e.getElementsByTagName(f)[0],d.parentNode.insertBefore(c,d))}(window,document,"script","https://connect.facebook.net/en_US/fbevents.js");fbq("init","1907936396159657");fbq("track","PageView");</script>
<noscript><img height="1" width="1" style="display:none" src="https://www.facebook.com/tr?id=519042908232423&amp;ev=PageView&amp;noscript=1"></noscript>


<meta name="com.silverpop.brandeddomains" content="www.pages04.net,bookings.liverpoolfc.com,cnstore.liverpoolfc.com,content.liverpoolfc.com,forums.liverpoolfc.com,foundation.liverpoolfc.com,hospitality.liverpoolfc.com,hospitalitydugout.liverpoolfc.com,hospitalitypremium.liverpoolfc.com,lfcbootroom.com,lfcbootroom.tv,lfclow-live.bitmachine.co.uk,lfcofflicence.com,lfcofflicence.tv,lfcpicturestore.com,lfcpicturestore.tv,liverpool-dev.bitmachine.co.uk,liverpoolfantasymanager.com,liverpoolfc.com,liverpoolfc.mkt5270.com,liverpoolladiesfc.com,nesn.com,programmemaster.com,store.liverpoolfc.com,store.liverpoolfc.tv,thekop.liverpoolfc.com,tickets.liverpoolfc.com,www.hospitalitydugout.liverpoolfc.com,www.hospitalitypremium.liverpoolfc.com,www.liverpool-dev.bitmachine.co.uk,www.hospitalitydugout.liverpoolfc.com">

<script type="text/javascript" id="" src="https://www.sc.pages04.net/lp/static/js/iMAWebCookie.js?7bfe307e-13abc0179a2-b72427ac28f4177bd55290ce12678282&amp;h=www.pages04.net"></script>
<script type="text/javascript" id="">(function(){var a=document.createElement("script"),b="302220474411";a.type="text/javascript";a.async=!0;a.src="//app.meetami.ai/launchpad.php?c\x3d"+b;b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b)})();</script>





	<meta name="referrer" content="no-referrer-when-downgrade">
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">			<title>Chat to the Liverpool Footbal Club team</title>
	


	
			<script type="text/javascript">
			console.log = function() {}
		</script>
	
	<style type="text/css">

		/* Font import */
		/* @import 'https://fonts.googleapis.com/css?family=Lato'; */
		/* latin-ext */
		@font-face {
			font-family: 'Lato';
			font-style: normal;
			font-weight: 400;
			src: local('Lato Regular'), local('Lato-Regular'), url('//app.meetami.ai/fonts/S6uyw4BMUTPHjxAwXjeu.woff2') format('woff2');
			unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
		}
		/* latin */
		@font-face {
			font-family: 'Lato';
			font-style: normal;
			font-weight: 400;
			src: local('Lato Regular'), local('Lato-Regular'), url('//app.meetami.ai/fonts/S6uyw4BMUTPHjx4wXg.woff2') format('woff2');
			unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
		}
		* { outline: none; }

		/* Generic styles for both chatters */

#srContent {
	display: none;
	font-size: 13px;
	line-height: 1.2em;
	font-family: 'Lato', sans-serif !important;
	color: #444 !important;
	letter-spacing: 0 !important;
	font-weight: 300;
	z-index: 1000001;
	width: 340px;
	background: #fff;
	position: fixed;
	-webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box;
	border: 1px solid #e9e6e6;
	bottom: 0;
	box-shadow: none !important;
}
#srContent p, #srContent #srMsgs p { display: block; text-align: left; color: #444 !important; line-height: 1.2em; font-size: 13px; font-family: 'Lato', sans-serif !important; }
#srContent a { outline: none; color: #444 !important; }
	#srContent a { color: #fff !important; }
#srLaunchContainer { z-index: 1000000 !important; position: fixed; outline: none; right: 49px !important; bottom: 20px !important; display: block; text-align: center; vertical-align: center; height: 72px; min-width: 72px; -moz-border-radius: 50%; -webkit-border-radius: 50%; border-radius: 50%; }
	#srContent #srMsgs::-webkit-scrollbar {
		width: 5px;
	}

	/* Track */
	#srContent #srMsgs::-webkit-scrollbar-track {
		box-shadow: inset 0 0 0px grey !important ;
		border-radius: 0px;
	}

	/* Handle */
	#srContent #srMsgs::-webkit-scrollbar-thumb {
		background:rgba(138,138,138,0.1) !important ;
		border-radius: 1px;
	}

	/* Handle on hover */
	#srContent #srMsgs::-webkit-scrollbar-thumb:hover {
		background:rgba(138,138,138,0.5) !important ;
	}

#callbackLaunchContainer { z-index: 1000000 !important; position: fixed; outline: none; left: 49px !important; bottom: 20px !important; display: block; text-align: center; vertical-align: center; height: 72px; min-width: 72px; -moz-border-radius: 50%; -webkit-border-radius: 50%; border-radius: 50%; }

	#srLaunchContainer { display: none !important; }
a#srLaunch, a#srLaunchPhone {
	background: #d7061b;
	-moz-box-shadow: 2px 2px 7px rgba(68,68,68,0.25); -webkit-box-shadow: 2px 2px 7px rgba(68,68,68,0.25); box-shadow: 2px 2px 7px rgba(68,68,68,0.25);
	display:block;
	width: 72px;
	height: 72px;
	z-index: 1;
	position: absolute;
	right: 0px;
	bottom: 0px;
	-webkit-border-radius: 50%;
	-moz-border-radius: 50%;
	border-radius: 50%;
	font-family: 'Lato', sans-serif !important;
}
a#srLaunch.client { padding: 0; background: none; bottom: 20px; -moz-box-shadow: none; -webkit-box-shadow: none; box-shadow: none; outline: none !important; }
a#srLaunch.client { padding: 0; background: none; bottom: 20px; -moz-box-shadow: none; -webkit-box-shadow: none; box-shadow: none; outline: none !important; }
#srLaunch img { display: inline; height: 42px; width: 42px; margin: 15px auto; padding: 0; }
#srLaunch.client img { width: 72px; height: 72px; max-width: 100%; max-height: 100%; }

#srLaunchPhone img { display: block; height: 40px; width: 40px; padding: 0; margin: 14px auto; }

#srLaunchContainer .srBadge {
	position: fixed;
	z-index: 2;
	right: 54px;
	bottom: 73px;
	width: 17px;
	height: 17px;
	background: #404040;
	-moz-border-radius: 50%;
	-webkit-border-radius: 50%;
	border-radius: 50%;
	-moz-box-shadow: 2px 2px 7px rgba(68,68,68,0.25);
	color: #3b3b3b;
	font-size: 9px;
	line-height: 18px;
	display: none;
	font-family: 'Lato', sans-serif !important;
}

#srLaunchContainer #srPreviewMessage {
	margin-top: 6px;
	margin-right: -19px;
	width: 280px;
	text-align: center;
	background: #f2f2f2;
	position:absolute;
	right: 70px;
	padding: 14px 0;
	cursor: pointer;
	-webkit-box-shadow: 0 1px 2px 0px rgba(0,0,0,0.0.25);
	-moz-box-shadow: 0 1px 2px 0px rgba(0,0,0,0.25);
	box-shadow: 0 1px 2px 0px rgba(0,0,0,0.25);
}

.srPreviewMessageContent {
	float: left;
	width: 100%;
}

#srPreviewMessage p:after, #srPreviewMessage p:before {
	right: 100%;
	top: 50%;
	border: solid transparent;
	content: " ";
	height: 0;
	width: 0;
	position: absolute;
	pointer-events: none;
}

#srPreviewMessage p:after {
	border-color: rgba(136, 183, 213, 0);
	border-right-color: #f7f7f7;
	border-width: 5px;
	margin-top: -5px;
}
#srPreviewMessage p:before {
	border-color: rgba(194, 225, 245, 0);
	border-right-color: #ddd;
	border-width: 6px;
	margin-top: -6px;
}

#srPreviewMessage .avatar-preview {
	float:left;
	width: 25px;
	height: 25px;
	margin-left: 6px;
	margin-top: 3px;
	background: #d7061b;
	-webkit-box-shadow: 2px 2px 3px 0px rgba(68,68,68,0.3);
	-moz-box-shadow: 2px 2px 3px 0px rgba(68,68,68,0.3);
	box-shadow: 1px 1px 3px 0px rgba(68,68,68,0.2);
	-webkit-border-radius: 50%;
	-moz-border-radius: 50%;
	border-radius: 50%;
}

#srPreviewMessage .avatar-preview.avatar-default {
	margin-top: 2px;
	margin-left: 2px;
	-webkit-box-shadow: none;
	-moz-box-shadow: none;
	box-shadow: none;
	-webkit-border-radius: 50%;
	-moz-border-radius: 50%;
	border-radius: 50%;
}

#srPreviewMessage .avatar-preview img {
	width: 23px;
	height: 23px;
	-webkit-border-radius: 50%;
	-moz-border-radius: 50%;
	border-radius: 50%;
	margin-top: 1px;
	margin-left: 0;
}
#srPreviewMessage .avatar-preview.avatar-default img {
	margin-top: -2px;
	margin-left: -2px;
}

#srPreviewMessage .avatar-preview.avatar-default img {
	width: 37px;
	height: 35px;
	max-width: 37px;
}

#srLaunchContainer #srPreviewMessage p {
	position:relative;
	display: table-cell;
	vertical-align: middle;
	text-align: left;
	margin-left: 39px;
	left: 13px;
	font-size: 11px;
	text-align: left;
	height: 29px;
	width: 180px;
	background: #f7f7f7;
	border: 1px solid #ddd;
	margin: 0 auto;
	font-family: "Lato",sans-serif;
	padding: 2px 8px;
	line-height: 1.2em;
}

	a#srLaunch { display: none !important; }

#srContent h4 { background: #fff; color: #444 !important; font-family: 'Lato', sans-serif !important; margin: 0 0 10px 0; line-height: 1em; letter-spacing: 0; text-transform: none; font-weight: 500; font-size: 17px; padding: 12px !important; border-bottom: 1px solid #e9e6e6; }
#srContent h4 span#srIcon { height: 23px; width: 26px; margin-right: 20px; display: block !important; float: left; background: #d7061b; }
#srContent h4 span#srIcon img { width: 100%; height: 100%; }
#srContent h4 span#srMenu { float: right; display: block; margin-right: 0!important; }
#srContent h4 span#srMenu a { display: inline-block; width: 25px; height: 25px; margin-top: -4px; margin-left: 6px; background-position: center !important; background-repeat: no-repeat !important; }
#srContent h4 span#srMenu a.srClose { background-image: url('//app.meetami.ai/img/widget/close.png'); }
#srContent h4 span#srMenu a#srMin { background: url('//app.meetami.ai/img/widget/minimise.png') no-repeat; }

#srContent #srMsgs span p.srIntro, #srContent #srMsgs span p.srIntroPos { padding: 0; box-shadow: none; width: auto; margin-left: 60px; font-size: 14px; font-style: italic; border: none; background: none; }
#srContent #srMsgs span p.srIntro { margin-top: 0; padding-top:5px; margin-bottom: 6px; font-weight: 400; font-style: normal; }
#srContent #srMsgs span p.srIntroPos { margin-top: 0; font-weight: 300; margin-bottom: 20px; }
#srContent #srMsgs span p.srIntro:before, #srContent #srMsgs span p.srIntroPos:before, #srContent #srMsgs span p.srIntro:after, #srContent #srMsgs span p.srIntroPos:after { content: none; }

#srContent #srChatter {  }

#srContent #srChatter #srMsgs { overflow: auto; min-height: 150px; max-height: 342px; padding: 0 12px 10px 12px; }
#srContent #srChatter #srMsgs img.loading { margin: 25px auto; display: block; width: 40%; }
#srContent #srChatter img.loading-mini { margin: auto; height: 60px; }

#srContent #srMsgs > span { display: block; overflow: visible; margin-bottom: 12px; }
#srContent #srMsgs > span > span { background: #d7061b; margin-top: 2px; float: left; -moz-box-shadow: 2px 2px 5px 1px rgba(68,68,68,0.2); -webkit-box-shadow: 2px 2px 5px rgba(68,68,68,0.2); box-shadow: 2px 2px 5px rgba(68,68,68,0.2);-webkit-border-radius: 50%; -moz-border-radius: 50%; border-radius: 50%; border: 2px solid #d7061b; width: 52px; height: 52px; display: block; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; }
#srContent #srMsgs > span > span img { margin: 0 !important; padding: 0 !important; border: 0 !important; -webkit-border-radius: 50%; -moz-border-radius: 50%; border-radius: 50%; width: 48px; height: 48px; }
	#srContent #srMsgs > span > span { background: none; -moz-box-shadow: none; -webkit-box-shadow: none; box-shadow: none;-webkit-border-radius: 0; -moz-border-radius: 0; border-radius: 0; border: 0; }
	#srContent #srMsgs > span > span img { -webkit-border-radius: 0; -moz-border-radius: 0; border-radius: 0; }

/* Speech bubbles */
#srContent #srMsgs > p { position: relative; word-wrap: break-word; -moz-border-radius: 10px 10px 2px 10px; -webkit-border-radius: 10px 10px 2px 10px; border-radius: 10px 10px 2px 10px; padding: 5px 8px; margin: 0 9px 5px auto; width: 271px; background: #404759 !important; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; text-align: left; font-weight: normal; color: #ffffff !important; line-height: 1.3em; }
#srContent #srMsgs > p.agent { -moz-border-radius: 12px 12px 12px 2px; -webkit-border-radius: 10px 10px 10px 2px; padding: 5px 8px; margin: 0 auto 5px 9px; background: #d70015 !important; width: 271px; }
#srContent #srMsgs p.inc-avatar span.avatar-mini { display: none; width: 25px; height: 25px; position: absolute; top: 5px; left: -44px; background: #d7061b; -webkit-box-shadow: 2px 2px 3px 0px rgba(68,68,68,0.3); -moz-box-shadow: 2px 2px 3px 0px rgba(68,68,68,0.3); box-shadow: 1px 1px 3px 0px rgba(68,68,68,0.2); -webkit-border-radius: 50%; -moz-border-radius: 50%; border-radius: 50%; }
#srContent #srMsgs p.inc-avatar span.avatar-mini img { position: relative; width: 92%; height: 92%; margin: 4%; -webkit-border-radius: 50%; -moz-border-radius: 50%; border-radius: 50%; }

#srContent #srMsgs > p.agent.sr-response-link {background: #e85353!important;}
#srContent #srMsgs > p.agent.sr-response-link a {
	background: url('data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJhbWlMbmtDaGV2U3ZnIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIKCSB2aWV3Qm94PSIwIDAgMTUuOSAyOC4yIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAxNS45IDI4LjI7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4KPHN0eWxlIHR5cGU9InRleHQvY3NzIj4KCS5zdDB7ZmlsbDojNTQ1NDU0O30KCSNhbWlMbmtDaGV2IHsgZmlsbDojZmZmZmZmICFpbXBvcnRhbnQ7IH0KCjwvc3R5bGU+CjxwYXRoIGNsYXNzPSJzdDAiIGlkPSJhbWlMbmtDaGV2IiBkPSJNMTQuMSwxNS40Yy0wLjcsMC43LTEyLDEyLTEyLDEyTDAuNywyNmwxMi0xMkwwLjcsMi4xbDEuNC0xLjRjMCwwLDEwLjksMTAuOSwxMiwxMS45UzE1LjIsMTQuMywxNC4xLDE1LjR6Ii8+Cjwvc3ZnPgo=') right center / 6px auto no-repeat !important;
	display: inline-block;
	cursor: pointer;
	text-decoration: none;
	width: 100%;
	color:#ffffff!important; }

#srContent #srMsgs > p span { margin-bottom: 2px; display: block; font-weight: bold; }
#srContent #srMsgs p#srFaded, #srContent #srMsgs p.feint { text-align: center; border-radius: 2px; -webkit-box-shadow: none; -moz-box-shadow: none; box-shadow: none; padding: 8px 12px; margin: 12px auto; width: 95%; background: none; font-style: italic; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; }
#srContent #srMsgs p#srFaded:before, #srContent #srMsgs p.feint:before, #srContent #srMsgs p#srFaded:after, #srContent #srMsgs p.feint:after, #srContent #srMsgs p.inc-avatar:before { content: none; }

#srContent #srMsgs > p a.lnk_btn { display: table; cursor: pointer; margin: 10px auto 5px auto; text-decoration: none; padding: 4px 15px; color: #fff; background: #d7061b; -webkit-box-shadow: 2px 2px 5px 1px rgba(68,68,68,0.3); -moz-box-shadow: 2px 2px 5px 1px rgba(68,68,68,0.3); box-shadow: 2px 2px 5px 1px rgba(68,68,68,0.3); }

#srContent #srMsgs span:empty, #srContent #srMsgs p:empty { display: none; }

#srContent #dcErr { width: 100%; padding: 8px 12px; background: rgba(0,0,0,0.25); box-sizing: border-box; }
#srContent #dcErr p {padding: 0; margin: 4px 0; color: #fff !important; text-align: center; }

/* Green bubbles */
/* -webkit-box-shadow: 2px 2px 5px 1px rgba(68,68,68,0.3); -moz-box-shadow: 2px 2px 5px 1px rgba(68,68,68,0.3); box-shadow: 2px 2px 5px 1px rgba(68,68,68,0.3); */
#srContent #srChatter #srMsgs .srEndChat { position: relative; padding: 10px 8px 10px 52px; margin: 12px 9px; background: #78e254; /*border: 1px solid #50ba2c;*/ color: #3b3b3b; -moz-border-radius: 12px; -webkit-border-radius: 12px; border-radius: 12px; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; }
#srContent #srChatter #srMsgs .srEndChat.phone { position: relative; background-image: url('//app.meetami.ai/img/widget/phone.svg'); background-size: 26px auto; background-repeat: no-repeat; background-position: 12px center; }
#srContent #srChatter #srMsgs .srEndChat.mail { background-image: url('//app.meetami.ai/img/widget/mail.png'); background-repeat: no-repeat; background-position: 12px center; }
#srContent #srChatter #srMsgs .srEndChat.chat { background-image: url('//app.meetami.ai/img/widget/chat.png'); background-repeat: no-repeat; background-position: 12px center; }
#srContent #srChatter #srMsgs .srEndChat.positive, #srContent #srChatter #srMsgs .srDPQuestion.positive  { padding: 10px 8px 10px 52px; background-image: url('//app.meetami.ai/img/widget/tick-grn.svg'); background-size: 26px 26px; background-repeat: no-repeat; background-position: 12px center; }
#srContent #srChatter #srMsgs .srEndChat p { margin: 5px 0; padding: 0; position: relative; top: 0; color: #3b3b3b !important; }
#srContent #srChatter #srMsgs .srEndChat p a { color: #3b3b3b !important; text-decoration: underline; }
#srContent #srChatter #srMsgs .srEndChat p a:hover { text-decoration: none; }
#srContent #srChatter #srMsgs .srEndChat > a#srSpecifyTimeBtn, #srContent #srChatter #srMsgs .srEndChat p a#srEndChatBtn { display: inline-block; padding: 5px 12px; margin-top: 10px; background: #fff; color: #78e254;-webkit-box-shadow: 2px 2px 5px 1px rgba(68,68,68,0.2); -moz-box-shadow: 2px 2px 5px 1px rgba(68,68,68,0.2); box-shadow: 2px 2px 5px 1px rgba(68,68,68,0.2); }
#srContent #srChatter #srMsgs .srEndChat #srSelectTime { font-size: 12px; width: 70px; color: #444; padding: 3px 5px; margin-left: 8px; display: inline-block; }

#srContent #srChatter #srMsgs .srDPQuestion { padding: 7px 8px 7px 52px; margin: 0 9px 8px 9px; background: #e90914 url('//app.meetami.ai/img/widget/question-circle.svg') left 12px center / 26px 26px no-repeat; color: #ffffff; -moz-border-radius: 12px; -webkit-border-radius: 12px; border-radius: 12px; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; }
#srContent #srChatter #srMsgs .srDPQuestion.end { background-color: #78e254; }
/*#srContent #srChatter #srMsgs .srDPQuestion.info { background-image: url('//app.meetami.ai/img/widget/chat.png'); background-repeat: no-repeat; background-position: 12px center; }*/
#srContent #srChatter #srMsgs .srDPQuestion p { margin: 0; color: #ffffff !important; }
#srContent #srChatter #srMsgs .srDPQuestion.end p { color: #3b3b3b !important; }
#srContent #srChatter .success-color { background: #78e254; }


#srContent a.srViewMoreLink { font-size: 11px; display: table-cell; clear: both; text-decoration: underline; padding-top: 5px; padding-right: 18px; background: url('//app.meetami.ai/img/core/lnk-thru.svg') right bottom / auto 14px no-repeat; max-width: 78px; color: #007bff !important; }
#srContent a.srViewMoreLink:hover { text-decoration: none; }
	#srContent a.srViewMoreLink {
		background: url('//app.meetami.ai/img/core/lnk-thru-lght.svg') right bottom / auto 14px no-repeat;
		color: #d9d9ef !important;
	}
#srContent a.srViewMoreLink.srViewMoreLinkFullWidth {display:unset}

/* Form */

#srContent #srChatter #srChatForm .input.text input { height: auto; }
#srContent #srChatter #srChatForm { width: 100%; box-sizing: border-box; margin: 0; padding: 0 12px; display: block }
#srContent #srChatter #srChatForm #srInputs .name-container, #srContent #srChatter #srChatForm #srInputs .srTopField { border-top: 1px solid #ddd; padding-top: 5px; }
#srContent #srInputs .first-name-container, #srContent #srInputs .title-container { float: right; width: 77%; }
#srContent #srInputs .title-container { float: left; width: 20%; }
#srContent #srInputs { padding: 5px 0; margin-top: 10px; position: relative; }
#srContent #srInputs.text-center { text-align: center; }
#srContent #srInputs label { font-weight: normal; color: #bbb; font-size: 13px; }
#feedback-callback-form label, #srContent #srInputs .text label, #srCover .srCoverContent .textarea label, #srCoverRecovery .srCoverContentRecovery .textarea label { display: block; color: #bbb; margin-bottom: 2px; }
#srCover .srCoverContent .textarea label, #srCoverRecovery .srCoverContentRecovery .textarea label { text-align: center; }
#feedback-callback-form input[type="text"],.callbackForm input[type="text"], .callbackForm select, #feedback-callback-form input[type="email"], #feedback-callback-form input[type="tel"], #srCover .srCoverContent textarea#rlMsg, #srCoverRecovery .srCoverContentRecovery textarea#srchMsg, #srCover .srCoverContent .textarea textarea, #srCover .srCoverContent .textarea textarea, #srCover .srCoverContent .text input, #srCover .srCoverContent .email input, #srCover .srCoverContent .tel input, #srCoverRecovery .srCoverContentRecovery .text input, #srCoverRecovery .srCoverContentRecovery .email input, #srCoverRecovery .srCoverContentRecovery .tel input, #srContent #srInputs .textarea textarea, #srContent #srFeedback .textarea textarea, #srContent #srInputs .text input, #srContent #srInputs .email input { text-transform: none !important;margin-bottom: 4px; font-family: 'Lato', sans-serif; font-size: 13px; line-height: 13px; height: 32px; border-radius: 2px; display: block; border: 0; width: 100%; padding: 8px 14px !important; color: #444 !important; background: #fff !important; -webkit-box-sizing: border-box;‌​ -moz-box-sizing: border-box; box-sizing: border-box; -moz-box-shadow: 0 0 0 1px rgba(68,68,68,0.2); -webkit-box-shadow: 0 0 0 1px rgba(68,68,68,0.2) !important; box-shadow: 0 0 0 1px rgba(68,68,68,0.2) !important; }
#srContent #srInputs .text input, #srContent #srInputs .email input { padding: 6px 10px !important; }
#srContent #srInputs .textarea textarea { width: 100%; margin: 0; min-height: 0; outline: none !important; }
#srContent #srInputs .textarea textarea#amessage { width: 100%; margin-left: 0%; }
#srCover .srCoverContent .text input, #srCover .srCoverContent .email input, #srCover .srCoverContent .tel input, #srCoverRecovery .srCoverContentRecovery .text input, #srCoverRecovery .srCoverContentRecovery .email input, #srCoverRecovery .srCoverContentRecovery .tel input { margin-bottom: 5px; text-transform: none !important; }
#srContent #srInputs .textarea textarea, #srContent #srFeedback .textarea textarea, #srCover .srCoverContent textarea#rlMsg, #srCoverRecovery .srCoverContentRecovery textarea#srchMsg { height: 65px; resize: none; }
#srContent #srInputs .dp-yes, #srContent #srInputs .dp-no, #srContent #srInputs input[type=submit], #srContent a.srFormBtn, #srContent a.srCancelAppt, #srContent #srFeedback input[type=submit] { text-decoration: none; margin: 5px auto; display: table; padding: 4px 15px; color: #fff !important; background: #d7061b; -webkit-box-shadow: 2px 2px 5px 1px rgba(68,68,68,0.3); -moz-box-shadow: 2px 2px 5px 1px rgba(68,68,68,0.3); box-shadow: 2px 2px 5px 1px rgba(68,68,68,0.3); }
#srContent #srInputs .dp-container, #srContent #srInputs .cc-container { text-align: center; }
#srContent #srInputs .dp-yes, #srContent #srInputs .dp-no { border: none; outline: none; display:inline-block; margin: 0 4px; }
#srContent #srInputs .dp-yes:hover, #srContent #srInputs .dp-no:hover, #srContent #srInputs input[type=submit]:hover, #srContent a.srFormBtn:hover, #srContent #srFeedback input[type=submit]:hover { -webkit-box-shadow: 2px 2px 8px 2px rgba(68,68,68,0.3); -moz-box-shadow: 2px 2px 8px 2px rgba(68,68,68,0.3); box-shadow: 2px 2px 8px 2px rgba(68,68,68,0.3); }

.callbackForm .half {width:49%;display:inline-block;margin:auto}
.grey-text-link {display: block;text-align: center;color: grey;font-weight: bold;}

#srContent img#footerLogo { margin: 0px 48px 5px 18px; float: right; -webkit-filter: grayscale(0.9); filter: grayscale(0.9); -o-transition: filter 0.5s ease; -moz-transition: filter 0.5s ease; -webkit-transition: filter 0.5s ease; transition: filter 0.5s ease; }
#srContent img#footerLogo:hover { -webkit-filter: grayscale(0); filter: grayscale(0); }

#srContent .centre, #srContent .centre p { text-align: center !important; margin-left: auto !important; margin-right: auto !important; }

#srContent label.error, #scheduleFutureCallback .error, #scheduleCallback .error { color: #C10005 !important; font-size: 13px; }
label#srMsgSender-error { display: none !important; }
#srContent input.error { background: #FFE1E2; }
p.small, p.srDataSecure { font-size: 12px; color: #999; font-style: italic; margin-top: 5px; margin-bottom: 5px; line-height: 1.2em; }
p.errormsg { color: #B30004 !important; }
p.srDataSecure { padding-left: 18px; background: url('//app.meetami.ai/img/widget/padlock.png') no-repeat; margin-top: 10px; }
p.srDataSecure span { color: #4898d3; font-style: normal; }
#srContent #srFeedback { padding: 10px 15px; }
#srContent #srFeedback .success { width: 100px; height: 100px; padding: 35px 29px 35px 28px; margin: 20px auto 8px auto; border: 0; background: #d7061b; -webkit-border-radius: 50%; -moz-border-radius: 50%; border-radius: 50%; -webkit-box-shadow: 2px 2px 5px 1px rgba(68,68,68,0.3); -moz-box-shadow: 2px 2px 5px 1px rgba(68,68,68,0.3); box-shadow: 2px 2px 5px 1px rgba(68,68,68,0.3); -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; }
#srContent #srFeedback .success img { width: 43px; height: 32px; }
#srContent #srFeedback p#srBtm { margin-bottom: 25px; text-align: center; }

form#srFbForm { width:100%}
.srStarRating { width: 100%; padding: 12px 0; margin: 0 0 10px 0; background: #e1e1e1; -moz-border-radius: 10px; -webkit-border-radius: 10px; border-radius: 10px; color: #7a7b6a; }
#srContent #srFeedback .textarea textarea { margin-bottom: 12px; }
#srStars { width: 266px !important; display: block; margin: 0 auto; height: 75px; cursor: pointer; background: url('//app.meetami.ai/img/core/stars-pub.png') top center no-repeat; }
#srStars.star-1 { background-position: center 0; }
#srStars.star-2 { background-position: center -80px; }
#srStars.star-3 { background-position: center -160px; }
#srStars.star-4 { background-position: center -240px; }
#srStars.star-5 { background-position: center -320px; }

#srContent a.footerLnk, #srContent p.footerLnk { float: right; position: relative; display: block; text-align: right; margin: 0 10px 8px 0; font-size: 10px; font-variant: small-caps; color: #c1bcbf !important;
	background: url('//app.meetami.ai/img/core/powered-by-empty.svg') right center / 28px 26px no-repeat; padding: 1px 6px 5px 0;
/*		-moz-filter: url("data:image/svg+xml;utf8,<svg xmlns=\'http://www.w3.org/2000/svg\'><filter id=\'grayscale\'><feColorMatrix type=\'matrix\' values=\'0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0\'/></filter></svg>#grayscale");
					 -o-filter: url("data:image/svg+xml;utf8,<svg xmlns=\'http://www.w3.org/2000/svg\'><filter id=\'grayscale\'><feColorMatrix type=\'matrix\' values=\'0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0\'/></filter></svg>#grayscale");
*/		         -webkit-filter: grayscale(100%);
					 filter: gray;
				 -webkit-transition: -webkit-filter 500ms; transition: filter 500ms;
}
#srContent a.footerLnk > span, #srContent p.footerLnk > span { color: #fff; font-variant: normal; display: inline-block; margin-left: 7px; font-family: arial, sans-serif; }
#srContent a.footerLnk:hover, #srContent p.footerLnk:hover { -webkit-filter: none; filter: none; }
/* #srContent a.footerRate, #srContent p.footerRate { position: absolute; top: 9px; right: 26px; margin-left: 14px; margin: 0 0 8px 12px; z-index: 1; } */
#srContent a.footerRate button, #srContent p.footerRate { background: #c9c9c9; color: white !important; height: auto; line-height: 16px; border: none; font-size: 12px; padding: 2px 6px !important; font-weight: normal !important; border-radius: 0 !important;  }
#srContent a.footerRate.active-chat button { background: #d7061b }
#srContent .feedback-upper-container { transition: .2s all; position: absolute; right: 0px; top: 42px; background: transparent; width: 100%; height: 60px; z-index: 1; }
#srContent.srWelcomeMessage .feedback-upper-container { display: none; }
#srContent .feedback-upper-container p { transition: .2s all; white-space: nowrap; text-align: right; position: absolute; top: 12px; right: 20px; margin-left: 14px; margin: 0 0 8px 12px; z-index: 1; font-size: 12px; }
#srContent .feedback-upper-container p span { transition: .2s all; opacity: 0; display: none; }
#srContent .feedback-upper-container p a { width: 95px; }
#srContent .feedback-upper-container.scrollbar-visible { height: 45px; background: rgba(255,255,255,0.95); }
#srContent .feedback-upper-container.scrollbar-visible p span { opacity: 1; display: inline-block; }

#srContent .feedback-upper-container.scrolled-top { background: transparent; }
#srContent .feedback-upper-container p.success-color { width: auto; }
#srContent .feedback-upper-container.scrolled-top p.success-color { width: 95px; }
#srContent .feedback-upper-container.scrolled-top p span { opacity: 0; }
#srContent .feedback-upper-container.scrolled-top.scrollbar-visible p { right: 25px; }

#srContent .feedback-prechat-container { position: relative; width: 85%; padding: 0; box-sizing: border-box; margin: 5px auto -9px auto; }
#srContent .feedback-prechat-container p { margin: 0 0 10px 0; border-top: 1px solid #e9e6e6; text-align: center; padding-top: 5px; color: #aaa !important; }
#srContent .feedback-prechat-container a.footerRate button { background: #d7061b !important; }
#srContent .feedback-prechat-container p.success-color { border-top: none; color: #fff !important; }
#srContent .feedback-prechat-container.cc-exists { display: none; }

#srContent #character-message-container {color: #aaa !important; margin-top:5px;}



#srContent .srFormBtnGrey { background: #b9b9b9 !important; margin-right: 5px !important; display: inline-block !important; }
#srContent .srFormBtn.during { display: inline-block !important; }

#srContent #srMsgs p a.linkified { text-transform: none; font-size: 1em; display: block; margin-top: 8px; margin-bottom: 8px; text-decoration: underline; color: blue !important; }
#srContent #srMsgs p a.linkified:hover { text-decoration: none; }

/* Welcome message stylings */
#srContent.srWelcomeMessage {
	height: auto; max-height: 650px; bottom: 115px; right: 24px;
	width: 360px;
}
/*
#srContent.srWelcomeMessage::after {
	content: " ";
	position: absolute;
	display: block;
	width: 25px;
	height: 15px;
	bottom: -15px;
	right: 48px;
	background: url('//app.meetami.ai/img/widget/chat-btm.png') top left no-repeat;
}*/

#srContent.srWelcomeMessage #srMenu #srMin {
	display: none;
}

#srContent.srWelcomeMessage .footerLnk {
	display: none;
}

#srContent.srWelcomeMessage #srChatter form { position: relative; bottom: 5px; }
#srContent.srWelcomeMessage .feedback-prechat-container { bottom: 5px; }


#srLaunchContainer.srWelcomeMessage #srLaunch {
	display: block !important;
}

#srContent.srWelcomeMessage #srMsgs span:first-child {
	display: none;
}

	#srLaunchContainer { right: auto !important; left: 49px !important; }
	#callbackLaunchContainer { right: auto !important; left: 49px !important; }
	#srLaunchContainer #srPreviewMessage { left: 58px; right: auto; }
	#srLaunchContainer .srBadge { left: 102px; right: auto; }
	#srPreviewMessage .avatar-preview.avatar-default { margin-left: 24px; }
	#srContent.srWelcomeMessage { left: 24px; right: auto; }
	#srContent.srWelcomeMessage::after { left: 50px; right: auto; }
	#srContent a.footerLnk, #srContent p.footerLnk { margin-right: 14px; }


	#srContent { height: auto; max-height: 650px; right: 12px; }

	
			#srContent { bottom: 0; }
	
			#srContent { left: 24px; right: auto; }
		#srContent::after { left: 50px; right: auto; }
	
#callbackCover {display: none;position: fixed;top: 0;left: 0;width: 100%;height: 100%;background: url(//app.meetami.ai/img/widget/sr-layer-bg.png) repeat;z-index: 999990;font-size: 13px;line-height: 1.2em;font-family: 'Lato', sans-serif !important;color: #444 !important;letter-spacing: 0 !important;font-weight: 300;-moz-box-shadow: rgba(0, 0, 0, 0.2) 3px 3px 5px 2px;-webkit-box-shadow: rgba(0, 0, 0, 0.2) 3px 3px 5px 2px;box-shadow: rgba(0, 0, 0, 0.2) 3px 3px 5px 2px;}
#callbackCover .lock {width:13px;height:16px;background-size: 100% 100%;display:inline-block;margin-right:4px }
#callbackCover .formContainer {margin:auto;margin-top:150px;width:350px;clear:both}
#callbackCover .callbackCoverContent {clear:both}
#callbackCover .callbackCoverContent .callbackCoverHeader {background-color:#FFF;padding:10px;text-align:left}
#callbackCover .callbackCoverContent .callbackCoverInnerContent {background-color:#f8f8f8;border-bottom:1px solid #f8f8f8;padding:10px 15px}
#callbackCover .callbackCoverContent .callbackCoverInnerContent .button {background-color:grey;width:49.5%;display:inline-block;color:#FFF;font-size:12px;font-weight:bold;text-align:center;padding:5px 10px; box-sizing: border-box;}
#callbackCover .callbackCloseBtn {color:#FFF;float:right;margin-bottom:15px}
#callbackCover .callbackCoverContent .callbackCoverInnerContent p.data {font-style:italic;color:#818181}
#callbackCover .callbackCoverContent .callbackCoverInnerContent .main-button {display:block;margin:0 auto;background-color:#d7061b;width:49%;border: none;outline: none;}
#callbackCover .callbackCoverContent .callbackCoverInnerContent .main-button.pending { opacity: 0.35; background: #d7061b url('//app.meetami.ai/img/core/bg/loading.gif') left 10px center / 16px auto no-repeat; cursor: default; }


#callbackCover .futureCallbackCoverContent {display:none}

#callbackLaunchContainer .bubble-component { display:none}

#callbackLaunchContainer div.bubble {
	width: 300px;
	text-align: left;
	position:relative;
	padding:6px 12px;
	font-size:14px;
	/*top:10px;*/
	padding-right:20px;
	border-radius:5px;
	background-color:#444444;
	color:#ffffff;
}

#callbackLaunchContainer div.bubble-container {
	position: absolute;
	left: 90px;
	width: 300px;
	text-align: left;
	height:100px;
	font-size:14px;
	top:-11px;
	display: flex;
    align-items: center;
}

#callbackLaunchContainer div.close-bubble{
	position: absolute;
    right: 2px;
    color:#ffffff;
    z-index: 3;
    top: -3px;
	cursor:pointer;
	font-size:13px;
	display: block;
    height: 15px;
    width: 15px;
}

#callbackLaunchContainer div.close-bubble:hover{
	text-decoration:underline

}

#callbackLaunchContainer div.triangle {
	width: 0;
	height: 0;
	border-style: solid;
	border-width: 10px 12px 10px 0;
	border-color: transparent #444444 transparent transparent;
	position:absolute;
	top:28px;
	left:80px;
}

.callbackCoverContent .centre{ text-align:center}

#srBadge{
	width:400px;
	position:fixed;
	bottom:20px;
	right:30px;
	font-size: 13px;
    line-height: 1.2em;
    font-family: 'Lato', sans-serif !important;
	min-height:110px;
	z-index:1000;
	font-weight:400;
	background: #FFF;
}

#srBadge .srBadgeContainer{
	position:relative
}

#srBadge.sr-badge-offscreen {
	bottom:-200px
}

#srBadge .srBold, .text-form .srBold{
	font-weight:bold
}

#srBadge .srBadge-layer{
	height:100%;
	width:100%;
	padding:10px;
	background: #FFF;
	z-index:1;
	box-sizing: border-box;

}

#srBadge .srBadgeHeader{
	position:absolute;
	top:-30px;
	left:10px;
	z-index:2
}

#srBadge .srBadgeHeader.srBadgeBackground{
	position:absolute;
	top:-31px;
	left:9px;
	z-index:-1
}

#srBadge .sr-logo-icon {

	border:5px solid white;
	background-color:#FFF;
	display:inline-block;
	float:left;

}

#srBadge .srTitle {
	font-weight:bold;

	border :5px solid white;
	border-left:none;
	min-height:18px;
	background-color:#FFF;
	display:inline-block;
	float:left;
	margin-top:10px;
	padding-right: 4px;
	padding-left:2px;
}

#srBadge .sr-logo-icon.sr-background-logo {

	border:6px solid red;

}

#srBadge .srContent{
	position:relative;
	width:100%;
	height:100%;
	box-sizing:border-box!important
	
}

#srBadge .srText-holder, .srCoverContent .srText-holder{
	margin-top:10px;
	background-color:#f0ecec;
	padding:5px;
	margin-bottom:10px;
}

.srCoverContent .srText-holder.dismiss-message{
	margin-top:10px;
	margin-bottom:20px;
	-webkit-border-radius: 10px 10px 10px 2px;
    padding: 5px 8px;
    background: #fedbeb !important;

}

#srBadge p, .srCoverContent .srText-holder p {margin-bottom:0; margin-top:0}
.srCoverContent .srText-holder.reply-dismiss{
	margin-top:10px;
	margin-bottom:20px;
}


.srCoverContent .reply-dismiss  { -moz-border-radius: 12px 12px 12px 2px; -webkit-border-radius: 10px 10px 10px 2px; padding: 5px 8px; background: #d70015 !important; } 

#srBadge .btn-container, .srCoverContent .btn-container{text-align:center}

#srBadge .sr-action-btn,.srCoverContent .action-btn { -webkit-appearance: none; border-radius: 0px !important; padding:5px 10px;border:none;margin:0 2px;color:#FFF;font-size:15px;cursor:pointer;font-family: 'Lato', sans-serif !important;font-weight: 400;box-shadow: none;text-transform: none;transition: none;}

#srBadge .sr-action-btn.sr-dismiss-badge-btn, .srCoverContent .action-btn.dismiss-rl-btn {	background-color:grey}

.ami-hidden{visibility:hidden}


#callbackCover .avatar {height:30px;background-color:#d7061b;}
/* Responsive aspects */
@media only screen and (min-width: 1px) and (max-width: 720px)  {

	#srContent #srMsgs > p, #srContent #srMsgs > p.agent { width: 80%; }
	#srContent #srInputs .textarea textarea { -moz-box-shadow: none !important; -webkit-box-shadow: none !important; box-shadow: none !important; }

	#srContent h4 span#srMenu a { width: 25px; height: 25px; padding: 10px; margin-top: -4px; margin-left: 5px; }
	#srContent h4 span#srMenu a.srMin, #srContent h4 span#srMenu a.srClose { background-size: 10px 10px !important; background-repeat: no-repeat !important; background-position: center center !important; box-sizing: border-box; }
	#srContent h4 span#srMenu a.srMin { background-size: 10px 10px; }
	#srContent.old #srMenu a[rel="srMinToggle"] {
		float: right;
		background: url(//app.meetami.ai/img/widget/down-arrow.png) !important;
		background-size: 10px 7px !important;
		background-repeat: no-repeat !important;
		background-position: center center !important;
	}
}

	#srContent.old #srMenu a[rel="srMinToggle"] {
		float: right;
		background: url(//app.meetami.ai/img/widget/down-arrow.png) !important;
		background-size: 10px 7px !important;
		background-repeat: no-repeat !important;
		background-position: center center !important;
	}

@media only screen and (max-height: 640px)  {

	#callbackCover .formContainer { margin: 22px auto 0 auto !important; max-width: 98%; }

}

@media print {
  #srLaunchContainer {display:none!important}
  #srContent {display:none!important}
  #callbackLaunchContainer {display:none!important}
}
		/* CSS to handle the elements specifically related to the address lookup within the chat widget */
#srAddOptions ul#srAddressOpts, #srInputs ul#srAddressOpts {
	max-height: 85px;
	list-style: none;
	margin: 1px 0 4px 0;
	padding-left: 0;
	overflow: auto;
}
#srInputs ul#srAddressOpts {
	position: absolute;
	top: -95px;
	max-height: 95px;
	left: 0;
	width: 100%;
}
#srInputs ul#srAddressOpts after {
	content: "&#9662;";
	bottom: -12px;
	colour: red;
}
#srAddOptions ul#srAddressOpts li a, #srInputs ul#srAddressOpts li a {
	display: block;
	padding: 4px 8px;
	border: 1px solid #e9e6e6;
	margin: 0;
	background: #fafafa;
}
#srAddOptions ul#srAddressOpts li+li a, #srInputs ul#srAddressOpts li+li a { border-top: 0; }
#srAddOptions ul#srAddressOpts li a:hover, #srAddOptions ul#srAddressOpts li a:focus, #srInputs ul#srAddressOpts li a:hover, #srInputs ul#srAddressOpts li a:focus {
	color: #fff !important;
	background: #444;
	text-decoration: none;
}


		/* Other elements - e.g. callback buttons */

		/* Recovery layers styling */
	  #srCover, #srCoverRecovery , #srCoverMT, #srCoverIc { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: url('//app.meetami.ai/img/widget/sr-layer-bg.png') repeat; z-index: 999990; font-size: 13px; line-height: 1.2em; font-family: 'Lato', sans-serif !important; color: #444 !important; letter-spacing: 0 !important; font-weight: 300; }
	  #srCover .srCoverContent, #srCoverRecovery .srCoverContentRecovery, #srCoverIc #srIc { background-color: #f8f8f8; display: block; width: 350px; max-height: 350px; overflow: auto; position: absolute; top: 50%; left: 50%; margin-left: -175px; margin-top: -175px; z-index: 999991; }
	  #srCoverIc #srIc { background: #f2f2f2; -moz-box-shadow: rgba(0, 0, 0, 0.2) 3px 3px 5px 2px; -webkit-box-shadow: rgba(0, 0, 0, 0.2) 3px 3px 5px 2px; box-shadow: rgba(0, 0, 0, 0.2) 3px 3px 5px 2px; }
	  	    #srCoverRecovery .srCoverContentRecovery { background: #f2f2f2; -moz-box-shadow: rgba(0, 0, 0, 0.2) 3px 3px 5px 2px; -webkit-box-shadow: rgba(0, 0, 0, 0.2) 3px 3px 5px 2px; box-shadow: rgba(0, 0, 0, 0.2) 3px 3px 5px 2px; }
	  	  	    #srCover .srCoverContent { background: #f2f2f2; -moz-box-shadow: rgba(0, 0, 0, 0.2) 3px 3px 5px 2px; -webkit-box-shadow: rgba(0, 0, 0, 0.2) 3px 3px 5px 2px; box-shadow: rgba(0, 0, 0, 0.2) 3px 3px 5px 2px; }
	  
	  #srCoverRecovery .srCoverContentRecovery h4, #srCover .srCoverContent h4, #srCoverIc #srIc h4 { color: #444; font-size: 125%; font-weight: 400; background: #fff; -moz-box-shadow: 0 0 1px 0 rgba(68,68,68,0.3); -webkit-box-shadow: 0 0 1px 0 rgba(68,68,68,0.3); box-shadow: 0 0 1px 0 rgba(68,68,68,0.3); padding: 12px 20px; -webkit-box-sizing: border-box;‌​ -moz-box-sizing: border-box; box-sizing: border-box; margin-top: 0; margin-bottom: 0; }
		#srCoverRecovery .srCoverContentRecovery h4:before, #srCover .srCoverContent h4:before, #srCoverIc #srIc h4:before { content: ''; width: 26px; height: 23px; margin: -4px 10px 0 -2px; display: block; float: left; background: #d7061b url('//app.meetami.ai/img/widget/header-icon.png') left center no-repeat; background-size: 26px 23px; }
		#srCoverRecovery .srCoverContentRecovery .text-form, #srCover .srCoverContent .text-form, #srCoverIc #srIc .srFormSection { padding: 12px 20px; padding: 12px 20px; -webkit-box-sizing: border-box;‌​ -moz-box-sizing: border-box; box-sizing: border-box; }
	  #srCoverRecovery .srCoverContentRecovery p, #srCover .srCoverContent p { margin-bottom: 15px; }

	  #srCover .srCoverContent .srText-holder p { margin-bottom:0 }
	  #srContent #srInputs .srSubmitForm, #srCover .srCoverContent .srSubmitForm, #srCoverIc #srIc #srSubmitIc, #srCoverRecovery .srCoverContentRecovery .srSubmitForm, #srCoverRecovery .srCoverContentRecovery a#srSubmitForm, #srCoverRecovery .srCoverContentRecovery a#srChatNowSrch, #srCover .srCoverContent a#srSubmitForm, #srCover .srCoverContent a#srChatNow, a.srSubBtn { margin: 10px auto; display: block !important; background: #d7061b; color: #fff; text-decoration: none;
	    	      -webkit-border-radius: 5px; -moz-border-radius: 5px; border-radius: 5px;
	    	    font-size: 105%; width: 150px; text-align: center; padding: 8px 12px; border: 0; -webkit-appearance: none;
	  }
	  
	  #srCoverRecovery .srCoverContentRecovery img#srRLSrch, #s
	  rCover .srCoverContent img#srRL { width: 350px;
	    	      -webkit-border-radius: 5px; -moz-border-radius: 5px; border-radius: 5px;
	    	  }
	  #srCover a.srCloseBtn, #srCoverRecovery a.srCloseBtn, #srCoverIc a.srCloseBtn { display: none; position: fixed; top: 50%; left: 50%; width: 350px; margin-top: -200px; margin-left: -175px; color: #fff !important; text-align: right; }
	  #srCloseTrigger { width: 100%; height: 3px; position: fixed; top: 0; left: 0; z-index: 9999999; }
	  #srCoverRecovery .srCoverContentRecovery p.error, #srCover .srCoverContent p.error, #srCoverRecovery .srCoverContentRecovery p.success, #srCover .srCoverContent p.success { background: #0C9C21; padding: 6px 15px; margin-bottom: 10px; color: #fff;
	    	      -webkit-border-radius: 4px; -moz-border-radius: 4px; border-radius: 4px;
	    	  }
	  #srCoverRecovery .srCoverContentRecovery p.error, #srCover .srCoverContent p.error { background: #C40000; }
	  #srCoverMT #srMtl form label.error { width: 250px; }
	  #srCoverRecovery .srCoverContentRecovery img.loader, #srCover .srCoverContent img.loader { display: none; margin: 15px 75px; width: 150px; }

	  #srCoverMT #srMtl { width: 650px; max-height: 340px; position: absolute; top: 45%; left: 50%; margin-left: -325px; margin-top: -175px;
	    	      background: #fff;
	    	  }
	  #srCoverMT #srMtl h4 { background: #d7061b; color: #fff; font-size: 20px; font-weight: bold; padding: 12px 18px 5px 18px; margin: 0; }
	  #srCoverMT #srMtl p.intro { background: #d7061b; color: #fff; padding: 0 18px 12px 18px; margin: 0; }
	  #srCoverMT #srMtl form { margin: 22px 18px 20px 18px; }
	  #srCoverMT #srMtl form .input, #srCoverIc #srIc form .input { margin: 2px auto; height: auto; }
		#srCoverMT #srMtl form .select select, #srCoverMT #srMtl form .input input { width:auto; padding: 3px 6px; font-size: 1em; background: #fff; }
		#srCoverMT #srMtl form label, #srCoverIc #srIc form label { width: 100px; display: inline-block; padding-left: 0; font-size: 14px; height: auto; }
	  #srCoverMT #srMtl form p.srDataSecure { text-shadow: 1px 1px #fff; }
	  #srCoverMT #srMtl form label { width: 140px; display: inline-block; font-size: 15px; }
	  #srCoverMT #srMtl form .srSubmitBar { overflow: auto;background: #d7061b; color: #fff; padding: 10px 12px; margin: 25px 0 18px 0; }
	  #srCoverMT #srMtl form .srSubmitBar a { color: #fff; font-size: 10px; opacity: 0.75; filter: alpha(opacity=75); }
	  #srCoverMT #srMtl form .srSubmitBar a#srSubmitMTL { filter: alpha(opacity=75); opacity: 1; font-size: 16px; float: right; font-weight: bold; padding-right: 25px; background: url('//app.meetami.ai/img/widget/arrow.png') right center no-repeat; }

	  #srCoverIc #srIc .centre { text-align: center; }
	  #srCoverIc #srIc .centre img { text-align: center; margin: 10px auto; }
	  #srIcBtn { display: none; position: fixed; cursor: pointer; z-index: 999989; }

	  #srContent #srCloseOverlay { display: none; position: absolute; top: 0; left: 0; right: 0; bottom: 0; width: 100%; height: 100%; z-index: 5; background-color: #fff; text-align: center; }
	  #srCloseContent { transform: translate(0, -50%); position: absolute; top: 50%; right: 0; left: 0; }
	  #srContent #srCloseOverlay #srCloseContent > p { text-align: center; font-size: 19px; width: 70%; margin: auto; color: #444 !important; margin-top: 0; }
	  #srContent #srCloseOverlay #srCloseButtons { text-align: center; margin-top: 40px; }
	  #srContent #srCloseOverlay #srCloseButtons .srCloseButton { cursor: pointer; width: 125px; padding: 9px 0px; display: inline-block; border-radius: 4px; box-shadow: 1px 1px 4px rgba(0,0,0,0.1); }
	  #srContent #srCloseOverlay #srCloseButtons .srCloseButton p { text-align: center; }
	  #srContent #srCloseOverlay #srCloseButtons .srCloseButton p:nth-child(1) { font-size: 19px; margin-bottom: 0; margin-top: 0; }
	  #srContent #srCloseOverlay #srCloseButtons .srCloseButton p:nth-child(2) { font-size: 12px; margin-bottom: 0; margin-top: 3px; }
	  #srContent #srCloseOverlay #srCloseButtons .srCloseButton.srYes { background-color: #d7061b; margin-right: 15px; }
	  #srContent #srCloseOverlay #srCloseButtons .srCloseButton.srYes p { color: white !important; }
	  #srContent #srCloseOverlay #srCloseButtons .srCloseButton.srNo { background-color: #dbdbdb; }

	  #sr-toggles{width:47px;margin: 15px auto 15px auto;text-align:center;}
	  .sr-ios-toggle,.sr-ios-toggle:active{position:absolute;top:-5000px;height:0;width:0;opacity:0;border:none;outline:none;}
	  .sr-checkbox-label{-webkit-transition: .25s ease-in-out;-moz-transition: .25s ease-in-out;-o-transition: .25s ease-in-out;transition: .25s ease-in-out;display:block;position:relative;padding:10px;margin-bottom:0px;font-size:12px;line-height:16px;width:100%;height:25px;-webkit-border-radius:18px;-moz-border-radius:18px;border-radius:18px;background:#f8f8f8;cursor:pointer;}
	  .sr-checkbox-label:before{-webkit-transition: .25s ease-in-out;-moz-transition: .25s ease-in-out;-o-transition: .25s ease-in-out;transition: .25s ease-in-out;content:'';display:block;position:absolute;z-index:1;line-height:34px;text-indent:40px;height:25px;width:25px;-webkit-border-radius:100%;-moz-border-radius:100%;border-radius:100%;top:0px;left:0px;right:auto;background:white;-webkit-box-shadow:0 3px 3px rgba(0,0,0,.2),0 0 0 2px #dddddd;-moz-box-shadow:0 3px 3px rgba(0,0,0,.2),0 0 0 2px #dddddd;box-shadow:0 3px 3px rgba(0,0,0,.2),0 0 0 2px #dddddd;}
	  .sr-checkbox-label:after{content:attr(data-off);display:block;position:absolute;z-index:0;top:0;left:-300px;padding:10px;height:100%;width:300px;text-align:right;color:#bfbfbf;white-space:nowrap;box-sizing:border-box;font-weight:normal;}
	  .sr-ios-toggle:checked + .sr-checkbox-label{-webkit-box-shadow:inset 0 0 0 20px #d7061b,0 0 0 2px #d7061b;-moz-box-shadow:inset 0 0 0 20px #d7061b,0 0 0 2px #d7061b;box-shadow:inset 0 0 0 20px #d7061b,0 0 0 2px #d7061b;}
	  .sr-ios-toggle:checked + .sr-checkbox-label:before{left:calc(100% - 25px);-webkit-box-shadow:0 0 0 2px transparent,0 3px 3px rgba(0,0,0,.3);-moz-box-shadow:0 0 0 2px transparent,0 3px 3px rgba(0,0,0,.3);box-shadow:0 0 0 2px transparent,0 3px 3px rgba(0,0,0,.3);}
	  .sr-ios-toggle:checked + .sr-checkbox-label:after{content:attr(data-on);left:47px;width:25px;}

	  #srContent #srMsgs > span { overflow: auto; }


	  /* GREEN CHECKBOX */
		#sr-checkbox1 + .sr-checkbox-label{-webkit-box-shadow:inset 0 0 0 0px #d7061b,0 0 0 2px #dddddd;-moz-box-shadow:inset 0 0 0 0px #d7061b,0 0 0 2px #dddddd;box-shadow:inset 0 0 0 0px #d7061b,0 0 0 2px #dddddd;}
	  #sr-toggles #sr-checkbox1 + .sr-checkbox-label{ padding: 0; }
	  #sr-checkbox1:checked + .sr-checkbox-label{-webkit-box-shadow:inset 0 0 0 18px #d7061b,0 0 0 2px #d7061b;-moz-box-shadow:inset 0 0 0 18px #d7061b,0 0 0 2px #d7061b;box-shadow:inset 0 0 0 18px #d7061b,0 0 0 2px #d7061b;}
	  #sr-checkbox1:checked + .sr-checkbox-label:after{color:#d7061b;}

	  .feedback-callback-intro, #sr-toggles { display: none; }

	  .srWelcomeImage { position: fixed; bottom: 100px; right: 28px; display: none; cursor: pointer; z-index: 1; }
		.srWelcomeImage img { max-width: 500px; }
		.srWelcomeImage a#srImgMin { z-index: 10; position: absolute; top: 0; right: 0; line-height: 16px; background: rgba(0,0,0,0.5); color: #fff; width: 18px; height: 18px; display: block; text-align: center; -moz-border-radius: 15px; -webkit-border-radius: 15px; border-radius: 15px; }
		.srWelcomeImage a#srImgMin img { transform: rotate(45deg); }

		#srContent #srInputs .textarea textarea#srMsgSender {
			line-height: 1.3em;
		}

	  
	  .mobOnly { display: none !important; }
	  .srCallBtn { display: none; background: #d7061b url("//app.meetami.ai/img/core/bg/overlay.png") center bottom repeat-x; padding: 0; overflow: auto; width: 120px; position: fixed; z-index: 999999; left: 15px; bottom: 15px;
	    	      -moz-border-radius: 4px !important; -webkit-border-radius: 4px !important; border-radius: 4px !important;
	    	  }
	  .srCallBtn a { display: block; color: #fff; background: url("//app.meetami.ai/img/widget/phone.png") 15px center no-repeat; background-size: 20px; padding: 8px 15px 8px 55px; text-shadow: 1px 1px 1px #777; font-size: 16px; }

	  .srRecordVoice { overflow: hidden; cursor: pointer; background-repeat: no-repeat; width: 32px; height: 26px; background: url('data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIKCSB2aWV3Qm94PSIwIDAgMzIgNTciIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDMyIDU3OyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+CgkubWljLXN0MHtmaWxsOiNDRUM2Qzc7fQo8L3N0eWxlPgo8Zz4KCTxyZWN0IHg9IjEyLjciIHk9IjQyLjEiIGNsYXNzPSJtaWMtc3QwIiB3aWR0aD0iNi43IiBoZWlnaHQ9IjExLjEiLz4KCTxnPgoJCTxwYXRoIGNsYXNzPSJtaWMtc3QwIiBkPSJNMTcuNCw0My43aC0yLjhjLTYuNiwwLTEyLTUuNC0xMi0xMlYxOWgzLjJ2MTIuN2MwLDQuOCwzLjksOC44LDguOCw4LjhoMi44YzQuOCwwLDguOC0zLjksOC44LTguOFYxOWgzLjJ2MTIuN0MyOS40LDM4LjMsMjQsNDMuNywxNy40LDQzLjd6Ii8+Cgk8L2c+Cgk8cGF0aCBjbGFzcz0ibWljLXN0MCIgZD0iTTI0LjUsNy45YzAtNC0zLjItNy4yLTcuMi03LjJoLTIuNmMtNCwwLTcuMiwzLjItNy4yLDcuMnYyMi4yYzAsNCwzLjIsNy4yLDcuMiw3LjJoMi42YzQsMCw3LjItMy4yLDcuMi03LjIKCQlWNy45eiIvPgoJPHJlY3QgeD0iNy41IiB5PSI1MC4yIiBjbGFzcz0ibWljLXN0MCIgd2lkdGg9IjE3IiBoZWlnaHQ9IjUuNCIvPgo8L2c+Cjwvc3ZnPgo='); background-repeat: no-repeat; background-position: top right; position: absolute; right: 20px; bottom: 16px; }
  	.srRecordVoice.srRecording { background: url('data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIKCSB2aWV3Qm94PSIwIDAgMzIgNTciIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDMyIDU3OyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+CgkubWljLXN0MHtmaWxsOiNENTE3MUM7fQo8L3N0eWxlPgo8Zz4KCTxyZWN0IHg9IjEyLjciIHk9IjQyLjEiIGNsYXNzPSJtaWMtc3QwIiB3aWR0aD0iNi43IiBoZWlnaHQ9IjExLjEiLz4KCTxnPgoJCTxwYXRoIGNsYXNzPSJtaWMtc3QwIiBkPSJNMTcuNCw0My43aC0yLjhjLTYuNiwwLTEyLTUuNC0xMi0xMlYxOWgzLjJ2MTIuN2MwLDQuOCwzLjksOC44LDguOCw4LjhoMi44YzQuOCwwLDguOC0zLjksOC44LTguOFYxOWgzLjJ2MTIuN0MyOS40LDM4LjMsMjQsNDMuNywxNy40LDQzLjd6Ii8+Cgk8L2c+Cgk8cGF0aCBjbGFzcz0ibWljLXN0MCIgZD0iTTI0LjUsNy45YzAtNC0zLjItNy4yLTcuMi03LjJoLTIuNmMtNCwwLTcuMiwzLjItNy4yLDcuMnYyMi4yYzAsNCwzLjIsNy4yLDcuMiw3LjJoMi42YzQsMCw3LjItMy4yLDcuMi03LjIKCQlWNy45eiIvPgoJPHJlY3QgeD0iNy41IiB5PSI1MC4yIiBjbGFzcz0ibWljLXN0MCIgd2lkdGg9IjE3IiBoZWlnaHQ9IjUuNCIvPgo8L2c+Cjwvc3ZnPgo='); background-repeat: no-repeat; background-position: top right; }

	  .srRecordVoice.srProcessing { background-position: -60px -47px; }
	  .srRecordVoice.srProcessing .srSpinner { display: block !important; }
		/* .srRecordVoice.srFinishedProcessing { background-position: 0 0; } */
		.srSpinner { margin: 8px auto 0 -2px; width: 100%; text-align: center; display: none; }
	  #srRecordMobileUx .srSpinner { margin: 13px auto 0 auto; }
		.srSpinner > div { width: 5px; height: 5px; background-color: #d7061b; margin: 0 1px; border-radius: 100%; display: inline-block; -webkit-animation: sk-bouncedelay 1.4s infinite ease-in-out both; animation: sk-bouncedelay 1.4s infinite ease-in-out both; }
		.srSpinner .bounce1 { -webkit-animation-delay: -0.32s; animation-delay: -0.32s; }
		.srSpinner .bounce2 { -webkit-animation-delay: -0.16s; animation-delay: -0.16s; }
		@-webkit-keyframes sk-bouncedelay { 0%, 80%, 100% { -webkit-transform: scale(0) } 40% { -webkit-transform: scale(1.0) } }
		@keyframes sk-bouncedelay { 0%, 80%, 100% { -webkit-transform: scale(0); transform: scale(0); } 40% { -webkit-transform: scale(1.0); transform: scale(1.0); } }
		.srTtsControls { position: absolute; bottom: 8px; left: 15px;  }
		.srTtsControls > div { float: left; }
		.srTtsMute { cursor: pointer; width: 25px; height: 25px; background: url("//app.meetami.ai/img/widget/mute-btn.svg") left top 4px / 20px auto no-repeat; }
		.srTtsControls.muted .srTtsMute { background-position: left top -22px; }
		.srTtsVolume { margin-left: 4px; margin-top: 2px; width: 32px; height: 20px; overflow-y: hidden; }
		.srTtsVolume .bar { cursor: pointer; overflow: hidden; height: 100%; width: 4px; margin-left: 2px; float: left; }
		.srTtsVolume .bar:after { content: ""; display: inline-block; background: #bfb6b8; width: 25px; height: 30px; margin-left: -5px; transform: rotateZ(-36deg); }
		.srTtsVolume .bar.active:after { background: #d7061b; }
		.srTtsControls.muted .srTtsVolume .bar:after { background: #bfb6b8; }
		.srTtsVolume .bar:nth-of-type(1) { padding-top: 18px; }
		.srTtsVolume .bar:nth-of-type(2) { padding-top: 14px; }
		.srTtsVolume .bar:nth-of-type(3) { padding-top: 10px; }
		.srTtsVolume .bar:nth-of-type(4) { padding-top: 6px; }
		.srTtsVolume .bar:nth-of-type(5) { padding-top: 2px; }
		#srChatter.delayed-creation .srTtsControls { display: none; }
		#srChatter.delayed-creation .srRecordVoice { bottom: 14px; }

		#srContent a.srCancelAppt { cursor: pointer; }
		#srContent a.srCancelApptBinary { display: inline-block; }
		#srContent a.srCancelApptBinary:first-of-type { margin-right: 5px; }
		#srContent a.srCancelApptBinary:last-of-type { background: #b9b9b9 !important; color: white !important; }

		#srRecordMobileUx { display: none; }

		.srDiscrete { position: fixed; bottom: 0; left: 0; padding: 8px; width: 38px; font-size: 14px; text-align: center; border-radius: 0 100% 0 0; background: rgba(0,0,0,0.05); color: #fff; box-sizing: border-box; }

		#srInputs.srForceFrameUserInput { height: 69px; }
		/* #srInputs.srForceFrameUserInput #hiddenFrame { width: 102.4%; height: 67px; margin-left: -2.3%; position: relative !important; } */
		#srInputs.srForceFrameUserInput #hiddenFrame { width: 96%; height: 67px; position: absolute !important; top: 4px; left: 4px; right: 10px; }
		#srInputs.srForceFrameUserInput #hiddenFrame.srInvisibleFrame { opacity: 0; left: 9999px; top: -9999px; }
		#srInputs.srForceFrameUserInput #hiddenFrame iframe { width: 100% !important; height: 100% !important; position: absolute !important; top: 0 !important; left: 0 !important; right: 0 !important; bottom: 0 !important; }
		#srInputs.srForceFrameUserInput #srMsgSender { display: none; }
		#srInputs #srMsgSender.srNormalMsgSender  { display:block !important; }

		#scheduleFutureCallback .srTitleCCL, #scheduleCallback .srTitleCCL { width: 20%; float: left; }
		#scheduleFutureCallback .srFirstNameRL, #scheduleCallback .srFirstNameRL, #scheduleCallback .srFirstNameCCL { width: 77%; float: right; }

		/* Responsive aspects */
		@media only screen and (min-height: 1px) and (max-height: 800px)  {
							#srContent { max-height: 75vh; }
					}

		#srLaunchContainer a.srCloseMobile.srMobileUx { display: none; }

		#srContent #srMsgs > p.sr-green.agent {	
			background-color: #78e254 !important;
			border: 1px solid #50ba2c !important;
			color: #3b3b3b !important;
		}

		@media only screen and (min-width: 1px) and (max-width: 720px)  {

			#srInputs.srForceFrameUserInput #hiddenFrame { width: 97.6%; top: 22px; left: 1px; }

			#srContent { height: 100%; max-height: 100vh; width: 100%; bottom: 0; right: 0; left: 0; z-index: 1000001; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; }
						#srContent #srChatter #srMsgs { max-height: 80vh; }
			#srContent #srChatter form { position: absolute; bottom: 30px; }
			#srContent a.footerLnk, #srContent p.footerLnk { position: absolute; bottom: 0; right: 0; margin-right: 14px; }
			/* #srContent a.footerRate, #srContent p.footerRate { position: absolute; bottom: 0; left: 0; margin-right: 14px; } */
			#srContent #srFeedback form#srFbForm { position: relative; margin-top: 45px; }
			a#srLaunch img { width: 28px; height: 28px; margin: 10px auto; }
			a#srLaunchPhone { right: auto; left: -40px; }
			a#srLaunchPhone img { width: 26px; height: 26px; margin: 9px auto; }
							#srLaunchContainer { right: auto !important; left: 49px !important; }
				a#srLaunch, a#srLaunchPhone { left: -40px; right: auto; bottom: -8px; width: 48px; height: 48px; }
				#srLaunchContainer .srBadge { left: 10px; bottom: 50px; right: auto; }
						#callbackLaunchContainer div.bubble-container { display: none !important; }
			#callbackLaunchContainer div.triangle { display: none !important; }

			/* MOBILE UX CHANGES */
			#srContent:not(.old) {
			 	width: 100% !important;
				max-width: auto !important;
				height: auto;
				background: transparent;
			    box-shadow: none;
				bottom: 0 !important;
				z-index: 1000000;
			}
			#srContent:not(.old) #srContentBoxShadow {
				width: 100%;
				height: 49px;
				box-shadow: 0 -6px 20px rgba(0,0,0,0.12), 0 2px 6px rgba(0,0,0,0.23);
				position: absolute;
				left: 0;
				right: 0;
				bottom: 0px;
			}
			#srContent:not(.old).srMobileUxChatForm #srContentBoxShadow {
     			height: 193px;
			}
			#srContent:not(.old).srMobileUxDpQuestion #srContentBoxShadow {
				display: none !important;
			}
			#srContent:not(.old) #srChatter #srChatForm {
				width: 100%;
				position: absolute !important;
			}
							#srContent:not(.old) #srChatter #srChatForm #srMsgSender { width: 100%; }
				#srLaunchContainer:not(.old) { z-index: 999999 !important; }
				/* #srContent #srInputs > div.textarea > #srMsgSender { margin-left: 0; } */
				#srContent:not(.old) #srInputs #srMobileSendButton.srHasMsg { display: none !important; }
						#srContent:not(.old).srMobileUxChatForm #srChatter #srChatForm { width: 100%; padding: 0 2% !important; }
			#srContent:not(.old).srMobileUxDpQuestion #srChatter #srChatForm {
				width: 100%;
			}
			#srContent #srInputs .textarea textarea#srMsgSender {
				padding-right: 68px !important;
			}
			#srContent #srMobileSendButton {
				display: block !important;
				width: 48px;
			    height: 34px;
			    position: absolute;
			    top: 20px;
			    right: 12px;
				cursor: pointer;
				background-image: url('//app.meetami.ai/img/widget/plane.png');
				background-position: center;
		     	background-size: 100% auto;
			    background-repeat: no-repeat;
				background-color: none;
				opacity: 0.2;
				transition: 0.25s;
			}
			#srContent #srMobileSendButton.srHasMsg {
				opacity: 0.45;
			}
			#srContent:not(.old) #srMobileSendButton:hover {
				opacity: 1;
			}
			#srContent:not(.old) .loading-mini {
				display: none;
			}
			#srContent:not(.old) .feedback-prechat-container {
				width: 100%;
			    bottom: 42px;
			    left: 0;
			    padding: 8px 17px;
			}
			#srContent:not(.old) .feedback-prechat-container p {
			    background: #f2f2f2;
			    padding: 5px 0;
				box-shadow: 0 2px 20px rgba(0,0,0,0.12), 0 2px 6px rgba(0,0,0,0.23);
				color: black !important;
    			margin: 0;
			}
			#srContent:not(.old) #srMsgs.prechat {
				bottom: 84px !important;
			}
			#srContent:not(.old).srWelcomeMessage {
				width: 100% !important;
				max-width: 100% !important;
			}
			#srChatter:not(.old) #srFeedback, #srChatter.old #srFeedback {
			  margin: 8px 9px;
				min-height: 0;
				overflow-y: auto;
				height: 80%;
			}
			#srChatter:not(.old) #srFeedback p {
				margin-bottom: 10px;
			}
			#srChatter:not(.old) #srFeedback form#srFbForm {
				bottom: 0 !important;
				margin-top: 0px !important;
			}
			#srLaunchContainer:not(.old).srInFeedbackState {
				display: none !important;
			}
							#srContent:not(.old) #srMsgs > p:not(.agent) { display: none; }
						#srContent:not(.old) #srMsgs p.srEndChat, #srContent:not(.old) #srMsgs div.srEndChat {
				/* background: #78e254 !important; */
				background-color: #78e254 !important;
				border: 1px solid #50ba2c !important;
				color: #3b3b3b !important;
			}
			#srContent #srMsgs > p.sr-green.agent {
				background-color: #78e254 !important;
				border: 1px solid #50ba2c !important;
				color: #3b3b3b !important;
			}
			#srContent:not(.old) #srMsgs p.srDPQuestion , #srContent:not(.old) #srMsgs div.srDPQuestion  {
				background-color: #e90914 !important;
				border: 1px solid #c10000 !important;
				color: #000 !important;
			}
			#srLaunchContainer:not(.old) {
				right: 0px;
				bottom: 0px;
				height: 49px;
		    width: 8%;
		    min-width: 0;
				display: block;
				border-radius: 0;
				z-index: 1000001;
			}
			#srLaunchContainer:not(.old)[rel="srMinToggle"] {
				background: #f2f2f2;
			}
			#srLaunchContainer:not(.old) #srRecordMobileUx {
				position: absolute;
				bottom: 7px;
				right: 0;
				display: block;
				width: 100%;
				height: 100%;
				cursor: pointer;
				z-index: 400;
			}
			#srLaunchContainer:not(.old) #srRecordMobileUx.srProcessing .srMobileUxLoading svg, #srLaunchContainer:not(.old) #srRecordMobileUx.srProcessing svg#srLaunchTxtSvg {
				display: none !important;
			}
			#srLaunchContainer:not(.old) #srRecordMobileUx.srProcessing .srMobileUxLoading .srSpinner {
				display: block !important;
      			margin: 15px auto 0 auto;
			    position: absolute;
			    right: 5px;
			}
			#srLaunchContainer:not(.old) #srRecordMobileUx.srProcessing .srMobileUxLoading .srSpinner > div {
				background-color: #d7061b;
			}

			#srLaunchContainer:not(.old) #srRecordMobileUx.srProcessing .srMobileUxLoading {
			    background-position: -60px -47px;
				overflow: hidden;
				cursor: pointer;
				width: 51px;
				height: 46px;
			}
			#srLaunchContainer:not(.old) #srRecordMobileUx > div {
				position: absolute;
				bottom: 1px;
				right: 0;
				width: 52px;
				height: 28px;
			}
			#srLaunchContainer:not(.old) #srRecordMobileUx svg {
				position: absolute;
				bottom: 1px;
				right: 0;
		    width: 52px;
			  height: 28px;
			}
			#srMobileUxStartRec, #srLaunchTxtSvg {
				height: 39px !important;
			}
			#srLaunchTxtSvg {
				right: 9px !important;
			}
			#srLaunchContainer:not(.old) #srRecordMobileUx > div.srRecordVoice {
     			right: 10px;
				background-position: top right !important;
			}
			#srLaunchContainer:not(.old) #srRecordMobileUx svg#srMobileUxStartRec { right: 8px; }
			#srLaunchContainer:not(.old) #srMobileUxResumeRec svg { right: 2px; }
			#srLaunchContainer:not(.old) #srMobileUxStopRec svg { right: 2px; }

			@keyframes pulse {
			  	0% {
			    	opacity: 0.5;
			  	}
			  	50% {
			    	opacity: 1;
			  	}
				100% {
					opacity: 0.5;
				}
			}

			/* Default */
			#srLaunchContainer:not(.old) #srRecordMobileUx #srMobileUxStopRec,
			#srLaunchContainer:not(.old) #srRecordMobileUx .srMobileUxLoading,
			#srLaunchContainer:not(.old) #srRecordMobileUx #srMobileUxResumeRec,
			#srLaunchContainer:not(.old) #srRecordMobileUx .srRecordVoice {
				display: none;
			}

			#srContent:not(.old) a.srCloseMobile.srMobileUx {
				position: fixed; display: none;
				background: url('https://app.meetami.ai/img/widget/mobile/close.svg') left top no-repeat;
				width: 28px; height: 28px; bottom: 10px; left: 12px;
			}

			/* Recording */
			#srLaunchContainer:not(.old) #srRecordMobileUx.srRecording #srMobileUxStopRec {
				display: block;
			}
			#srLaunchContainer:not(.old) #srRecordMobileUx.srRecording #srMobileUxStopRec g path {
				opacity: 0.5;
				animation: pulse 2s infinite;
			}
			#srLaunchContainer:not(.old) #srRecordMobileUx.srRecording #srMobileUxStartRec {
				display: none;
			}

			/* Processing */
			#srLaunchContainer:not(.old) #srRecordMobileUx.srProcessing .srMobileUxLoading {
				display: block;
			}
			#srLaunchContainer:not(.old) #srRecordMobileUx.srProcessing #srMobileUxStartRec {
				display: none;
			}
			#srLaunchContainer:not(.old) #srRecordMobileUx.srProcessing #srMobileUxResumeRec {
				display: none;
			}

			/* Stopped recording */
			#srLaunchContainer:not(.old) #srRecordMobileUx.srStoppedRec:not(.srProcessing):not(.srRecording) #srMobileUxResumeRec {
				display: block;
			}
			#srLaunchContainer:not(.old) #srRecordMobileUx.srStoppedRec:not(.srProcessing) .srRecordVoice {
				display: block;
			}
			#srLaunchContainer:not(.old) #srRecordMobileUx.srStoppedRec:not(.srProcessing) #srMobileUxStartRec {
				display: none;
			}


			#srContent:not(.old) #srChatter {
			    box-shadow: none;
		     	position: absolute;
			    bottom: 0;
     			width: 100%;
			}
			#srContent:not(.old).srMobileUxChatForm #srChatter {
			    padding-bottom: 194px;
			}
			#srContent:not(.old).srNoAgentForm #srChatter {
			    padding-bottom: 215px;
			}
			#srContent:not(.old).srMobileUxDpQuestion #srChatter {
			    padding-bottom: 46px;
			}
			#srContent:not(.old) #srChatter #srMsgs {
				width: 100%;
				padding: 7px 7px;
				bottom: 49px;
     		position: absolute;
     		max-height: 100vh !important;
				min-height: auto !important;
				box-sizing: border-box;
				overflow: hidden;
			}
			#srContent:not(.old) #srChatter #srMsgs .srDPQuestionTempHidden {
				display: none;
			}
			#srContent:not(.old) #srChatter .srMobileUxEditActive input {
				width: 100%;
				height: 100%;
				padding: 7px 13px;
			}
			#srContent:not(.old) #srChatter .srMobileUxEditActive .srResponseEditSave, #srContent:not(.old) #srChatter .srMobileUxEditActive .srMsgInnerContent > p > span:not(.srResponseEditInputContainer), #srContent:not(.old) #srChatter .srMobileUxEditActive .srMobileUxEditButton {
				display: none;
			}
			#srContent:not(.old) #srChatter .srMobileUxEditActive .srMsgInnerContent > p {
				padding-left: 0 !important;
				margin: 0 !important;
			}
			#srContent:not(.old) #srChatter .srMobileUxEditActive {
				overflow: visible;
				padding: 0;
		     	width: 97%;
			    float: right;
			}
			#srContent:not(.old) #srChatter #srMsgs .srMobileUxEditActive .srMsgInner.srMobileUxEdit .srInnerImg {
				top: -2px !important;
				left: -15px !important;
				background: url('data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIKCSB2aWV3Qm94PSIwIDAgMzMuMSAzMS40IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAzMy4xIDMxLjQ7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4KCjxyZWN0IHg9Ii0wLjYiIHk9Ii0wLjYiIGZpbGw9Im5vbmUiIHdpZHRoPSIzNC4zIiBoZWlnaHQ9IjMzLjEiLz4KPGc+Cgk8Zz4KCQk8Y2lyY2xlIGNsYXNzPSJhdmF0YXJGaWxsIiBmaWxsPScjZDcwNjFiJyBjeD0iMTYiIGN5PSIxNC44IiByPSIxMi44Ii8+Cgk8L2c+CjwvZz4KPHBvbHlnb24gZmlsbD0iI2ZmZiIgcG9pbnRzPSIyMy41LDE5LjcgMTcuOCwxOS43IDE2LDIyIDEzLjgsMTkuNyA4LjUsMTkuNyA4LjUsOSAyMy41LDkgIi8+Cjwvc3ZnPgo=') top left / 32px auto no-repeat !important;
			}
			#srContent:not(.old) #srChatter .srMobileUxEditButton {
				text-decoration: underline;
				cursor: pointer;
			}
			#srContent:not(.old) #srChatter .srResponseEditInputContainer input {
				font-size: 13px !important;
			}
			#srContent:not(.old) #srChatter .srResponseEditInputContainer input.srInputDisabled {

			}
			#srContent:not(.old) #srMsgs p, #srContent:not(.old) #srMsgs > div {
				background: #ffffff;
				width: 96%;
				padding: 3px 7px 7px 7px;
				margin: 5px 2% 0 2%;
			  border-radius: 0px;
				box-shadow: 0 2px 20px rgba(0,0,0,0.12), 0 2px 6px rgba(0,0,0,0.23);
				font-size: 12px;
     		overflow: hidden;
				box-sizing: border-box;
			}
			#srContent:not(.old) #srMsgs p.agent, #srContent:not(.old) #srMsgs p.agent p, #srContent:not(.old) #srMsgs p.agent div,
			#srContent:not(.old) #srMsgs div.agent, #srContent:not(.old) #srMsgs div.agent p, #srContent:not(.old) #srMsgs div.agent div {
				background: #f2f2f2;
			}
			#srContent:not(.old) #srMsgs > p > .srMsgInner, #srContent:not(.old) #srMsgs > div > .srMsgInner {
			    /* width: 100% !important; */
				position: relative;
				width: auto !important;
				display: flex;
			}
			#srContent #srMsgs .srMsgInner p > span:first-of-type {
				margin-bottom: 2px;
				display: block;
				font-weight: bold;
			}
			#srContent:not(.old) #srMsgs > p.srDismissed, #srContent:not(.old) #srMsgs > div.srDismissed {
				display: none !important;
			}
			#srContent:not(.old) #srMsgs .srMsgInner .srMsgInnerContent {
				width: 100%;
				float: left;
			}
			#srContent:not(.old) #srMsgs .srMsgInner .srMsgInnerContent p {
				width: 100%;
				padding: 0 6px 0 0;
				box-shadow: none;
				float: left;
     		padding-left: 40px;
				box-sizing: border-box;
			}
			#srContent:not(.old) #srMsgs .srMsgInner .srDismiss {
				width: 75px;
				height: 100%;
				right: -111px;
				position: absolute;
     		margin-top: 2px;
				border-left: double #b7b7b7;
				cursor: pointer;
			}
			#srContent:not(.old) #srMsgs .srMsgInner .srDismissInner {
				width: 100%;
				height: 14px;
				position: absolute;
				text-align: center;
				top: 50%;
				margin-top: -7px;
			}
			#srContent:not(.old) #srChatter #srMsgs .srEndChat, #srContent:not(.old) #srChatter #srMsgs .srDPQuestion {
				width: 100%;
				margin: 5px 0 0 0;
			    padding: 13px 7px 14px 45px;
				background-color: #f2f2f2;
				border-radius: 0px;
				box-shadow: 0 2px 20px rgba(0,0,0,0.12), 0 2px 6px rgba(0,0,0,0.23);
				border: none;
			}
						#srContent:not(.old) #srChatter #srMsgs .srEndChat .srMsgInner .srInnerImg, #srContent:not(.old) #srChatter #srMsgs .srDPQuestion .srMsgInner .srInnerImg {
				display: none;
			}
			#srContent:not(.old) #srChatter #srMsgs .srEndChat .srMsgInner .srMsgInnerContent p {
				background: none;
			}
			#srContent:not(.old) #srChatter #srMsgs .srDPQuestion .srMsgInner .srMsgInnerContent p {
				padding: 0;
			}
			#srContent:not(.old) #srMsgs > p span:first-of-type, #srContent:not(.old) #srMsgs > div span:first-of-type {
				font-size: 14px;
			}
			#srContent:not(.old) #srMsgs .srEndChat.phone p {
				background: none !important;
				box-shadow: none !important;
			}

						#srContent:not(.old) #srMsgs .srMsgInner .srInnerImg { position: absolute; content: ''; display: block; width: 37px; height: 35px; float: left; top: 50%; margin-top: -14px; background: url('data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIKCSB2aWV3Qm94PSIwIDAgMzMuMSAzMS40IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAzMy4xIDMxLjQ7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4KPHN0eWxlIHR5cGU9InRleHQvY3NzIj4KCS5hdjB7ZmlsbDojRkZGRkZGO30KCS5hdjF7ZmlsbDojRjJGMkYyO30KCS5hdjJ7ZmlsbDojMUYxQkREO30KPC9zdHlsZT4KPHJlY3QgeD0iLTAuNiIgeT0iLTAuNiIgZmlsbD0iI2ZmZiIgd2lkdGg9IjM0LjMiIGhlaWdodD0iMzMuMSIvPgo8Zz4KCTxnPgoJCTxjaXJjbGUgZmlsbD0iI2YyZjJmMiIgY3g9IjE2IiBjeT0iMTQuOCIgcj0iMTIuOCIvPgoJPC9nPgo8L2c+Cjxwb2x5Z29uIGZpbGw9IiNkNzA2MWIiIHBvaW50cz0iMjMuNSwxOS43IDE3LjgsMTkuNyAxNiwyMiAxMy44LDE5LjcgOC41LDE5LjcgOC41LDkgMjMuNSw5ICIvPgo8L3N2Zz4K') top left / 34px auto no-repeat; background-size: 37px 35px; }
			#srContent:not(.old) #srMsgs > p.agent > .srMsgInner .srInnerImg, #srContent:not(.old) #srMsgs > div.agent > .srMsgInner .srInnerImg { background: url('data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIKCSB3aWR0aD0iMzMuMXB4IiBoZWlnaHQ9IjMxLjRweCIgdmlld0JveD0iLTI4MCA0MDUuNDkgMzMuMSAzMS40IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IC0yODAgNDA1LjQ5IDMzLjEgMzEuNDsiCgkgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+CgkuYXZhdGFye2ZpbGw6I0YyRjJGMjt9CgkuYXZhdGFyMXtmaWxsOiNGRkZGRkY7fQoJCS5hZ2VudC1hdmF0YXItc3BlZWNoLWJ1YmJsZSB7CgkJYW5pbWF0aW9uLXRpbWluZy1mdW5jdGlvbjogZWFzZS1pbi1vdXQ7CgkgIAlhbmltYXRpb246IGZhZGVvdXRpbiA4cyBpbmZpbml0ZTsgLyogSUUgMTArLCBGeCAyOSsgKi8KCQktd2Via2l0LWFuaW1hdGlvbjogZmFkZW91dGluIDhzIGluZmluaXRlOyAvKiBTYWZhcmkgNCsgKi8KCSAgCS1tb3otYW5pbWF0aW9uOiBmYWRlb3V0aW4gOHMgaW5maW5pdGUgOyAvKiBGeCA1KyAqLwoJICAJLW8tYW5pbWF0aW9uOiBmYWRlb3V0aW4gOHMgaW5maW5pdGU7IC8qIE9wZXJhIDEyKyAqLwoJCWFuaW1hdGlvbi1pdGVyYXRpb24tY291bnQ6IGluZmluaXRlOwoJCWFuaW1hdGlvbi1kZWxheTogNXM7CgkJcG9zaXRpb246IHJlbGF0aXZlOwoJCXotaW5kZXg6IDE7Cgl9CgkuYWdlbnQtYXZhdGFyLXBsYXktaWNvbiB7CgkJcG9zaXRpb246IHJlbGF0aXZlOwoJCXotaW5kZXg6IC0xOwoJfQo8L3N0eWxlPgo8cGF0aCBjbGFzcz0iYWdlbnQtYXZhdGFyLXBsYXktaWNvbiIgZmlsbD0nI2Q3MDYxYicgZD0iTS0yNTguNDIsNDE5LjkzbC04LjI5LTQuMTVjLTAuMi0wLjEtMC40NC0wLjAyLTAuNTQsMC4xOGMtMC4wMywwLjA1LTAuMDQsMC4xMS0wLjA0LDAuMTh2OC4yOWMwLDAuMjIsMC4xOCwwLjQsMC40LDAuNAoJYzAuMDYsMCwwLjEyLTAuMDEsMC4xOC0wLjA0bDguMjktNC4xNWMwLjItMC4xLDAuMjgtMC4zNCwwLjE4LTAuNTNDLTI1OC4yOCw0MjAuMDMtMjU4LjM0LDQxOS45Ny0yNTguNDIsNDE5LjkzeiBNLTI2Ni40OSw0MjMuNzkKCXYtN2w3LDMuNUMtMjU5LjQ5LDQyMC4yOS0yNjYuNDksNDIzLjc5LTI2Ni40OSw0MjMuNzl6Ii8+CjxwYXRoIGNsYXNzPSJhZ2VudC1hdmF0YXItcGxheS1pY29uIiBmaWxsPScjZDcwNjFiJyBkPSJNLTI2NCw0MDcuNTRjLTcuMDQsMC0xMi43NSw1LjcxLTEyLjc1LDEyLjc1czUuNzEsMTIuNzUsMTIuNzUsMTIuNzVzMTIuNzUtNS43MSwxMi43NS0xMi43NVMtMjU2Ljk2LDQwNy41NC0yNjQsNDA3LjU0egoJIE0tMjY0LDQzMi4yNGMtNi41OSwwLTExLjk1LTUuMzYtMTEuOTUtMTEuOTVzNS4zNi0xMS45NSwxMS45NS0xMS45NXMxMS45NSw1LjM2LDExLjk1LDExLjk1Uy0yNTcuNDEsNDMyLjI0LTI2NCw0MzIuMjR6Ii8+CiA8cGF0aCBmaWxsPScjZmZmJyBjbGFzcz0iYXZhdGFyIGFnZW50LWF2YXRhci1zcGVlY2gtYnViYmxlIiBkPSJNLTI4MC42LDQwNC44OWgzNC4zdjMzLjFoLTM0LjNWNDA0Ljg5eiIvPgogPGNpcmNsZSBjbGFzcz0iYWdlbnQtYXZhdGFyLXNwZWVjaC1idWJibGUiIGZpbGw9JyNkNzA2MWInIGN4PSItMjY0IiBjeT0iNDIwLjI5IiByPSIxMi44Ii8+CiA8cGF0aCBmaWxsPScjZDcwNjFiJyBjbGFzcz0iYXZhdGFyMSBhZ2VudC1hdmF0YXItc3BlZWNoLWJ1YmJsZSIgZD0iTS0yNTYuNSw0MjUuMTloLTUuN2wtMS44LDIuM2wtMi4yLTIuM2gtNS4zdi0xMC43aDE1VjQyNS4xOXoiLz4KPC9zdmc+Cg==') top left / 34px auto no-repeat; }
			#srContent:not(.old) #srMsgs .srMsgInner .srInnerImg.has-img { background: none !important; }
			#srContent:not(.old) #srMsgs > p .avatar-mini.tt,
			#srContent:not(.old) #srMsgs p:before,
			#srContent:not(.old) #srMsgs > p.agent:before,
			#srContent.srWelcomeMessage:not(.old)::after,
			#srContent:not(.old) .footerLnk,
			#srContent:not(.old) .feedback-upper-container,
			#srContent:not(.old) #srMsgs > p:after,
			#srContent:not(.old) #srHeader,
			#srContent:not(.old) #srChatter.srFeedback,
			#srContent:not(.old) .srTtsControls,
			#srLaunchContainer:not(.old) #srLaunch,
			#srContent:not(.old) #srMsgs > span,
			/* #srContent:not(.old) #srInputs, */
			#srContent:not(.old) #srMsgs .loading,
			#srContent:not(.old) #srMsgs .srCloseOverlay, #srContent:not(.old) #srMsgs #srCloseOverlay,
			#srContent:not(.old) #srCloseOverlay,
			#srContent:not(.old) .loading,
			/* #srContent:not(.old) #srMsgSender, */
			#srContent:not(.old) #srChatForm #srInputs .srDataSecure {
				display: none !important;
			}
			#srContent:not(.old) #srMsgSender {
				font-size: 15px !important;
				height: 30px !important;
     			/* border-radius: 30px !important; */
     			overflow: hidden !important;
				border: solid 0px rgba(68,68,68,0.2) !important;
				padding-right: 28px !important;
			}
			#srContent:not(.old) #srChatForm.srMobileUxDpQuestion {
				background: transparent;
				border: none;
				box-shadow: none;
			}
			#srContent:not(.old) #srChatForm.srMobileUxDpQuestion #srInputs {
				display: block !important;
				padding: 0;
			}
			#srContent:not(.old) #srChatForm #srInputs .srFormBtn {
			    margin: 6px auto 8px auto;
			}
			#srContent:not(.old) #srMsgs div p.feint {
				box-shadow: none;
			}
			#srContent:not(.old) #srMsgs .feintMsg .srInnerImg {
				display: none;
			}
			#srContent:not(.old) #srMsgs .feintMsg p.feint {
				padding-left: 0;
			}
			#srContent:not(.old).srMobileUxChatForm {
			    padding-bottom: 200px;
			}
			#srContent:not(.old).srMobileUxChatForm #srInputs {
				height: auto !important;
			}
			#srContent:not(.old).srMobileUxChatForm #srMsgs {
				bottom: 202px !important;
			}
			#srContent:not(.old).srMobileUxDpQuestion {
			    padding-bottom: 39px;
			}
			#srContent:not(.old) #srMsgs .srDPQuestion p {
				background: none !important;
			}
			#srLaunchContainer:not(.old).srMobileUxChatForm #srRecordMobileUx, #srLaunchContainer:not(.old).srMobileUxDpQuestion #srRecordMobileUx {
				opacity: 0.6;
				cursor: disabled;
				display: none;
			}
			#srLaunchContainer:not(.old).srMobileUxChatForm, #srLaunchContainer:not(.old).srMobileUxDpQuestion {
				display: none !important;
			}
			#srLaunchContainer:not(.old).srMobileUxChatForm #srRecordMobileUx #srMobileUxStartRec, #srLaunchContainer:not(.old).srMobileUxDpQuestion #srRecordMobileUx #srMobileUxStartRec {
				display: none !important;
			}
			#srLaunchContainer:not(.old).srMobileUxChatForm #srRecordMobileUx #srMobileUxResumeRec, #srLaunchContainer:not(.old).srMobileUxDpQuestion #srRecordMobileUx #srMobileUxResumeRec {
				display: block !important;
			}
			#srContent:not(.old) #srChatter #srChatForm .input.text:nth-child(2) {
				border: none;
			}
			#srContent:not(.old) #srChatter #srChatForm {
				background: #f2f2f2;
			    width: 100%;
			    padding: 0 0 0 36px;
				/* box-shadow: 0 2px 20px rgba(0,0,0,0.12), 0 2px 6px rgba(0,0,0,0.23); */
				bottom: 0px;
    			left: 0px;
				margin: 0 !important;
			}
			#srContent:not(.old) #srInputs {
     			margin-top: 4px !important;
     			padding: 6px 18px;
      		height: 45px;
					box-sizing: border-box;
			}
			/* #srContent:not(.old) #srInputs:after {
				content: "";
			    height: 59px;
			    background: #f2f2f2;
			    width: 300px;
			    position: absolute;
			    right: -300px;
			    top: -4px;
     			z-index: 300;
			} */
			#srContent:not(.old) .srRecordVoice {
				display: none;
			}
			#srContent:not(.old).srMobileUxChatForm #srChatForm #srInputs, #srContent:not(.old).srMobileUxDpQuestion #srChatForm #srInputs {
				display: block !important;
				padding: 3px 7px 7px 7px;
    			margin-top: 0;
			}
			#srContent:not(.old) #srChatForm #srInputs label {
				/* display: none; */
    			font-size: 12px;
			}
			#srContent:not(.old) #srChatForm #srInputs input {
		     	padding: 5px 6px !important;
			    font-size: 13px !important;
     			margin-bottom: 5px;
     			border-radius: 2px;
			}
			#srContent:not(.old) #srChatForm #srInputs input#phone {
				margin-bottom: 0;
			}
			
			/* New Mobile UX changes (v2) */
			#srContent.old {
				margin: 0 1%;
				width: 98%;
			}
			#srContent.old .srRecordVoice {
			  right: 25px;
			  bottom: 5px;
				width: 34px;
				height: 35px;
			}
			.srTtsControls {
				display: none !important;
			}
			#srContent #srMsgs {
				height: 100%;
			}
			/* MOBILE UX CHANGES */

			.srRecordVoice { right: 20px; bottom: 18px;  }

			#srLaunchContainer #srPreviewMessage {
				margin-top: 33px;
				right: 5px;
				left: auto;
				padding: 8px 0;
			}
			.srWelcomeImage { right: 10px; }
			#srContent.srWelcomeMessage { max-width: 98%; bottom: 0; }
			#srContent.srWelcomeMessage:after { right: 10px; }
			#srContent.srWelcomeMessage #srChatter form { bottom: 18px; }

			#srIcBtn { max-width: 96%; }
			#feedback-callback-form input[type="text"],#scheduleCallback input[type="text"], #feedback-callback-form input[type="email"], #feedback-callback-form input[type="tel"], #srCover .srCoverContent textarea#rlMsg, #srCoverRecovery .srCoverContentRecovery textarea#srchMsg, #srCover .srCoverContent .textarea textarea, #srCover .srCoverContent .textarea textarea, #srCover .srCoverContent .text input, #srCover .srCoverContent .email input, #srCover .srCoverContent .tel input, #srCoverRecovery .srCoverContentRecovery .text input, #srCoverRecovery .srCoverContentRecovery .email input, #srCoverRecovery .srCoverContentRecovery .tel input, #srContent #srInputs .textarea textarea, #srContent #srFeedback .textarea textarea, #srContent #srInputs .text input, #srContent #srInputs .email input { border: solid 1px rgba(68,68,68,0.2); -moz-box-shadow: none; -webkit-box-shadow: none; box-shadow: none; }
			#srContent #srInputs .textarea textarea, #srContent #srInputs .text input, #srContent #srInputs .text input, #srContent #srInputs .email input, #srContent select, #srContent #srChatter #srMsgs .srEndChat #srSelectTime { font-size: 16px; }

			#srContent .feedback-prechat-container { position: absolute; bottom: 78px; left: 7.5%; margin: 5px auto; }
			

			#srContent #srFeedback  { min-height: 370px; }

			#srContent a.footerLnk { background: none !important; bottom: -10px; }
			#srContent a.footerLnk > span { font-variant: small-caps; color: #C1BCBD !important; display: inline; margin-left: 0; }
			#srContent #srInputs .textarea textarea { margin-bottom: -14px; }
			#srContent  #srInputs.character-limit .textarea textarea { margin-bottom: 0; }
		}

		@media only screen and (min-width: 1px) and (max-width: 540px)  {

			#srBadge { width: 95%; right: 2.5%; left: 2.5%; }

			#srLaunchContainer:not(.old) { width: 11%; }
			#srContent:not(.old) #srChatter #srChatForm {
				width: 100%;
			}

			/*  */
			?>

		}

		@media screen and (-webkit-min-device-pixel-ratio:0) and (min-width: 1px) and (max-width: 720px) {
			/* Hack to prevent iOS devices trying to zoom in */
		  #srContent textarea,
		  #srContent input {
		    font-size: 16px !important;
		  }
		}

		/* Hack to display arrows properly on iPhone + not as emojis */
		#srContent #srMsgs > p.agent:after, #srContent #srMsgs > p:after { font-family: 'Hiragino Mincho ProN'; }


		/* Handle forms when we are on a landscape mobile */
		@media only screen and (min-height: 1px) and (max-height: 460px)  {

			#srContent #srChatter #srMsgs { min-height: 80px !important; }
			/* #srContent #srChatter #srChatForm { bottom: 20px; } */
			#srContent #srChatter #srChatForm.details { max-height: 55vh; /*top: 120px;*/ overflow-y: scroll; }
			#srContent #srChatter #srChatForm.details + a.footerLnk { display: none; }

		}

	</style>

	
	<!--[if lte IE 8]>
		<style type='text/css'>
			#srContent, #srLaunchContainer { display: none !important; }
		</style>
	<![endif]-->

	<div id="callbackCover">
		<div class="formContainer">
			<a class="callbackCloseBtn" href="#close" style="display: inline-block;">(x) Close</a>
						<div class="callbackCoverContent futureCallbackCoverContent" style="display:block">
				<div class="callbackCoverHeader">
					<img class="avatar" src="https://s3-eu-west-1.amazonaws.com/aomg-sr-app-live/widget/default-avatar.png"> Schedule a Call
				</div>
				<div class="callbackCoverInnerContent">
					<p>Schedule your call when it's convenient for you</p>
					<form action="/chats/chat/302220474411" id="scheduleFutureCallback" class="callbackForm" method="post" accept-charset="utf-8"><div style="display:none;"><input type="hidden" name="_method" value="POST"><input type="hidden" name="data[_Token][key]" value="495e98ac2c96d14e5ad48d4dfaef5fc61679d15b2c1e6c7e33d4b591536957e8ab0d65a2540f984871382051716e8c76438cf9604e67429dd9fc1190ce1cfaf5" id="Token282471939" autocomplete="off"></div>																			<div class="input text"><label for="srNameFL">Your name</label><input name="data[Chat][full_name]" id="srNameFL" required="required" type="text"></div>												<p style="margin-bottom:0.5rem">When would you like your call? </p>
						<div class="input half">
														<div class="input select"><select name="data[Chat][callback_day]" id="ChatCallbackDay">
</select></div>						</div>

						<div class="input half" style="margin-left:1%">
							<div class="input select"><select name="data[Chat][callback_time]" id="ChatCallbackTime">
</select></div>						</div>


						<div class="input text"><label for="srPhoneFL">Phone number</label><input name="data[Chat][phone_no]" id="srPhoneFL" required="required" type="text"></div>						<p class="data"><span class="lock" style="background: url(&quot;https://s3-eu-west-1.amazonaws.com/aomg-sr-app-live/widget/padlock.png&quot;) repeat 0 0;"></span><a href="#">Data Once</a>.  We don't share any of your information</p>
						<a href="#callback" class="button main-button" id="request-callback-scheduled-btn">Schedule Call</a>					<div style="display:none;"><input type="hidden" name="data[_Token][fields]" value="218fd87b36d9f620f3b98a95d4ff1736059ebe5f%3A" id="TokenFields1075513895" autocomplete="off"><input type="hidden" name="data[_Token][unlocked]" value="" id="TokenUnlocked1075005552" autocomplete="off"></div></form>					<hr>
					 				</div>
			</div>
		</div>
	</div>

					
		
		
		
		
		
		

					<!-- Chat widget -->
			<!-- launch button -->

			
			<div id="srLaunchContainer" rel="srChatToggle" class="old">
				<div id="srPreviewMessage" style="display:none;">
					<div class="srPreviewMessageContent">
						<span class="avatar-preview">
							<img src="//app.meetami.ai/img/widget/mini-avatar-lrg.png">
						</span>
						<p></p>
					</div>
				</div>
									<a href="#chat" id="srLaunch" class="ami-icon "><img src="//app.meetami.ai/img/widget/sr-icon.svg" alt="Ami Icon"></a>								<span id="srUnreadCount" class="srBadge">0</span>
								<div id="srRecordMobileUx">
											<svg version="1.1" id="srLaunchTxtSvg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 57.2 43.5" style="enable-background:new 0 0 57.2 43.5;" xml:space="preserve">
<style type="text/css">
	.lchattxt{fill:#d7061b;stroke:#d7061b;stroke-width:0.75;stroke-miterlimit:10;}
	.lchattxt1{fill:#FFFFFF;stroke:#d7061b;stroke-width:0.5;stroke-miterlimit:10;}
</style>
<title>Artboard 2</title>
<path class="lchattxt" d="M3.7,35.8h20l4.7,5.1l4.2-5.1h20.7c1.1,0,2-0.9,2-2V4.5c0-1.1-0.9-2-2-2H3.7c-1.1,0-2,0.9-2,2v29.4
	C1.8,35,2.6,35.8,3.7,35.8z"></path>
<path class="lchattxt1" d="M26,26.7h12.6l1.8,1.9l1.6-1.9h2.8c0.4,0,0.8-0.3,0.8-0.8V14.9c0-0.4-0.3-0.8-0.8-0.8H26
	c-0.4,0-0.8,0.3-0.8,0.8V26C25.3,26.4,25.6,26.7,26,26.7z"></path>
<path class="lchattxt1" d="M11.4,22.6h2.6l1.8,1.9l1.6-1.9h12.8c0.4,0,0.8-0.3,0.8-0.8V10.8c0-0.4-0.3-0.8-0.8-0.8H11.4
	c-0.4,0-0.8,0.3-0.8,0.8v11.1C10.6,22.3,10.9,22.6,11.4,22.6z"></path>
</svg>
										
					<div class="srMobileUxLoading">
						<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 57.2 43.5" style="enable-background:new 0 0 57.2 43.5;" xml:space="preserve">
<style type="text/css">
	.emptyFill{fill:#fff;stroke:#d7061b;stroke-width:0.75;stroke-miterlimit:10;}
</style>
<title>Artboard 2</title>
<path class="emptyFill" d="M3.7,35.8h20l4.7,5.1l4.2-5.1h20.7c1.1,0,2-0.9,2-2V4.5c0-1.1-0.9-2-2-2H3.7c-1.1,0-2,0.9-2,2v29.4
	C1.8,35,2.6,35.8,3.7,35.8z"></path>
</svg>
						<div class="srSpinner">
							<div class="bounce1"></div>
							<div class="bounce2"></div>
							<div class="bounce3"></div>
						</div>
					</div>

				</div>
			</div>
			<div class="srWelcomeImage">
				<a href="#min" id="srImgMin"><img src="//app.meetami.ai/img/widget/plus-icon.svg" alt=""></a>				<img src="">
			</div>

			<!-- Widget itself -->
			<div id="srContent" class="old" style="position: fixed;">
				<!-- srHeader -->
				<div id="srHeader">
					<h4>
						<span id="srMenu"></span>
						<span id="srIcon"><img src="//app.meetami.ai/img/widget/header-icon.png" alt="Ami Icon"></span>
						&nbsp;
											</h4>
				</div>
				<!-- srContent -->
				<div id="srChatter" class="old">
					<div id="srContentBoxShadow"></div>
<div id="srError"></div>
<div id="srMsgs" class="">
	<img src="//app.meetami.ai/img/core/bg/loading.gif" class="loading" alt="Loading..."></div>




<form action="/chats/chat/302220474411" id="srChatForm" method="post" accept-charset="utf-8"><div style="display:none;"><input type="hidden" name="_method" value="POST"><input type="hidden" name="data[_Token][key]" value="495e98ac2c96d14e5ad48d4dfaef5fc61679d15b2c1e6c7e33d4b591536957e8ab0d65a2540f984871382051716e8c76438cf9604e67429dd9fc1190ce1cfaf5" id="Token797660155" autocomplete="off"></div>	<a href="#close" rel="srChatToggleMobile" class="srCloseMobile srMobileUx"></a>
	<div id="srInputs" class="character-limit">
				<div class="input textarea"><textarea name="data[Chat][message]" id="srMsgSender" required="required" placeholder="Press [Enter] to send" maxlength="160" cols="30" rows="6"></textarea><div id="srMobileSendButton"></div></div>						<div id="character-message-container"><span id="character-count">160</span> characters left</div>
			
		
			</div>
	<input type="hidden" name="data[Chat][page_url]" id="pageUrl">	<input type="hidden" name="data[Chat][chat_ref]" id="chat_ref"><div style="display:none;"><input type="hidden" name="data[_Token][fields]" value="c374729fee45dc1849f4eb52024bc52e948cc4b5%3AChat.chat_ref%7CChat.page_url" id="TokenFields1859762360" autocomplete="off"><input type="hidden" name="data[_Token][unlocked]" value="" id="TokenUnlocked1228638438" autocomplete="off"></div></form>

				</div>
				<div id="srCloseOverlay">
					<div id="srCloseContent">
						<p>Are you sure you want to end this chat?</p>
						<div id="srCloseButtons">
							<div class="srCloseButton srYes">
								<p>Yes,</p>
								<p>end the chat</p>
							</div>
							<div class="srCloseButton srNo">
								<p>No,</p>
								<p>continue chatting</p>
							</div>
						</div>
					</div>
				</div>
			</div>
		
		<input type="hidden" name="data[agents]" id="agentsList" value="">		<input type="hidden" name="data[ami_agents]" id="amiAgentsList" value="">		<input type="hidden" name="data[ami_status]" id="amiAgentsStatus" value="0">		<input type="hidden" name="data[ic_chats]" id="icChats" value="0">		<input type="hidden" name="data[have_no]" value="0" id="srNoExists">		<input type="hidden" name="data[chat_dept]" id="chatDept">
	
	
	<div id="srCloseTrigger"></div>

	<audio id="chink" src="//app.meetami.ai/js/sound/what-another-message.mp3" preload="auto"></audio>

	<audio id="ttsPlaylist"></audio>

	
	
	<script>
	window.siteUrl = 'app.meetami.ai';
	var tts_empty_msg= 'Please help me by repeating your last message. ';
	var clientAutoSendTime = '5000';

	</script>

	<script type="text/javascript">

		var chatNonce = null;
		
		function CryptoJSAesEncrypt(passphrase, plain_text){
			if (typeof CryptoJS != "undefined") {
				var salt = CryptoJS.lib.WordArray.random(256);
				var iv = CryptoJS.lib.WordArray.random(16);
				//for more random entropy can use : https://github.com/wwwtyro/cryptico/blob/master/random.js instead CryptoJS random() or another js PRNG
				var key = CryptoJS.PBKDF2(passphrase, salt, { hasher: CryptoJS.algo.SHA512, keySize: 64/8, iterations: 999 });
				var encrypted = CryptoJS.AES.encrypt(plain_text, key, {iv: iv});
				var data = {
					vmq32pl13is59y2y9p8k6r24da71ixh1 : CryptoJS.enc.Base64.stringify(encrypted.ciphertext),
					t6zpdmxpyaqqqph4dmm4c80gz8y4y717 : CryptoJS.enc.Hex.stringify(salt),
					i6ypn35nhts5almxz0zgcqog9uf8sl5r : CryptoJS.enc.Hex.stringify(iv)
				}
				return JSON.stringify(data);
			} else {
				return plain_text;
			}
		}

		function CryptoJSAesDecrypt(passphrase,encrypted_json_string){
			if (typeof CryptoJS != "undefined") {
				var obj_json = JSON.parse(encrypted_json_string);
				var encrypted = obj_json.vmq32pl13is59y2y9p8k6r24da71ixh1;
				var salt = CryptoJS.enc.Hex.parse(obj_json.t6zpdmxpyaqqqph4dmm4c80gz8y4y717);
				var iv = CryptoJS.enc.Hex.parse(obj_json.i6ypn35nhts5almxz0zgcqog9uf8sl5r);   
				var key = CryptoJS.PBKDF2(passphrase, salt, { hasher: CryptoJS.algo.SHA512, keySize: 64/8, iterations: 999});
				var decrypted = CryptoJS.AES.decrypt(encrypted, key, { iv: iv});
				return decrypted.toString(CryptoJS.enc.Utf8);
			} else {
				return encrypted_json_string;
			}
		}

		if (typeof define === 'function' && define.amd) {
			requirejs(["//app.meetami.ai/js/socket-io.js"], function (io) {
				srRunWidget(io);
			});
		} else {
			srRunWidget(io);
		}

	 function srRunWidget(io) {
     var initPosn = $srJq('#srContent').css('position');
console.log('INIT POSN: ' + initPosn);
				$srJq(function($) {
			$srJq('meta[name=viewport]').first().replaceWith('<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">');
		});

		var client_ref = '302220474411';
		var auto_delay = '1';
		var character_count_threshold = '120';

		var domain_parts = window.location.hostname.split('.');
		var sub_domain = domain_parts.shift();
		var domain = domain_parts.join('.');
		if(domain == '' || domain.indexOf('.') < 1 || domain == 'co.uk' || domain == 'uk.com' || domain == 'org.uk'){
			domain = window.location.hostname;
		}
		if (domain != 'localhost'){
			domain = '.' + domain;
		}

		if(/Trident.*rv[ :]*11\./.test(navigator.userAgent) || /Edge\/\d./i.test(navigator.userAgent)) domain = "";

		var sr_data = {};

		var chat_dom = "<div id='srContentBoxShadow'></div><div id='srError'></div><div id='srMsgs' class=''>	<img src="//app.meetami.ai/img/core/bg/loading.gif" class="loading" alt="Loading..." /></div><form action="/chats/chat/302220474411" id="srChatForm" method="post" accept-charset="utf-8"><div style="display:none;"><input type="hidden" name="_method" value="POST"/><input type="hidden" name="data[_Token][key]" value="495e98ac2c96d14e5ad48d4dfaef5fc61679d15b2c1e6c7e33d4b591536957e8ab0d65a2540f984871382051716e8c76438cf9604e67429dd9fc1190ce1cfaf5" id="Token797660155" autocomplete="off"/></div>	<a href="#close" rel="srChatToggleMobile" class="srCloseMobile srMobileUx"></a>	<div id='srInputs' class='character-limit'>				<div class="input textarea"><textarea name="data[Chat][message]" id="srMsgSender" required="required" placeholder="Press [Enter] to send" maxlength="160" cols="30" rows="6"></textarea><div id="srMobileSendButton"></div></div>						<div id='character-message-container'><span id='character-count'>160</span> characters left</div>								</div>	<input type="hidden" name="data[Chat][page_url]" id="pageUrl"/>	<input type="hidden" name="data[Chat][chat_ref]" id="chat_ref"/><div style="display:none;"><input type="hidden" name="data[_Token][fields]" value="c374729fee45dc1849f4eb52024bc52e948cc4b5%3AChat.chat_ref%7CChat.page_url" id="TokenFields1859762360" autocomplete="off"/><input type="hidden" name="data[_Token][unlocked]" value="" id="TokenUnlocked1228638438" autocomplete="off"/></div></form>";

		var isMobileUx = window.outerWidth <= 736 ? true : false;
		var dismissTime = 10000; 		var dismissTimeouts = [];
		var isInputMsg = true;
		var filterFormSelectors = null;
		var srSwAutoTimer = false;
		var department_hours = [];

						department_hours[519] = {
					times: {
						opening: '',
						closing: '',
					},
					open: false,
					hasFutureHours: false
				}
				
		
		function srDisplayFailure () {
					}

		function srDisplaySuccess () {
					}

		function prepareMobileUxChatForm() {
			if (isMobileUx) {
				$srJq("#srContent").addClass("srMobileUxChatForm");
				$srJq("#srLaunchContainer").addClass("srMobileUxChatForm");
				$srJq("#srChatForm").find("input").off();
				$srJq("#srChatForm").find("input").on("keydown", function(e) {
					console.log(e.keyCode);
					if(e.keyCode == 13) {
						var params = $srJq('a[rel="srSubmitMessage"]').attr('name');
						if(typeof params != 'undefined'){
							submitMessage(params);
						} else {
							submitMessage();
						}
						$srJq("#srContent").removeClass("srMobileUxChatForm");
						$srJq("#srLaunchContainer").removeClass("srMobileUxChatForm");
					}
				});
			}
		}

		function bindChatMessageDraggable() {
			if(isMobileUx) {
				if($srJq("#srContent #srChatter #srMsgs").length == 0) return false;
				$srJq("#srContent #srChatter #srMsgs > p:not(.srDPQuestion) .srMsgInner, #srContent #srChatter #srMsgs > div:not(.srDPQuestion) .srMsgInner").draggable({
					axis: "x",
					containment: [
						$srJq("#srContent #srChatter #srMsgs").offset().left - 90,
						$srJq("#srContent #srChatter #srMsgs").offset().top,
						17,
						$srJq("#srContent #srChatter #srMsgs").offset().bottom
					],
					stop: function(event, ui) {
						if(parseInt(ui.helper.css("left").replace("px", "")) > -70) {
							var to = "0px";
						} else {
							var to = "-106px";
						}
						ui.helper.animate({
							left: to
						}, "fast");
					}
				});

				$srJq.fn.ignore = function(sel){
				  	return this.clone().find(sel||">*").remove().end();
				};

				$srJq("#srContent #srChatter #srMsgs .srDismiss").click(function() {
					var msgToDismiss = $srJq(this).parents(".srMsgInner").find(".srMsgInnerContent").ignore("span").text().trim();
					dismissUpToMsg(msgToDismiss);

					var elems = [];
					elems.push($srJq(this).parents(".srMsgInner").parent());
					$srJq(this).parents(".srMsgInner").parent().prevAll('div, p').each(function(index, value) {
						elems.push($srJq(value));
					});

					$srJq.each(elems, function(index, value) {
						$srJq(value).animate({
							opacity: 0
						}, 200, function() {
							$srJq(value).css("opacity", 1);
							$srJq(value).addClass("srDismissed");
						});
					});
				});
			}
		}

		function dismissSpecificMsg(msgToDismiss, noDismissPre) {
			var chat_ref = getChatId();
			var uncorruptedMsgToDismiss = msgToDismiss;
			if(msgToDismiss == "") return false;
			msgToDismiss = msgToDismiss.replace(/<(?:.|\n)*?>/gm, ''); 			msgToDismiss = msgToDismiss.replace(/(\r\n\t|\n|\r\t)/gm,'').replace(/[^a-zA-Z0-9 !?]+/g, ''); 			$srJq("#srMsgs").find(".srMsgInnerContent").each(function(index, value) {
				var msg = $srJq(value).find("p").ignore("span").text().trim();
				if(msg == "") {
					var msg = $srJq(value).find("p").text().trim();
				}
				msg = msg.replace(/<(?:.|\n)*?>/gm, ''); 				msg = msg.replace(/(\r\n\t|\n|\r\t)/gm,'').replace(/[^a-zA-Z0-9 !?]+/g, ''); 				if(msg == msgToDismiss) {
					$srJq(value).parents(".srMsgInner").parent().animate({
						opacity: 0
					}, 200, function() {
						$srJq(value).parents(".srMsgInner").parent().css("opacity", 1);
						$srJq(value).parents(".srMsgInner").parent().addClass("srDismissed");
					});
					$srJq(value).parents(".srMsgInner").parent().prevAll("p, div").animate({
						opacity: 0
					}, 200, function() {
						$srJq(value).parents(".srMsgInner").parent().prevAll("p, div").css("opacity", 1);
						$srJq(value).parents(".srMsgInner").parent().prevAll("p, div").addClass("srDismissed");
					});
				}
			});
			$srJq.ajax({
				url: "//app.meetami.ai/chats/dismiss_specific_msg/",
				type: "POST",
				data: {
					chat_ref: chat_ref,
					msg: uncorruptedMsgToDismiss
				},
				success: function(data) {
									}, error: function(e,f,g) {
					console.log(e);
				}
			});
		}

		function dismissUpToMsg(msg) {

			msg = msg.replace(/\\\//g, "/").replace("\"", "").replace("\"", "");
			console.log("dismissUpToMsg MSG: " + msg);
			var chat_ref = getChatId();

			$srJq.ajax({
				url: "//app.meetami.ai/chats/dismiss_up_to_msg/",
				type: "POST",
				data: {
					chat_ref: chat_ref,
					msg: msg
				},
				success: function(data) {
					console.log(data);
				}, error: function(e,f,g) {
					console.log(e);
				}
			});

		}

		var dismissRoundupInterval = false;

		function resizeIphone() {
			if(srIsiPhoneNoConfirm()) {
				$srJq("#srContent").css("max-height", $srJq(window).innerHeight());
			}
		}
		resizeIphone();

		$srJq(window).resize(function() {
			resizeIphone();
			var wasMobileUx = isMobileUx;
						isMobileUx = window.outerWidth <= 736 ? true : false;
			if(!wasMobileUx && isMobileUx) {
				console.log("was desktop, now mobile");
								convertMsgsMobileUx();
				bindChatMessageDraggable();
			} else if(wasMobileUx && !isMobileUx) {
				console.log("was mobile, now desktop");
								convertMsgsDesktop();
			}
		});

		function convertMsgsDesktop() {
			return;
			$srJq("#srContent #srChatter #srMsgs > p, #srContent #srChatter #srMsgs > div").each(function(index, value) {
				var html = $srJq(value).find(".srMsgInnerContent").find("p").first().html();
				$srJq(value).html(html);
			});
			scrollChat();
		}

		function convertMsgsMobileUx(checkExisting) {
			return;
			if($srJq("#srContent #srChatter #srMsgs > p, #srContent #srChatter #srMsgs > div").length > 0) {
				$srJq("#srRecordMobileUx").addClass("srStoppedRec");
			}
			$srJq("#srContent #srChatter #srMsgs > p, #srContent #srChatter #srMsgs > div").first().addClass("srInitialInstruction");
			$srJq("#srContent #srChatter #srMsgs > p, #srContent #srChatter #srMsgs > div").each(function(index, value) {
				$srJq(value).removeClass("srDPQuestionTempHidden");

				if($srJq(value).find(".srMsgInner").length == 0) {
					var feintClass = '';
					if($srJq(value).find(".feint").length > 0) {
						feintClass = 'feintMsg';
					}
					var html = $srJq(value).html();
					var newHtml = "<div class='srMsgInner " + feintClass + "'>";
						newHtml += "<div class='srMsgInnerContent'>";
							newHtml += "<div class='srInnerImg'></div>";
							newHtml += "<p>" + html + "</p>";
						newHtml += "</div>";
						if(!$srJq(value).hasClass("srDPQuestion")) {
							newHtml += "<div class='srDismiss'>";
								newHtml += "<div class='srDismissInner'>Dismiss</div>";
							newHtml += "</div>";
						}
					newHtml += "</div>";
					$srJq(value).html(newHtml);
					$srJq(value).find(".srMsgInnerContent").find("p").each(function(pindex, pvalue) {
						if($srJq(pvalue).html() == "") {
							$srJq(pvalue).remove();
						}
					});
					if($srJq(value).find(".avatar-mini.tt").length > 0) {
						$srJq(value).find(".srInnerImg").html($srJq(value).find(".avatar-mini.tt").html()).addClass('has-img');
					}
				}
			});
			if($srJq("#srContent #srChatter #srMsgs > p, #srContent #srChatter #srMsgs > div").last().hasClass("srDPQuestion")) {
				$srJq("#srContent #srChatter #srMsgs > p, #srContent #srChatter #srMsgs > div").last().removeClass("srDismissed");
			}
		}
		if(isMobileUx) {
			convertMsgsMobileUx();
		}

		bounceTimer = '';
				$srJq(function(){

			$srJq(".srTtsVolume .bar").click(function() {
				$srJq(".srTtsVolume .bar").removeClass("active");
				$srJq(this).addClass("active").prevAll(".bar").addClass("active");
				$srJq.cookie('sr-tts-volume', $srJq(this).data("tts-volume"));
				setTtsVolume();
			});

			var tts_volume = $srJq.cookie('sr-tts-volume');
			if(typeof(tts_volume) !== 'undefined') {
				$srJq(".srTtsVolume .bar[data-tts-volume='" + tts_volume + "']").trigger("click");
			}

			$srJq(".srTtsMute").click(function() {
				if($srJq(this).parent().hasClass("muted")) {
					$srJq(this).parent().removeClass("muted");
					setTtsVolume();
					$srJq.cookie('sr-tts-muted', 0, { path: '/' });
				} else {
					$srJq(this).parent().addClass("muted");
					setTtsVolume(0);
					$srJq.cookie('sr-tts-muted', 1, { path: '/' });
				}
			});

			var muted = $srJq.cookie('sr-tts-muted');
			if(typeof(muted) == "undefined" || muted == 1) {
				$srJq(".srTtsMute").addClass("muted");
				$srJq.cookie('sr-tts-muted', 1, { path: '/' });
				$srJq(".srTtsMute").parent().addClass("muted");
			}

			$srJq("#srMsgs").on('scroll', function() {
				if($srJq(this).scrollTop() == 0) {
				$srJq(".feedback-upper-container").addClass("scrolled-top");
				} else {
				$srJq(".feedback-upper-container").removeClass("scrolled-top");
				}
			});


						if (typeof bounceTimer == 'undefined' || bounceTimer == ''){
				bounceTimer = setInterval(function(){
					$srJq('a#srLaunch').effect('bounce', {times: 3}, 'slow');
				}, 25000);
			}

			scope = {
				chat: {
					functions: {
						unsentMessageInterval: null
					},
					hasUnknownQueries: false
				}
			};

			
						$srJq('#srImgMin').on('click', function(e) {
				e.preventDefault();
				sr_minimiseWelcomeImg();
			});

						enableChatForm('noFocus');

						var current_cookie = $srJq.cookie('sr-data');
			var current_session = $srJq.cookie('sr-cur');
			if(typeof current_cookie != 'undefined'){
				current_cookie = JSON.parse(current_cookie);
			}
			if(current_cookie !== undefined && typeof current_cookie['uid'] != 'undefined'){
				
				current_cookie['last_visit'] = new Date();
				current_cookie['page_no']++;
				if(current_session == undefined){
					if(typeof current_cookie['visit_no'] != 'undefined'){
						current_cookie['visit_no']++;
					} else {
						current_cookie['visit_no'] = 1;
					}
				}
				var visit_no = current_cookie['visit_no'];
								current_cookie = JSON.stringify(current_cookie);
				$srJq.cookie('sr-data', current_cookie, { expires: 30, path: '/', domain: domain });

			} else {
								var cookie_data = {
					first_visit: new Date(),
					last_visit: new Date(),
					uid: '',
					visit_no: 1,
					chat_no: 0,
					page_no: 1,
					device: '',
					browser: '',
					ip: '',
					os: '',
					platform: ''
				};
				var visit_no = 1;

								cookie_data = JSON.stringify(cookie_data);
				$srJq.cookie('sr-data', cookie_data, { expires: 30, path: '/', domain: domain });
			}

						if(current_session === undefined){
				$srJq.cookie('sr-cur', new Date(), { path: '/', domain: domain });
				var logon_time = new Date();
			} else {
				var logon_time = current_session;
			}

										checkExistingChats();
			
			var chat_auto_popup_image = "";
			var chat_auto_popup_image_dir = "";
			var chat_auto_popup_url = chat_auto_popup_image_dir + "/" + chat_auto_popup_image;

						var scrnWidth = getScreenWidth();


						
											$srJq('#liviLaunch').click(function(e){
					e.preventDefault();
					if($srJq(this)[0].hasAttribute("rel", "srMinToggle")) {
						minToggle();
					} else {
						chatToggle();
						$srJq(this).attr("rel", "srMinToggle");
					}
				});
			

						$srJq('div[rel="srChatToggle"], a[rel="srChatToggle"], *[rel="srChatToggle"]').on('click', function(e){
				e.preventDefault();
				var params = $srJq(this).attr('name');
				if(typeof params != 'undefined'){
					params = params.split(' ');
					if(params.length == 1){
						chatToggle(params[0]);
					} else if(params.length == 2){
						chatToggle(params[0], params[1]);
					} else if(params.length == 3){
						chatToggle(params[0], params[1], params[2]);
					} else if(params.length == 4){
						chatToggle(params[0], params[1], params[2], params[3]);
					}
				} else {
					chatToggle();
				}
			});

			$srJq(document).on('click','button[rel="srTriggerCallWrapper"]',function(e){
				e.preventDefault();
				var params = $srJq(this).attr('name');
				

				if(typeof params != 'undefined'){
					params = params.split(' ');


					if(params.length == 1){
						triggerCallWrapper(params[0]);
					} else if(params.length == 2){
						triggerCallWrapper(params[0], params[1]);
					} else if(params.length == 3){
						triggerCallWrapper(params[0], params[1], params[2]);
					} else if(params.length == 4){
						triggerCallWrapper(params[0], params[1], params[2], params[3]);
					}
				} else {
					triggerCallWrapper();
				}
			});

						$srJq('a[rel="srSubmitForm"]').off('click');
			$srJq('a[rel="srSubmitForm"]').click(function(e){
				e.preventDefault();
				var params = $srJq(this).attr('name');
				if(typeof params != 'undefined'){
					submitForm(params);
				} else {
					submitForm();
				}
			});

						$srJq('a[rel="srEndReplierChat"]').off('click');
			$srJq('a[rel="srEndReplierChat"]').click(function(e){
				e.preventDefault();
				var params = $srJq(this).attr('name');
				if(typeof params != 'undefined'){
					params = params.split(' ');
					if(params.length == 1){
						endReplierChat(params[0]);
					} else if(params.length == 2){
						endReplierChat(params[0], params[1]);
					}
				} else {
					endReplierChat();
				}
			});

						sr_loadResponseTimer();

						scope.chat.functions.unsentMessageInterval = setInterval(saveUnsentMessage, 1000);

		});

				$srJq( document ).ajaxComplete(function() {
			triggerListeners();
		});

		function triggerListeners(){

			$srJq("body").off("click", ".srCancelAppt");
			$srJq("body").on("click", ".srCancelAppt", function() {
				$srJq("#srContent .feedback-prechat-container").removeClass("cc-exists");
				handleCancelAppt($srJq(this).data("value"));
			});


			$srJq("#srMsgs").on('scroll', function() {
				if($srJq(this).scrollTop() == 0) {
					$srJq(".feedback-upper-container").addClass("scrolled-top");
				} else {
				$srJq(".feedback-upper-container").removeClass("scrolled-top");
				}
			});

						$srJq('div[rel="srChatToggle"], a[rel="srChatToggle"], *[rel="srChatToggle"]').off('click');
			$srJq('div[rel="srChatToggle"], a[rel="srChatToggle"], *[rel="srChatToggle"]').click(function(e){
				if(typeof(e.originalEvent.detail) !== "undefined" && e.originalEvent.detail != 1 && !navigator.userAgent.match(/Trident.*rv\:11\./)) {
					return false;
				}
				e.preventDefault();
				var params = $srJq(this).attr('name');
				if(typeof params != 'undefined'){
					params = params.split(' ');
					if(params.length == 1){
						chatToggle(params[0]);
					} else if(params.length == 2){
						chatToggle(params[0], params[1]);
					} else if(params.length == 3){
						chatToggle(params[0], params[1], params[2]);
					} else if(params.length == 4){
						chatToggle(params[0], params[1], params[2], params[3]);
					}
				} else {
					chatToggle();
				}
			});

			$srJq('*[rel="srChatToggleMobile"]').off('click');
			$srJq('*[rel="srChatToggleMobile"]').click(function(e){
				if (isMobileUx) {
					if (confirm('Are you sure you wish to end this chat?')) {
												closeReplier();
												$srJq("#srRecordMobileUx").attr('class', '');
					}
				}
			});

						$srJq('button[rel="srTriggerCallWrapper"]').off('click');
			$srJq('button[rel="srTriggerCallWrapper"]').click(function(e){
				e.preventDefault();
				var params = $srJq(this).attr('name');
				if(typeof params != 'undefined'){
					params = params.split(' ');
					if(params.length == 1){
						triggerCallWrapper(params[0]);
					} else if(params.length == 2){
						triggerCallWrapper(params[0], params[1]);
					} else if(params.length == 3){
						triggerCallWrapper(params[0], params[1], params[2]);
					} else if(params.length == 4){
						triggerCallWrapper(params[0], params[1], params[2], params[3]);
					}
				} else {
					triggerCallWrapper();
				}
			});

						$srJq('a[rel="srSubmitFeedback"]').off('click');
			$srJq('a[rel="srSubmitFeedback"]').click(function(e){
				e.preventDefault();
				if($srJq(this).hasClass("during")) {
					var during = true;
				} else {
					var during = false;
				}
				submitFeedback(during);
			});

			$srJq('a[rel="srBackToChat"]').off('click');
			$srJq('a[rel="srBackToChat"]').click(function() {
				$srJq('#srChatter').html(chat_dom);
				$srJq('#srLaunchContainer').removeClass('srInFeedbackState');
				$srJq(".footerRate button").prop("disabled", false);
				checkExistingChats();
			});

			$srJq(".footerRate button").off('click');
			$srJq(".footerRate button").click(function(e) {
				e.preventDefault();
				if($srJq(this).prop("disabled") == "disabled") return;
				$srJq(this).prop("disabled", "disabled");
				var chat_ref = getChatId();
				chat_dom = $srJq("#srChatter").html();
	            				$srJq.ajax({
					type: "GET",
					url: "//app.meetami.ai/feedback/create/" + chat_ref + "/0/" + 1,
					success: function(feedback_form) {
						$srJq('#srChatter').html(feedback_form);
						$srJq('#srLaunchContainer').addClass('srInFeedbackState');
						populate_feedback_callback_form();
					},
					error: function(errorThrown) {
						console.log(errorThrown);
					}
				});
			});

						$srJq('*[rel="srMinToggle"]').off('click');
			$srJq('*[rel="srMinToggle"]').click(function(e){
				e.stopPropagation();
				e.preventDefault();
				minToggle();
			});

						$srJq('a[rel="srCloseLayer"]').off('click');
			$srJq('a[rel="srCloseLayer"]').click(function(e){
				e.preventDefault();
				var params = $srJq(this).attr('name');
				if(typeof params != 'undefined'){
					closeLayer(params);
				} else {
					closeLayer();
				}
			});

						$srJq('a[rel="srSubmitForm"]').off('click');
			$srJq('a[rel="srSubmitForm"]').click(function(e){
				e.preventDefault();
				var params = $srJq(this).attr('name');
				if(typeof params != 'undefined'){
					submitForm(params);
				} else {
					submitForm();
				}
			});

						$srJq('a[rel="srSubmitMessage"]').off('click');
			$srJq('a[rel="srSubmitMessage"]').click(function(e){
				e.preventDefault();
				var params = $srJq(this).attr('name');
				if(typeof params != 'undefined'){
					submitMessage(params);
				} else {
					submitMessage();
				}
			});

						
						$srJq('a[rel="srEndReplierChat"]').off('click');
			$srJq('a[rel="srEndReplierChat"]').click(function(e){
				e.preventDefault();
				var params = $srJq(this).attr('name');
				if(typeof params != 'undefined'){
					params = params.split(' ');
					if(params.length == 1){
						endReplierChat(params[0]);
					} else if(params.length == 2){
						endReplierChat(params[0], params[1]);
					}
				} else {
					endReplierChat();
				}
			});
		}



		function trackCallTrigger(client_ref, phone_no){

			var userRef = getUsrId();

			$srJq.ajax({
				type: "GET",
				url: "//app.meetami.ai/chats/track_an_action/" + client_ref + '/' + userRef + "/call_trigger/call",
				success: function(data) {
					window.location = "tel:" + phone_no;
				}, error: function(){
					window.location = "tel:" + phone_no;
				}
			});

		}

		$srJq.fn.hasScrollBar = function() {
      if(typeof(this.get(0)) !== "undefined") {
      	return this.get(0).scrollHeight > this.innerHeight();
      }
      return false;
	   }

				$srJq(window).resize(function() {
			msgHeight(10, function(){});
		});

		function mobileBtn(){

						var winWidth = getScreenWidth();
			if(winWidth < 720){

				var uid = '';
				uid = getUsrId();

				$srJq('#srChatNowSrch').attr('href','https://app.meetami.ai/chats/chat/302220474411/mob/' + uid).attr('rel', '').attr('target', '_blank');
				$srJq('#srRLSrch').closest('a').attr('href','https://app.meetami.ai/chats/chat/302220474411/mob/' + uid).attr('rel', '').attr('target', '_blank');
				$srJq('#srRL').closest('a').attr('href','https://app.meetami.ai/chats/chat/302220474411/mob/' + uid).attr('rel', '').attr('target', '_blank');
				oldSiteHack();
			} else {
				$srJq('#srChatNowSrch').attr('href','#chat').attr('rel', 'srChatToggle').attr('name', "coverhide SL-btn").attr('target', '');
				$srJq('#srRLSrch').closest('a').attr('href','#chat').attr('rel', 'srChatToggle').attr('name' , "coverhide SL-btn").attr('target', '');
				$srJq('#srRL').closest('a').attr('href','#chat').attr('rel', 'srChatToggle').attr('name', "coverhide RL-btn").attr('target', '');
				oldSiteHack();
			}
		}

		

		function imgToTxtHeader(block_mob, block_store){
			$srJq('#minIHBtn').hide();
			$srJq('#srContent #srIcon').attr('class', '');
			$srJq('#mobChatBtn').remove();
			if(typeof block_mob == 'undefined' || block_mob != 1){
				$srJq('#srContent #srHeader h4 > a#imageHeader').html('Chat<span class="mobHide il"> with us</span>').attr('class', '').attr('id', '');
			} else if (typeof block_mob != 'undefined' || block_mob == 1) {
				$srJq('#srContent #srHeader h4 > a#imageHeader').html('Chat').attr('class', '').attr('id', '');
			}
			$srJq('#srContent #srHeader').css("background", "#d7061b url('//app.meetami.ai/img/core/bg/overlay.png') center bottom repeat-x" );
									if(typeof block_store == 'undefined' || block_store != 1){
				$srJq.cookie('srIMin', 1, { path: '/', domain: domain });
			}
		}

		function sr_getCurrentUnreadMessages() {
			return parseInt($srJq('#srUnreadCount').html());
		}

		function sr_updateUnreadMessages(count) {
			if(count < 1) {
				$srJq('#srUnreadCount').hide();
			} else {
				$srJq('#srUnreadCount').show();
			}
			$srJq('#srUnreadCount').html(count);
		}

		function sr_incrementUnreadMessages() {
			var currentCount = sr_getCurrentUnreadMessages();
			sr_updateUnreadMessages(currentCount+1);
		}

		function sr_markMessagesRead(override) {

			if (typeof override == 'undefined') { var override = 0; }

			var currentCount = sr_getCurrentUnreadMessages();
			if(currentCount > 0 || override == 1) {

								if(typeof chat_ref == 'undefined'){
					var chat_ref = getChatId();
				}

				$srJq.ajax({
					type: "GET",
					url: "//app.meetami.ai/chats/mark_read/" + client_ref + "/" + chat_ref,
					success: function(data) {
											}
				});

				sr_updateUnreadMessages(0);
			}
		}

		function sr_isChatOpen() {
			return $srJq('#srContent').css('display') != 'none';
		}

		function sr_showPreviewMessage(msg, imgUrl) {
			var truncatedMsg = sr_truncate.apply(msg, [35,true]);
			$srJq('#srPreviewMessage p').html(truncatedMsg);

			if(imgUrl) {
				$srJq('#srPreviewMessage .avatar-preview').removeClass('avatar-default');
				$srJq('#srPreviewMessage .avatar-preview img').attr('src',imgUrl);
			} else {
				$srJq('#srPreviewMessage .avatar-preview').addClass('avatar-default');
				$srJq('#srPreviewMessage .avatar-preview img').attr('src','//app.meetami.ai/img/widget/mini-avatar-lrg.png');
			}

			$srJq('#srPreviewMessage').show();

			var showForMillis = 20 * 1000;
			setTimeout(sr_removePreviewMessage, showForMillis);
		}

		function sr_removePreviewMessage() {
			$srJq('#srPreviewMessage').hide();
			$srJq('#srPreviewMessage p').html('');
		}

		function sr_truncate(n, useWordBoundary) {
			var isTooLong = this.length > n,
				s_ = isTooLong ? this.substr(0,n-1) : this;
				s_ = (useWordBoundary && isTooLong) ? s_.substr(0,s_.lastIndexOf(' ')) : s_;
			return  isTooLong ? s_ + '&hellip;' : s_;
		}

		function sr_showWelcomeImage(img) {
			$srJq(".srWelcomeImage > img").attr("src", img);
			$srJq(".srWelcomeImage").slideDown(350);
		}

		function sr_minimiseWelcomeImg () {
			$srJq('.srWelcomeImage').slideUp(200);
						$srJq.cookie('sr-cl', 1, { path: '/', domain: domain });
		}

		$srJq(".srWelcomeImage img").click(function() {
			$srJq(".srWelcomeImage").hide();
			$srJq('#srContent, #srLaunchContainer').addClass('srWelcomeMessage');
			chatToggle();
			$srJq('#srLaunch').show();
			$srJq('#srContent .loading').hide();
		});

		var check_existing_interval = null;

		function sr_showWelcomeMessage() {
			$srJq('#srContent, #srLaunchContainer').addClass('srWelcomeMessage');
			checkExistingChats('undefined', function() {
				chatToggle(undefined, undefined, undefined, undefined, true);
				check_existing_interval = setInterval(function() {
					checkExistingChats('undefined');
				}, 3000);
			});
						$srJq('#srLaunch').show();
			$srJq('#srContent .loading').hide();
		}

		function sr_removeWelcomeMessage() {
			$srJq('#srContent, #srLaunchContainer').removeClass('srWelcomeMessage');
		}

		function sr_isWelcomeMessageOpen() {
			return $srJq('.srWelcomeMessage').length ? true : false;
		}

				$srJq( document ).ajaxComplete(function() {
			$srJq('#srMsgSender').off('keydown');
			$srJq('#srMsgSender').off('focusout');
			trackTyping();
			$srJq('#srMsgSender').keydown(function(event) {
				if (event.keyCode == 13 && !event.ctrlKey && !event.metaKey) {
										if(sr_isWelcomeMessageOpen()) {
													sr_removeWelcomeMessage();
											}

										if(isMobileUx && $srJq("#srMsgs").find(".srResponseEditInput").length > 0 && $srJq("#srMsgs").find(".srResponseEditInput").prop("disabled") == false) {
						console.log("Not autosending msg..");
						if (isMobileUx && $srJq('#srChatter').hasClass('delayed-creation')) {
							$srJq('#srMsgSender').blur();
						}
					} else {
						if (!isMobileUx || !$srJq('#srChatter').hasClass('delayed-creation')) {
							submitMessage();
						} else if (isMobileUx && $srJq('#srChatter').hasClass('delayed-creation')) {
							$srJq('#srMsgSender').blur();
						}
					}
				} else if (event.keyCode == 13 && (event.ctrlKey || event.metaKey)) {
					var curVal = $srJq('#srMsgSender').val();
					$srJq('#srMsgSender').val(curVal + "\r\n");
				}
			});
			
											var winWidth = getScreenWidth();
				if(winWidth < 720){
					$srJq('#srMsgSender').focusout(function(event) {
						submitMessage();
					});
				}
					});

		function disableScrollify() {
			if(jQuery && jQuery.scrollify && $srJq(window).width() <= 720) {
				jQuery.scrollify.disable();
				console.log("Disabling scrollify..");
			}
		}

		function enableScrollify() {
			if(jQuery && jQuery.scrollify && $srJq(window).width() <= 720) {
				jQuery.scrollify.enable();
				console.log("Enabling scrollify..");
			}
		}

		var minBtn = '<a href="#chat" rel="srMinToggle" id="srMin" class="srMin"> </a>';
		var smlBtn = '';'';
		var lrgBtn = '';'';
		var cloBtn = '<a href="#close" rel="srChatToggle" class="srClose"> </a>';

		function chatToggle(hideCover, transfer_type, block_msg, triggerCallback, delay_creation, is_prompt, override_msg){

						var status = $srJq('#srContent').css('display');
			var fb_status = $srJq('#srChatter').attr('class');

						var btn = 0;
			if(transfer_type == 'SL-btn' || transfer_type == 'RL-btn'){
				transfer_type = transfer_type.replace('-btn', '');
				var btn = 1;
			}
			if(typeof is_prompt == 'undefined') is_prompt = null;
			if(typeof override_msg == 'undefined') override_msg = null;
						if(status == 'none'){
																																		if(typeof transfer_type == 'undefined'){
					createChat(undefined, undefined, undefined, delay_creation);
				} else if(transfer_type == 'BL' || transfer_type == 'RL-reply' || transfer_type == 'RL'){
					createChat(transfer_type, block_msg, triggerCallback, null, null, null, is_prompt, override_msg);
				} else {
					if(typeof block_msg != 'undefined'){
						if(typeof triggerCallback != 'undefined'){
							createChat(transfer_type, block_msg, triggerCallback);
						} else {
							createChat(transfer_type, block_msg);
						}
					} else {
						createChat(transfer_type);
					}
				}
								setTimeout(function(){
					$srJq('#srMsgSender').prop('disabled', false);
				}, 1000);
			} else if(status == 'block' && fb_status == 'srFeedback') {
								closeReplier();
				setTimeout(function(){
					$srJq('#srMsgSender').prop('disabled', false);
					$srJq('#srMsgSender').blur();
				}, 1000);
			} else {
												setTimeout(function(){
					$srJq('#srMsgSender').prop('disabled', true);
					$srJq('#srMsgSender').blur();
				}, 1000);
				endReplierChat();
			}

			// If this is from a recovery layer then close the cover
			if(typeof hideCover != 'undefined' && hideCover == 'coverhide'){
				// Check for type (recovery layer or search layer)
				if (transfer_type == 'RL' && btn == 1){
					trackAction('RecoveryLayer', 'chat');
				} else if (transfer_type == 'SL' && btn == 1) {
					trackAction('SearchLayer', 'chat');
				}
				$srJq('#srCover .srCoverContent').slideUp(200);
				$srJq('#srCover').fadeOut(650);
				$srJq('#srCoverRecovery .srCoverContentRecovery').slideUp(200);
				$srJq('#srCoverRecovery').fadeOut(650);
			}
		}

				function sizeToggle(){
					}

		$srJq(window).on('resize', function(){
		 srSnapToDesktop();
		});

		function srSnapToDesktop () {
			if (!isMobileUx && !isHiddenTrigger) {
				$srJq('#srContent').css({ 'height':'', 'bottom':'', 'width':'', 'margin':''});
				$srJq('#srLaunchContainer').show();
			} else {
				var contentDisplayed = $srJq('#srContent').css('display');
				if (contentDisplayed == 'block') {
					$srJq('#srLaunchContainer').hide();
				}
			}
			toggleBarForScreenSize();
		}

		function toggleBarForScreenSize ( ) {
						if (!isMobileUx && !isHiddenTrigger) {
				var isMinimised = $srJq('#srContent').hasClass('mobileMin');
				if (isMinimised) {
					$srJq('#srContent').hide();
					$srJq('#srContent #srHeader').css('cursor', 'default').off('click');
					triggerListeners();
					$srJq('#srContent').removeClass('mobileMin');
					$srJq('#srLaunchContainer a#srLaunch').show();
				}
			} else {
				var isMinimised = ( $srJq('#srContent').css('display') == 'none' && $srJq('#srLaunchContainer').attr('rel') == 'srMinToggle' );
				if (isMinimised) {
					$srJq("#srContent").show();
					setTimeout(function(){
						$srJq('#srContent #srHeader h4 #srMenu').html(minBtn + cloBtn);
						$srJq("#srMin").css({ transform: "rotateX(180deg)" });
						toggleBarClickability(true);
						$srJq('#srContent').addClass('mobileMin');
						triggerListeners();
						setTimeout(function(){
							var srContentHeight = $srJq("#srContent").outerHeight();
							var srHeaderHeight = $srJq("#srContent #srHeader").outerHeight();
							$srJq("#srContent").css({
								bottom: "-" + (srContentHeight - srHeaderHeight) + "px",
								width: "90%",
								margin: "0% 5%"
							});

						}, 10);
					}, 5);
				}
			}
		}

		function toggleBarClickability ( makeClickable ) {
			if (isMobileUx) {
				if (makeClickable === true) {
					$srJq('.srClose').fadeOut(125);
					$srJq('#srContent #srHeader').css('cursor', 'pointer');
					$srJq('#srContent #srHeader').on('click', function(e){
						e.preventDefault();
						minToggle();
					});
				} else {
					$srJq('.srClose').fadeIn(125);
					$srJq('#srContent #srHeader').css('cursor', 'default');
					$srJq('#srContent #srHeader').off('click');
				}
			}
		}

					var isHiddenTrigger = true;
					
				function minToggle( ){

			var openstatus = $srJq('#srContent').css('display');
			if(!isMobileUx) {
															if($srJq('#srContent').hasClass('mobileMin')) {
							sr_markMessagesRead();
							sr_removePreviewMessage();
							toggleBarClickability(false);
							$srJq.cookie('srMin', 0);
							$srJq("#srContent").animate({
								bottom: "0px"
							}, function() {
								$srJq('#srContent').removeClass('mobileMin');
								$srJq("#srMin").css({
									transform: "rotateX(0deg)"
								});
							});
							$srJq(".srClose").fadeIn(250);
						} else {
							var srContentHeight = $srJq("#srContent").outerHeight();
							$srJq.cookie('srMin', 1);
							$srJq("#srContent").animate({
								bottom: "-" + (srContentHeight - 41) + "px"
							}, function() {
								$srJq("#srMin").css({
									transform: "rotateX(180deg)"
								});
								$srJq('#srContent').addClass('mobileMin');
							});
							$srJq(".srClose").fadeOut(250);
						}
						return;
												} else {
				var mobileOpenStatus = $srJq('#srContent').css("width");
			}
			if(openstatus == 'none' || (isMobileUx && $srJq('#srContent').hasClass('mobileMin'))){
				console.log('Opening');

				sr_markMessagesRead();
				sr_removePreviewMessage();
				toggleBarClickability(false);

				$srJq.cookie('srMin', 0);
				if(isMobileUx) {
					$srJq("#srContent").animate({
						bottom: "0px"
					}, function() {
						$srJq("#srContent").animate({
							width: "98%",
							margin: "0% 1%"
						});
						$srJq('#srContent').removeClass('mobileMin');
						$srJq("#srMin").css({
							transform: "rotateX(0deg)"
						});
					});
					return;
				}

								$srJq('#srContent #srHeader h4 #srMenu').html(minBtn + cloBtn);
				$srJq('#srContent #srHeader h4 > a').attr('rel', 'srChatToggle');
												triggerListeners();
				scrollChat();
				disableScrollify();
			} else {
				console.log('Minimising');
				if(sr_isWelcomeMessageOpen()) {
					closeReplier();
				} else {
										toggleBarClickability(true);
					$srJq('#srLaunchContainer').attr('rel', 'srMinToggle');
																	$srJq('#liviLaunch').attr("rel", "srMinToggle");
					
					$srJq.cookie('srMin', 1);
					if(isMobileUx) {
						var srContentHeight = $srJq("#srContent").outerHeight();
						$srJq("#srContent").animate({
							bottom: "-" + (srContentHeight - 41) + "px"
						}, function() {
							$srJq("#srContent").animate({
								width: "90%",
								margin: "0% 5%"
							});
							$srJq("#srMin").css({
								transform: "rotateX(180deg)"
							});
							$srJq('#srContent').addClass('mobileMin');
						});
						return;
					}

					$srJq('#srContent #srHeader h4 #srMenu').html('');
																										triggerListeners();
									}
				enableScrollify();
			}
				}

				function openReplier (override) {

			var is_open = $srJq.cookie('srMin');
			if(typeof override == 'undefined'){
				override = 0;
			}
			var contentDisplay = $srJq('#srContent').css('display');
						if(typeof is_open == 'undefined' || is_open == 0 || override == 1){
				disableScrollify();
				if($srJq('#minIHBtn').length == 1){
					$srJq('#minIHBtn').hide();
				}
									$srJq('#srContent').slideDown(350);
								$srJq('#srContent #srHeader h4 #srMenu').html(minBtn + cloBtn);
				$srJq('#srContent #srHeader h4 > a').attr('rel', '');
			} else {
							}
			$srJq('#srLaunchContainer').attr('rel', 'srMinToggle');
											$srJq('#liviLaunch').attr("rel", "srMinToggle");
						clearInterval(bounceTimer);

			if (isMobileUx || isHiddenTrigger == 1) {
				var min = $srJq.cookie('srMin');
				if(min == 1) {
										var srContentHeight = $srJq('#srContent').outerHeight();
					if(isHiddenTrigger) {
						$srJq('#srContent').css({
							display: "block",
							bottom: "-" + (srContentHeight - 41) + "px"
						});
						$srJq(".srClose").fadeOut(250);
					} else {
						$srJq('#srContent').css({
							display: "block",
							bottom: "-" + (srContentHeight - 41) + "px",
							width: "90%",
							margin: "0% 5%"
						});
					}
					$srJq('#srContent').addClass('mobileMin');
					$srJq('#srContent #srHeader h4 #srMenu').html(minBtn + cloBtn);
					$srJq("#srMin").css({
						transform: "rotateX(180deg)"
					});
					toggleBarClickability(true);
				}
				$srJq('#srLaunchContainer').fadeOut(250);
			}

						if ($srJq('#srUnreadCount').length) {
				var openState = sr_isChatOpen();
				if(openState === true){
					$srJq('#srUnreadCount').hide().html(0);
				}
			}
		}

		function closeReplier(leave_chat_cookie){

			if(sr_isWelcomeMessageOpen()) {
				setTimeout(function(){
					sr_removeWelcomeMessage();
				}, 1200);
			}

							$srJq('#srContent').slideUp(300);
						if(isMobileUx) {
				$srJq('#srLaunchContainer').fadeIn(250);
								setTimeout(function(){
					$srJq('#srLaunchContainer').fadeIn(250);
				}, 1250);
			}
			$srJq('#srContent #srHeader h4 a').attr('class', '');
			$srJq('#srChatter').attr('class', '');
			$srJq('#srContent #srHeader h4 > a').attr('rel', 'srChatToggle').attr('class', 'theHeader');
			$srJq('#srContent #srHeader h4 a#mobChatBtn').attr('class', 'mobOnly');
			closeEnd(leave_chat_cookie);
      		$srJq('#srLaunchContainer').attr('rel', 'srChatToggle');
			if (isMobileUx || $srJq('#srContent .srCloseMobile.srMobileUx').css('display') == 'block') {
				$srJq('#srContent .srCloseMobile.srMobileUx').fadeOut(150);
			}
						$srJq.ajax({
				type: "POST",
				url: "//app.meetami.ai/chats/chat/" + client_ref + "/empty",
				data: {
					page_url: window.location.href
				},
				success: function(data) {
					$srJq('#srChatter').html(data);
																	$srJq('#liviLaunch').attr("rel", "srChatToggle");
															if ( typeof bounceTimer == 'undefined' ){
						bounceTimer = setInterval(function(){
							$srJq('a#srLaunch').effect('bounce', {times: 3}, 'slow');
						}, 25000);
					}
				}
			});
						$srJq('#chatDept').val('');
			enableScrollify();
			toSimpleForm(1);
		}

		function closeEnd(leave_chat_cookie){
						var chat_ref = $srJq.cookie('sr-ec');
			if(chat_ref != undefined){
				if(typeof(leave_chat_cookie) == "undefined") $srJq.removeCookie('sr-ec', { path: '/', domain: domain });
				$srJq.removeCookie('srMin');
								endLiveChat(chat_ref);
			}
			srClearFrame();
		}

		function saveUnsentMessage() {

			clearInterval(check_existing_interval);

						if(sr_isWelcomeMessageOpen()) {
				return;
			}

			currentMsg = $srJq('#srMsgSender').val();
			if(currentMsg == null || currentMsg == scope.chat.savedMessage) {
								return;
			}
			scope.chat.savedMessage = currentMsg;

			var chat_ref = $srJq('#chat_ref').val();
			var current_cookie = $srJq.cookie('sr-data');

			if(typeof current_cookie != 'undefined'){
				current_cookie = JSON.parse(current_cookie);
			} else {
								return;
			}

			var userId = current_cookie['uid'];
			var data = {
				msg: currentMsg,
				chatId: chat_ref,
				userId: userId
			}

			var url = "//app.meetami.ai/unsent_messages/save_user_message/" + data.chatId;

			$srJq.ajax({
				url: url,
				type: "POST",
				data: data,
				success: function(data) {
									}, error: function(e,f,g) {
					console.log(e);
				}
			});
		}

		var ttsPlaylist = [];
		var ttsAudio = document.getElementById("ttsPlaylist");
		var ttsAudioPlaying = false;
		var ttsInitiated = false;
		var msgsToRemove = [];
		ttsAudio.onended = function() {
			console.log("AUDIO ENDED");
			console.log("ttsPlaylist");
			console.log(ttsPlaylist);
						if(ttsPlaylist.length > 0) {
				playTtsAudio(ttsPlaylist[0].src, ttsPlaylist[0].delay, true);
				msgRemoveElem = ttsPlaylist[0].msgElem;
				ttsPlaylist.shift();
			} else {
				ttsAudioPlaying = false;
			}
		}

		$srJq("body").on("click", "#srRecordMobileUx", function() {
			if(ttsInitiated == false) {
				ttsAudio.src = '//app.meetami.ai/audio/silence.mp3';
				ttsAudio.volume = 0;
				ttsAudio.load();
				ttsAudio.play();
				setTtsVolume();
				ttsInitiated = true;
			}
		});

		$srJq("body").on("click", "#srHeader", function() {
			$srJq("#srMsgSender").prop("disabled", false).focus();
		});

		function checkRecentMsgHeight() {
			if($srJq("#srChatForm.details").length > 0) {
				$srJq("#srContent").css("height", "100%");
				$srJq("#srMsgs").css({
					maxHeight: ($srJq("#srContent").outerHeight() - 195) + "px"
				});
				return;
			}
					}


		function handleTts(message, doNotBlock) {
			if(isMobileUx) {
				checkRecentMsgHeight();
        msgHeight(50, function(){});
				convertMsgsMobileUx();
				bindChatMessageDraggable();
			}
							return;
					}

		
		function setTtsVolume(override) {
			if(typeof(ttsAudio) === "undefined") return;
			if(typeof(override) !== "undefined") {
				var volumePercentage = override;
			} else {
				var volumePercentage = $srJq.cookie('sr-tts-volume');
			}
			if(typeof(volumePercentage) === "undefined") {
				volumePercentage = 60;
			}
			ttsAudio.volume = volumePercentage / 100;
		}

				function adjustTtsVolume (unMute, volume, override) {

						if(!isMobileUx) {
				var volumePercentage = $srJq.cookie('sr-tts-volume');
				var volumeMute = $srJq.cookie('sr-tts-muted');

								if (typeof volumePercentage == 'undefined' || (typeof override != 'undefined' && override === true) ) {

					if (typeof volumeMute != 'undefined' && volumeMute == 1 && unMute === true) {
						$srJq.cookie('sr-tts-volume', volume);
						$srJq.cookie('sr-tts-muted', 0, { path: '/' });
						$srJq('.srTtsMute').parent().removeClass("muted");
						colourActiveVolumeBars(volume);
					} else if (typeof volumeMute != 'undefined' && volumeMute == 0 && unMute === false) {
						$srJq('.srTtsMute').parent().addClass("muted");
						setTtsVolume(0);
						$srJq.cookie('sr-tts-muted', 1, { path: '/' });
					}

				}

			}
		}

		function colourActiveVolumeBars (volume) {
			var options = [20, 40, 60, 80, 100];
			for (var i in options) {
				if (options[i] <= volume) {
					$srJq('.srTtsControls .srTtsVolume div.bar[data-tts-volume=' + options[i] + ']').addClass('active');
				} else {
					$srJq('.srTtsControls .srTtsVolume div.bar[data-tts-volume=' + options[i] + ']').removeClass('active');
				}
			}
		}

		var played = [];

		function playTtsAudio(src, delay, nextTriggered, overrideBlockPlayed) {
			if(typeof(overrideBlockPlayed) === "undefined" || overrideBlockPlayed === false) {
				if($srJq.inArray(src, played) != -1) {
					console.log("SRC IS IN PLAYED, RETURNING FALSE");
					return false;
				}
			}
			ttsAudio.src = src;
			ttsAudio.load();
			if(isMobileUx) {
				setTtsVolume(60);
			} else {
				setTtsVolume();
			}
			if(nextTriggered) {
				console.log("NEXT TRIGGERED");
				ttsAudio.play();
				played.push(src);
				ttsAudioPlaying = true;
			} else {
				console.log("SETTING DELAY FOR NEXT ITEM IN PLAYLIST");
									ttsAudio.play();
					played.push(src);
					ttsAudioPlaying = true;
							}
		}

				function createChat(transfer_type, block_msg, callback, delay_creation, delay_callback, delay_argument, is_prompt, override_msg){

			$srJq('#amiAgentsStatus').val(0);

    		checkExistingChats('undefined', function() {

										played = [];

    			var current_cookie = $srJq.cookie('sr-act');
    			if(typeof current_cookie != 'undefined') {
    				$srJq.removeCookie('sr-act', { path: '/', domain: domain });
    			}

    			var client_ref = '302220474411';
    			var agents = $srJq('#agentsList').val();
    			if(agents == ''){
    				agents = 'none'
    			}
    			var icChats = $srJq('#icChats').val();

    			openReplier(1);

					if(isMobileUx) {
						$srJq(".srRecordMobileUx").addClass("srStoppedRec");
					}

					
    			    			var usr_cookie = $srJq.cookie('sr-data');
    			uid = '';
    			if(usr_cookie !== undefined){
    				usr_details = JSON.parse(usr_cookie);
    				if(usr_details['uid'] != '' && usr_details['uid'] != undefined){
    					uid = usr_details['uid'];
    				}
    			} else {
    				    				$srJq.cookie('sr-lc', 1, { path: '/', domain: domain });
    				window.location.reload();
    			}

    			    			if(typeof block_msg == 'undefined'){
    				block_msg = '';
				}
				

    			if(typeof callback == 'undefined'){
    				callback = 0;
    			}

    			    			
				if(delay_creation) {
					$srJq("#srChatter").addClass("delayed-creation");
					if(isMobileUx) {
						$srJq("#srRecordMobileUx").addClass("srProcessing");
					}

					var langauge = getLanguage();

					$srJq.ajax({
	    			type: "GET",
	    			url: "//app.meetami.ai/chats/autochat_popup_data/" + client_ref+'/'+ language,
	    			success: function(data) {

							dataObj = JSON.parse(data);
							var image = srSetHeaderImage(dataObj, block_msg, false);
														dataObj = checkForWelcome(dataObj);
							timeDelay = dataObj.welcome.length * auto_delay;
							if(block_msg == ''){
    							setTimeout(function () {
										dataObj = checkForWelcome(dataObj);
    								if(image != ''){
    									$srJq('#srMsgs').append('<p class="agent inc-avatar"><span class="avatar-mini tt"><img src="' + image +'" alt="' + dataObj.agent_name + '" /></span><span>' + dataObj.agent_name + ':</span> ' + dataObj.welcome + '</p>');
											handleTts(dataObj.welcome);
										} else {
	    									$srJq('#srMsgs').append('<p class="agent"><span>' + dataObj.agent_name + ':</span> ' + dataObj.welcome + '</p>');
											handleTts(dataObj.welcome);
    								}
									if(isMobileUx) {
										convertMsgsMobileUx();
										bindChatMessageDraggable();
										$srJq("#srRecordMobileUx").removeClass("srProcessing").addClass("srStoppedRec");
									}
    								$srJq('#srMsgs').linkify({ target: '_blank' });
									console.log('sr-check-1');
    								$srJq('#srFaded').remove();
										$srJq('a[rel="srSubmitMessage"]').click(function(e){
		    							e.preventDefault();
		    							var params = $srJq(this).attr('name');
		    							if(typeof params != 'undefined'){
		    								submitMessage(params);
		    							} else {
		    								submitMessage();
		    							}
		    						});
    							}, timeDelay);
    						}
						},
						error: function(errorThrown) {
							console.log(errorThrown);
						}
					});
					return;
				}

				var language = getLanguage();

				var virtualAgentId = -1;

									virtualAgentId= 159;
				
				var sendData = {};
				if(typeof override_msg !== 'null') sendData.overrideMsg = override_msg;
								if(typeof is_prompt !== 'undefined') {
					sendData.is_prompt = is_prompt;
					if(is_prompt == true) delete sendData.overrideMsg;
				}
console.log("sendData", sendData);
    			$srJq.ajax({
    				type: "POST",
					data: sendData,
    				url: "//app.meetami.ai/chats/create_chat/" + client_ref + '/' + language+ '/' + agents + '/' + icChats + '/' + uid + '/' + block_msg + '/' + callback +'/?va=' + virtualAgentId,
    				success: function(data) {

    					if(data != 'no-agent' && data != 'error') {
    						dataObj = JSON.parse(data);
							if(dataObj.hasOwnProperty('chat_nonce')) {
								chatNonce = dataObj.chat_nonce;
							}
    						timeDelay = dataObj.welcome.length * auto_delay;
    						$srJq('#chat_ref').val(dataObj.chat_ref);
							checkAndStorePageValues();
																dataObj = checkForWelcome(dataObj);

								
    						    						var image = srSetHeaderImage(dataObj, block_msg, delay_callback);

    						    						if(dataObj.widget_header_image_style == 'sq') {
    							$srJq("#srContent #srMsgs > span > span, #srContent #srMsgs > span > span img").css({
    								"border-radius": "0%",
    								"-webkit-border-radius": "0%"
    							});
    							$srJq("#srContent #srMsgs > span > span").css({
    								"width": "48px",
    								"height": "48px"
    							});
    							$srJq("#srContent #srMsgs > span > span img").css({
    								"width": "44px",
    								"height": "44px"
    							});
    						}

    						    						$srJq('#pageUrl').val(document.URL);
    						    						usr_details['uid'] = dataObj.uid;
    						var uid = dataObj.uid;
    						usr_details['chat_no'] = dataObj.chat_no;
    						usr_details['os'] = dataObj.os;
    						usr_details['browser'] = dataObj.browser;
    						usr_details['ip'] = dataObj.ip;
    						usr_details['device'] = dataObj.device;
    						    						usr_details = JSON.stringify(usr_details);
    						$srJq.cookie('sr-data', usr_details, { expires: 30, path: '/', domain: domain });
    						
    						if( (block_msg == '' || block_msg == 'blMsg') && !delay_callback){
									if (typeof dataObj.welcome == 'undefined') timeDelay = 750;

    							setTimeout(function () {
										dataObj = checkForWelcome(dataObj);
    								if(image != ''){
    									$srJq('#srMsgs').append('<p class="agent inc-avatar"><span class="avatar-mini tt"><img src="' + image +'" alt="' + dataObj.agent_name + '" /></span><span>' + dataObj.agent_name + ':</span> ' + dataObj.welcome + '</p>');
											handleTts(dataObj.welcome);
										} else {
	    								$srJq('#srMsgs').append('<p class="agent"><span>' + dataObj.agent_name + ':</span> ' + dataObj.welcome + '</p>');
											handleTts(dataObj.welcome);
    								}
    								$srJq('#srMsgs').linkify({ target: '_blank' });
									console.log('sr-check-2');
    								$srJq('#srFaded').remove();
										if(isMobileUx) {
											$srJq("#srRecordMobileUx.srProcessing").removeClass("srProcessing").addClass("srStoppedRec");
										}
    							}, timeDelay);
    						}

    						    						$srJq.cookie('sr-ec', dataObj.chat_ref, { expires: 1, path: '/', domain: domain });
    						    						if(dataObj.is_auto == 0){
    							if(typeof transfer_type == 'undefined' ){
    								createLiveChat(dataObj.chat_ref, dataObj.agent_id, dataObj.agent_name);
    							} else {
    								createLiveChat(dataObj.chat_ref, dataObj.agent_id, dataObj.agent_name, dataObj.chat_no, 1, transfer_type);
    							}
    						} else {
    							createLiveChat(dataObj.chat_ref, dataObj.agent_id, dataObj.agent_name, dataObj.chat_no, 1, 'ami');
    						}

    						    						var rlCookie = $srJq.cookie('sr-rl');
    						if(typeof rlCookie != 'undefined'){
    							rlCookie = JSON.parse(rlCookie);
    							var rslt = rlCookie['rslt'];
    							rlCookie['rslt'] = 0;
    							rlCookie = JSON.stringify(rlCookie);
    							$srJq.cookie('sr-rl', rlCookie, { path: '/', domain: domain });

    							var usr_ref = getUsrId();
    							$srJq.ajax({
    								url: "//app.meetami.ai/user_searches/record_goal/" + uid + '/' + rslt + '/ch-' + dataObj.chat_ref,
    								type: "GET",
    								success: function(data) {}
    							});
    						}

    						if(block_msg != '' && block_msg !='blMsg'){
    							submitMessage(block_msg);
    						} else if(delay_callback) {
									submitMessage(delay_argument);
								}

    						
    					} else if ( data == 'error' ) {

    						    						alert('Sorry but there was an error creating the chat. Please try again');
    						closeReplier();

    					} else {
    						$srJq('#chat_ref').val('no-agent');
    						$srJq('#srMsgs').html('<span><span><img src="//app.meetami.ai/img//widget/default-avatar-lrg.svg" alt="Ami icon" class="profile bbl" /></span><p class="srIntro">Sorry, but there are no agents available to chat at the moment. Please complete the form below and someone will be in touch shortly.</p></span>');
    						$srJq('#srMsgs').css('min-height', 0);
    						    						$srJq('.srClose').attr("rel", "srEndReplierChat").attr('name', 'skip nof');
    						var form = '<input type="hidden" name="data[Chat][transfer]" value="transfer" /><div class="input text required"><label for="name">Full name</label><input id="name" name="data[Chat][name]" required="required" type="text" /></div><div class="input text required"><label for="email">Email address</label><input type="email" id="email" name="data[Chat][email]" required="required" /></div><div class="input text required"><label for="phone">Phone number</label><input id="phone" name="data[Chat][phone]" /></div><div class="input textarea required"><label class="left-align" for="message">Message</label><textarea id="amessage" name="data[Chat][amessage]" required="required"></textarea></div>';
    						$srJq('#srInputs').html(form + '<a href="#submit" rel="srSubmitMessage" name="form" class="srFormBtn">Submit</a>');
							$srJq('#srContent').addClass("srMobileUxChatForm srNoAgentForm");
							$srJq("#srLaunchContainer").addClass("srMobileUxChatForm");
							$srJq('#srChatForm').addClass('details');
							if(isMobileUx) {
								checkRecentMsgHeight();
                msgHeight(50, function(){});
							}
							    						$srJq('a[rel="srSubmitMessage"]').off('click');
    						$srJq('a[rel="srSubmitMessage"]').click(function(e){
    							e.preventDefault();
    							var params = $srJq(this).attr('name');
    							if(typeof params != 'undefined'){
    								submitMessage(params);
    							} else {
    								submitMessage();
    							}
    						});

    						    						var rlCookie = $srJq.cookie('sr-rl');
    						if(typeof rlCookie != 'undefined'){
    							rlCookie = JSON.parse(rlCookie);
    							var rslt = rlCookie['rslt'];
    							rlCookie['rslt'] = 0;
    							rlCookie = JSON.stringify(rlCookie);
    							$srJq.cookie('sr-rl', rlCookie, { path: '/', domain: domain });

    							var usr_ref = getUsrId();
    							$srJq.ajax({
    								url: "//app.meetami.ai/user_searches/record_goal/" + uid + '/' + rslt + '/form',
    								type: "GET",
    								success: function(data) {}
    							});
    						}
    					}

    				}
    			});
        });
		}

		function getLanguage() {
			return 'en';
		}

		function checkAndStorePageValues() {
					}

		function checkForWelcome (dataObj) {
						if (typeof dataObj.welcome == 'undefined' || dataObj.welcome == 'Undefined' || dataObj.welcome == 'undefined') {
				dataObj.welcome = "Hi, my name is Livi and I am a digital assistant here to help you. I may not have all the answers and if that’s the case I will transfer our chat to a member of our Fan Services team to assist you. How can I help you today?";
			}

						if (typeof dataObj.agent_name == 'undefined' || dataObj.agent_name == 'Undefined' || dataObj.agent_name == 'undefined') {
				dataObj.agent_name = "Ami";
			}

						if (dataObj == 0) {
				dataObj = {
					'agent_name': 'Ami',
					'agent_team': 'Online Receptionist',
					'welcome': "Hi, my name is Livi and I am a digital assistant here to help you. I may not have all the answers and if that’s the case I will transfer our chat to a member of our Fan Services team to assist you. How can I help you today?"
				}
			}
			return dataObj;
		}

		var agentImage = '';
		function srSetHeaderImage (dataObj, block_msg, delayed) {
			console.log("SR SET HEADER IMAGE!!!!!!!!!!!!!!");
			var img_class = '';
			var image = '';
			if(dataObj.hasOwnProperty('agent_image')){
				image = dataObj.agent_image;
				var header_image = image;
				var img_class = 'bbl';
			} else if (typeof dataObj.ChatData != 'undefined' && typeof dataObj.ChatData.agent_image != 'undefined') {
        		image = dataObj.ChatData.agent_image;
				var header_image = image;
				var img_class = 'bbl';
      		}
			if(typeof(dataObj.aws_widget_header_image) !== "undefined" && dataObj.aws_widget_header_image != "") {
				if(dataObj.aws_widget_header_image == "https://s3-eu-west-1.amazonaws.com/aomg-sr-app-live/skin/widget_header_image/138/launch_tescoicon.png") {
					dataObj.aws_widget_header_image = '//app.meetami.ai/img/widget/launch_tescoicon.png';
				}
				var header_image = dataObj.aws_widget_header_image;
			} else {
				var header_image = "//app.meetami.ai/img/widget/default-avatar-lrg.svg";
			}
			if(typeof(header_image) === "undefined") return false;
			if(!delayed) {
								if(block_msg != '' && block_msg != 'blMsg'){
					console.log('sr-check-3');
					$srJq('#srMsgs').html('<span><span><img src="'+ header_image +'" alt="' + dataObj.agent_name + '" class="profile ' + img_class + '" /></span><p class="srIntro">You are chatting with ' + dataObj.agent_name + '</p><p class="srIntroPos">' + dataObj.agent_team + '</p></span><span><p id="srFaded">You\'re message is being sent...</p></span>');
				} else {
					$srJq('#srMsgs').html('<span><span><img src="'+ header_image +'" alt="' + dataObj.agent_name + '" class="profile ' + img_class + '" /></span><p class="srIntro">You are chatting with ' + dataObj.agent_name + '</p><p class="srIntroPos">' + dataObj.agent_team + '</p></span>');
					agentTyping(dataObj.agent_name);
				}
			}
			agentImage = '';

			return image;

		}

				function checkExistingChats(chat_ref, callback){

						if(typeof chat_ref == 'undefined' || chat_ref == 'undefined'){
				var chat_ref = $srJq.cookie('sr-ec');
			}

						if(chat_ref !== undefined){

								var searchCookie = $srJq.cookie('sr-sea-rdr');
				srSearchReinput(chat_ref, searchCookie, function (rslt) {

					if (rslt === true) {

						language = 'en';

												var langCookie = $srJq.cookie('sr-ln');
						if( typeof langCookie != "undefined" && langCookie != "undefined" ){
							language = langCookie;
						}

						$srJq.ajax({
							type: "GET",
							url: "//app.meetami.ai/chats/check_chat/" + client_ref + "/" + chat_ref + '/' + language ,
							success: function(data) {
								if(data == 'bad-request'){
																		$srJq.removeCookie('sr-ec');
								} else if (data != 'client-error') {
									$srJq("#srRecordMobileUx").addClass("srStoppedRec");
									$srJq("#srContent").removeClass("srWelcomeMessage");
																		dataObj = JSON.parse(data);
									if(dataObj.ChatData.hasOwnProperty('chat_nonce')) {
										chatNonce = dataObj.ChatData.chat_nonce;
									}
									if(typeof dataObj.ChatData.integration_reclaim_after !== 'undefined') {
										console.log("Reclaiming in " + dataObj.ChatData.integration_reclaim_after + " seconds....");
										integrationReclaimTimeout = setTimeout(function() {
											reclaimIntegrationChat();
										}, dataObj.ChatData.integration_reclaim_after * 1000);
									}
									$srJq('#chat_ref').val(dataObj.ChatData.chat_ref);
									checkAndStorePageValues();
									if(dataObj.ChatData.hasOwnProperty('filter_form_selectors')) {
										filterFormSelectors = dataObj.ChatData.filter_form_selectors;
									}
																		var img_class = '';
									if(dataObj.ChatData.hasOwnProperty('agent_image')){
										var header_image = dataObj.ChatData.agent_image;
										var img_class = 'bbl';
									}
									if(dataObj.ChatData.hasOwnProperty('handed_to_integration') && dataObj.ChatData.handed_to_integration == 1) {
										handedToIntegration = true;
									}
									if(dataObj.ChatData.aws_widget_header_image != "") {
										if(dataObj.ChatData.aws_widget_header_image == "https://s3-eu-west-1.amazonaws.com/aomg-sr-app-live/skin/widget_header_image/138/launch_tescoicon.png") {
											dataObj.ChatData.aws_widget_header_image = '//app.meetami.ai/img/widget/launch_tescoicon.png';
										}
										var header_image = dataObj.ChatData.aws_widget_header_image;
									} else {
										var header_image = "//app.meetami.ai/img/widget/default-avatar-lrg.svg";
									}
																		cur_chat = '<span><span><img src="'+ header_image +'" alt="' + dataObj.ChatData.agent_name + '" class="profile ' + img_class + '" /></span><p class="srIntro">You are chatting with ' + dataObj.ChatData.agent_name + '</p><p class="srIntroPos">' + dataObj.ChatData.agent_team + '</p></span>';

																		trackDept(dataObj.ChatData);

																		console.log(dataObj);
									if (dataObj.ChatData.in_funnel === true && typeof dataObj.ChatData.funnel_type != 'undefined' && dataObj.ChatData.funnel_type == 'search') {
										srCreateSkipper(dataObj);
									}

																		var msgHandle = handleExistingMessageArray(dataObj.Messages, undefined, dataObj.ChatData);
									cur_chat += msgHandle.cur_chat;

									if(msgHandle.rr_postponing == true) {
										handleRRPostponed(msgHandle.rr_postponed);
									}

									$srJq("#srContent .feedback-prechat-container").removeClass("cc-exists");
									if(switchform != '' && dataObj.ChatData.is_auto == 1){
										if(switchform != null && switchform.indexOf("CC*") != -1) {
											switchform = switchform.replace('CC*', '');
																						$srJq('#srInputs').html(switchform);
											$srJq('#srChatForm').addClass('details');
										} else if(switchform != null && switchform.indexOf("DP*") != -1) {
											triggerDP(false);
											switchform = switchform.replace('DP*', '');
											$srJq('#srInputs').html(switchform);
											$srJq('#srChatForm').addClass('details');
										} else if(switchform != null && switchform == 'address-lookup') {
																						srHandleAddressLookup(1250);
										} else if(switchform != null && switchform.indexOf("CC*") == -1 && switchform.indexOf("CB*") == -1 && switchform.indexOf("DP*") == -1){
											$srJq('#srInputs').html(switchform + '<a href="#submit" rel="srSubmitMessage" name="form" class="srFormBtn">Submit</a>');
											$srJq('#srChatForm').addClass('details');
											if(isMobileUx) {
												prepareMobileUxChatForm();
												$srJq("#srRecordMobileUx").addClass("srStoppedRec");
											}
										} else if(switchform != null) {
																						switchform = switchform.replace('CB*', '');
											switchform = switchform.replace('XYXY', chat_ref);
											switchform = switchform.replace(/%/g, "'");
											if(switchform.indexOf("submit") == -1 && switchform.indexOf("button") == -1){
												switchform += '<p class=\"srDataSecure\"><span>Data Once</span> We only use this information to contact you regarding your enquiry.</p>';
												switchform += '<a href="#submit" rel="srSubmitMessage" name="form" class="srFormBtn">Submit</a>';
											}
											$srJq('#srInputs').html(switchform);
											$srJq('#srChatForm').addClass('details');
											if(isMobileUx) {
												prepareMobileUxChatForm();
												$srJq("#srRecordMobileUx").addClass("srStoppedRec");
											}
										}
										handleAddressLookups(true);
									} else if(switchform != null && switchform != '' && dataObj.ChatData.is_auto == 0){
										triggerDP(false);
										switchform = switchform.replace('DP*', '');
										$srJq('#srInputs').html(switchform);
										$srJq('#srChatForm').addClass('details');
									}
									if(isMobileUx) {
										checkRecentMsgHeight();
									}
									sr_updateUnreadMessages(unread_msg_count);

																		
									$srJq('#srMsgs').html(cur_chat);
									resizeIphone();
									if(isMobileUx) {
										setTimeout(function() {
											checkRecentMsgHeight();
										}, 500);
										convertMsgsMobileUx(true);
										bindChatMessageDraggable();
									}
									if(usr_msg_count > 0) {
										$srJq(".feedback-upper-container a.footerRate").addClass("active-chat");
									}
									$srJq('#pageUrl').val(document.URL);
									if(typeof(dataObj.ChatData.feedback_id) !== "undefined") {
										$srJq('#srChatter').data("sr-feedback-given", 1);
										$srJq('#srChatter a.footerRate').parent().replaceWith('<p class="footerRate success-color">Thanks for your feedback</p>');
										setTimeout(function() {
											$srJq('#srChatter .feedback-upper-container').hide();
										}, 25000);
									}

									if ( typeof listenToTimeForm != 'undefined' && listenToTimeForm == true ) {
																					srSetupTriggerTimeFormListenner();
																			}

																		if(dataObj.ChatData.widget_header_image_style == 'sq') {
										$srJq("#srContent #srMsgs > span > span, #srContent #srMsgs > span > span img").css({
											"border-radius": "0%",
											"-webkit-border-radius": "0%"
										});
										$srJq("#srContent #srMsgs > span > span").css({
											"width": "48px",
											"height": "48px"
										});
										$srJq("#srContent #srMsgs > span > span img").css({
											"width": "44px",
											"height": "44px"
										});
									}

																		$srJq('#srMsgs').linkify({ target: '_blank' });

									appendViewMoreLinkToResponse();
																												imgToTxtHeader(0,1);
									
																		openReplier(0);
																		scrollChat();

		                            		                						                				$srJq('#liviLaunch').attr("rel", "srMinToggle");
		                			
																		if(dataObj.ChatData.is_auto == 0){
										joinChat(chat_ref, client_ref);
									} else {
										joinChat(chat_ref, client_ref, 'ami');
									}

									srTriggerListenners ()

																		if (typeof dataObj.ChatData.dl_redirect != 'undefined' && dataObj.ChatData.dl_redirect == true && typeof dataObj.ChatData.funnel_details != 'undefined') {
										hideOldBtns();
										checkDlFunnelRslt(dataObj.ChatData.funnel_details, dataObj);
									}

																		if ( typeof dataObj.UnsentMessage != 'undefined' ) {
										var unsentMessage = dataObj.UnsentMessage.message;
										$srJq('#srMsgSender').val(unsentMessage);

																					styleMessageInput();
																														
									}
		              return true;
								}
		            if(typeof(callback) !== "undefined") {
		            	callback();
		            }
							}
						});
					} else {
						console.log('Issue in the callback from search re-input');
					}
				});
			} else {
        if(typeof(callback) !== "undefined") {
          callback();
        }
      }

		}

		function handleRRPostponed(msgs) {
			$srJq("#srMsgSender").attr("disabled", true);
			var attempts = 0;
			var isLast = false;
			if(typeof(msgs[0]) !== "undefined") {
				if(msgs[0].rr_data.target_url !== null) {
					var urlLength = msgs[0].rr_data.target_url.length;
					var curUrl = window.location.href;
					if(curUrl.substr(0, urlLength) !== msgs[0].rr_data.target_url) {
						return false;
					}
				}
			}
			var rr_interval = setInterval(function() {
				attempts++;
				if(attempts == 5) {
					isLast = true;
				}
				var attempt_data = handleExistingMessageArray(msgs, isLast);
				if(attempt_data.rr_postponing == false || isLast) {
					cur_chat = attempt_data.cur_chat;
					$srJq('#srMsgs').append(cur_chat);
					$srJq("#srMsgSender").attr("disabled", false);
					scrollChat();
					clearInterval(rr_interval);
					return true;
				}
			}, 3000);
		}

		function handleExistingMessageArray(msgs, isLast, chatData) {
			console.log(chatData);
			switchform = '';
			usr_msg_count = 0;
			agent_msg_count = 0;
			last_msg_date = '';
			unread_msg_count = 0;
			var listenToTimeForm = false;
			var removingAfterCTEnd = false;
			var rrPostponed = [];
			var rrPostponing = false
			var cur_chat = "";
				console.log(msgs);
				console.log(character_count_threshold);
			$srJq.each(msgs, function(k, v) {
				console.log(v);
				if(typeof(v) === "undefined") return;
				if(rrPostponing) {
					rrPostponed.push(v);
					return;
				}
				var dismissClass = '';
				if(typeof(v.transcoded_url) !== "undefined") {
					var transcodedUrl = v.transcoded_url;
				}
				if(v.is_mobile_dismissed == true) {
					dismissClass = 'srDismissed';
				}
				if(v.virtual_msg_type == 'results-response' && v.hasOwnProperty('rr_data')) {
					var rrHandle = handleResultsResponse({response: v.rr_data}, isLast);
					console.log("isLast", isLast);
					if(rrHandle.failed == true && !isLast) {
						rrPostponing = true;
						rrPostponed.push(v);
						return;
					}
					v.message = rrHandle.response.message;

				}
				if (v.sender_name == 'endChat' || v.sender_name == 'dpQuestion') {
					cur_chat += '<div class="' + v.virtual_msg_type + " " + dismissClass + '" data-m-id="' + v.id + '"><p>' + v.message + '</p></div>';
				} else if(v.sender_name == 'feint'){
					cur_chat += '<div class="' + dismissClass + '" data-m-id="' + v.id + '"><p class="feint">' + v.message + '</p></div>';
				} else if(v.is_agent_msg == 1){

					if(v.virtual_msg_type === 'campaign'){

						var message = v.message;
						message = formatAutoMessageStrForRegularExpression(message);
						console.log('##formatted message',message);

												for(var index = 0; index< message.length;index = getCutOffIndex(message,index,character_count_threshold)+1){
							var splitMessage = getSplitMessageString(message,index,character_count_threshold);
							if(splitMessage.length === 0) {
																continue;
							}

							if ( typeof v.Agent.image != 'undefined' && v.Agent.image != '' && v.virtual_msg_type == null && v.Agent.image != null && typeof v.Agent.image_dir != 'undefined' && v.Agent.image_dir != '' && v.Agent.image_dir != null ) {
								cur_chat += '<p ' + ((typeof(v.transcoded_url) !== 'undefined')?'data-transcoded-url="' + v.transcoded_url + '"':'') + ' class="agent inc-avatar ' + dismissClass + '" data-m-id="' + v.id + '"><span class="avatar-mini"><img src="' + v.Agent.aws_image + '/small_'+ v.Agent.image +'" alt="' + v.sender_name + '" /></span><span>' + v.sender_name + ':</span> ' + splitMessage + '</p>';
							} else if ( typeof v.VirtualAgent.agent_image != 'undefined' && v.VirtualAgent.agent_image != '' && v.VirtualAgent.agent_image != null && typeof v.VirtualAgent.agent_image_dir != 'undefined' && v.VirtualAgent.agent_image_dir != '' && v.VirtualAgent.agent_image_dir != null ) {
								cur_chat += '<p ' + ((typeof(v.transcoded_url) !== 'undefined')?'data-transcoded-url="' + v.transcoded_url + '"':'') + ' class="agent inc-avatar ' + dismissClass + '" data-m-id="' + v.id + '"><span class="avatar-mini"><img src="' + v.VirtualAgent.aws_agent_image + '/small_' + v.VirtualAgent.agent_image +'" alt="' + v.sender_name + '" /></span><span>' + v.sender_name + ':</span> ' + splitMessage + '</p>';
														} else {
								cur_chat += '<p ' + ((typeof(v.transcoded_url) !== 'undefined')?'data-transcoded-url="' + v.transcoded_url + '"':'') + ' class="agent ' + dismissClass + '" data-m-id="' + v.id + '"><span>' + v.sender_name + ':</span> ' + splitMessage + '</p>';
							}
						}
					} else if(v.virtual_msg_type=='response_link') {

						if(isNaN(v.outcome)){
							cur_chat += '<p class="agent sr-response-link " ><a href="'+v.outcome+'"  target="_blank" > ' + v.message + '</a></p>';
						}	else {
							cur_chat += '<p class="agent sr-response-link " ><a href="#" class="sr-response-linked-response" data-multiple-response-link ='+v.outcome+' > ' + v.message + '</a></p>';
						}
					} else {
						if ( typeof v.Agent.image != 'undefined' && v.Agent.image != '' && v.virtual_msg_type == null && v.Agent.image != null && typeof v.Agent.image_dir != 'undefined' && v.Agent.image_dir != '' && v.Agent.image_dir != null ) {
							cur_chat += '<p ' + ((typeof(v.transcoded_url) !== 'undefined')?'data-transcoded-url="' + v.transcoded_url + '"':'') + ' class="agent inc-avatar ' + dismissClass + '" data-m-id="' + v.id + '"><span class="avatar-mini"><img src="' + v.Agent.aws_image + '/small_'+ v.Agent.image +'" alt="' + v.sender_name + '" /></span><span>' + v.sender_name + ':</span> ' + v.message + '</p>';
						} else if ( typeof v.VirtualAgent.agent_image != 'undefined' && v.VirtualAgent.agent_image != '' && v.VirtualAgent.agent_image != null && typeof v.VirtualAgent.agent_image_dir != 'undefined' && v.VirtualAgent.agent_image_dir != '' && v.VirtualAgent.agent_image_dir != null ) {
							cur_chat += '<p ' + ((typeof(v.transcoded_url) !== 'undefined')?'data-transcoded-url="' + v.transcoded_url + '"':'') + ' class="agent inc-avatar ' + dismissClass + '" data-m-id="' + v.id + '"><span class="avatar-mini"><img src="' + v.VirtualAgent.aws_agent_image + '/small_' + v.VirtualAgent.agent_image +'" alt="' + v.sender_name + '" /></span><span>' + v.sender_name + ':</span> ' + v.message + '</p>';
												} else {
							cur_chat += '<p ' + ((typeof(v.transcoded_url) !== 'undefined')?'data-transcoded-url="' + v.transcoded_url + '"':'') + ' class="agent ' + dismissClass + '" data-m-id="' + v.id + '"><span>' + v.sender_name + ':</span> ' + v.message + '</p>';
						}
					}


					agent_msg_count++;
					last_msg_date = v.created_unix;

					if(!v.is_read) unread_msg_count++;

				} else {
					cur_chat += '<p class="' + dismissClass + '" data-m-id="' + v.id + '"><span>You:</span> ' + v.message + '</p>';
					usr_msg_count++;
				}
				if(v.form != '' && v.form != 'DP*'){
					switchform = (v.form != null) ?  v.form.replace(/<br \/>/g,'') : v.form;
										if(v.form != null && v.form != 'address-lookup' && v.form.indexOf("CB*") == -1 && switchform.indexOf("DP*") == -1 && switchform.indexOf("CC*") == -1){
						switchform += '<p class=\"srDataSecure\"><span>Data Once</span> We only use this information to contact you regarding your enquiry.</p>';
					}

				} else {
					switchform = '';
				}
								if (v.message.indexOf("srSpecifyTimeBtn") > -1) {
					listenToTimeForm = true;
				} else {
					listenToTimeForm = false;
				}
								if (scope.chat.hasUnknownQueries === false && v.virtual_msg_type == 'manExp') {
					scope.chat.hasUnknownQueries = true;
				}
			});
			return {
				cur_chat: cur_chat,
				rr_postponed: rrPostponed,
				rr_postponing: rrPostponing
			}
		}

		function srTriggerListenners () {
						$srJq('a#srEndChatBtn').on('click', function(e){
				e.preventDefault();
								srTransferToAgent('DL');
			});
		}

		function hideOldBtns () {
			var totalNo = $srJq('a#srEndChatBtn').length;
			var counter = 1;
			$srJq('a#srEndChatBtn').each(function(){
				if (counter < totalNo) {
					$srJq(this).remove();
					counter++;
				}
			});
		}

		function checkDlFunnelRslt (funnel, chat) {
						var curUrl = window.location.href;
			if (curUrl.indexOf(funnel.dl_complete_url) > -1 && typeof funnel.dl_empty_element != 'undefined') {
								var contentToCheck = $srJq(funnel.dl_empty_element).html();
				if (contentToCheck.indexOf(funnel.dl_empty_check) > -1) {

										var chatContent = $srJq('#srMsgs').html();
					var count_occurrences = srOccurrences(chatContent, funnel.dl_empty_msg, false);

										if (count_occurrences > 0) {
						var newContent = funnel.dl_empty_btn_endit;
												srTransferToAgent('DL');
					} else {
						var newContent = funnel.dl_empty_msg + '<a href="#action" id="srEndChatBtn">' + funnel.dl_empty_btn + '</a>';
					}
										$srJq('#srEndChatBtn').closest('p').html(newContent);
										var uid = getUsrId();
					var msgId = chat.Messages[chat.Messages.length -1];
					msgId = msgId.id;
					$srJq.ajax({
						type: "POST",
						data: { msg: newContent, type: 'srEndChat positive updated' },
						url: "//app.meetami.ai/chats/update_message/" + msgId + "/" + chat.ChatData.chat_ref + "/" + uid,
						success: function(data) {}
					});
					srTriggerListenners();
				}
			}
		}

		function srOccurrences(haystack, needle, allowOverlap) {

	    haystack += "";
	    needle += "";
	    if (needle.length <= 0) return (haystack.length + 1);

	    var n = 0,
	        pos = 0,
	        step = allowOverlap ? 1 : needle.length;

	    while (true) {
	        pos = haystack.indexOf(needle, pos);
	        if (pos >= 0) {
	            ++n;
	            pos += step;
	        } else break;
	    }
	    return n;
		}

				function srTransferToAgent (transferType) {
						var userId = getUsrId();
			var chatId = $srJq('#chat_ref').val();
			var agentsOnline = $srJq('#agentsList').val();

						$srJq.ajax({
				type: "GET",
				url: "//app.meetami.ai/chats/transfer/" + chatId + "/" + userId + "/" + agentsOnline + "/DL",
				success: function(data) {
					if (data != 0) {
						var dataObj = JSON.parse(data);
						handleAutoMsgs(dataObj, chatId);
						$srJq('a#srEndChatBtn').slideUp(200);
					} else {
						alert('Sorry but there was an error processing your request, please try again. If the problem persists please contact us.');
					}
				}
			});
		}

		function srHandleLineBreaks (msg) {
			return (msg + '').replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g, '$1<br />$2');
		}

		function srHandleFormBreaks (formObj) {
						form_data = JSON.parse(formObj);
						for (var i in form_data) {
				if (typeof form_data[i]['name'] != 'undefined' && form_data[i]['name'] == 'data[Chat][message]') {
					form_data[i]['value'] = srHandleLineBreaks(form_data[i]['value']);
				}
			}
						formObj = JSON.stringify(form_data);
			return formObj;
		}

		var slowLoadFirstTimeout = setTimeout(function(){}),
			slowLoadSecondTimeout = setTimeout(function(){}),
			slowLoadThirdTimeout = setTimeout(function(){}),
			slowLoadChatTimeout = setTimeout(function(){}),
			verySlowLoadChatTimeout = setTimeout(function(){}),
			slowLoad1Msg = "Ami is thinking...",
			slowLoad2Msg = "Ami is typing...",
			slowLoad3Msg = "Ami is researching...",
			slowLoadChatMsg = "Please wait while I find out for you.";
		
					var verySlowLoadChatMsg = "I\'m just checking and will get back to you as soon as possible";
		
		function initSlowLoadTimers() {
			clearSlowLoadTimers();
			var agentName = getAgentName();
			if(agentName != "Ami") {
				slowLoad1Msg = slowLoad1Msg.replace("Ami", agentName);
				slowLoad2Msg = slowLoad2Msg.replace("Ami", agentName);
				slowLoad3Msg = slowLoad3Msg.replace("Ami", agentName);
				slowLoadChatMsg = slowLoadChatMsg.replace("Ami", agentName);
			}
							slowLoadFirstTimeout = setTimeout(function() {
					fadedExpectationMessage(slowLoad1Msg);
				}, 2 * 1000);
										slowLoadSecondTimeout = setTimeout(function() {
					fadedExpectationMessage(slowLoad2Msg);
				}, 5 * 1000);
										slowLoadThirdTimeout = setTimeout(function() {
					fadedExpectationMessage(slowLoad3Msg);
				}, 10 * 1000);
													verySlowLoadChatTimeout = setTimeout(function() {
					var data = {
						response: {
							agent_name: agentName,
							agent_image: agentImage
						}
					}
					$srJq(".sr-expectation-msg").remove();
					var html = getAgentMsgHtml(data, verySlowLoadChatMsg);
					$srJq("#srMsgs").append(html);
					scrollChat();
					storeMessage(verySlowLoadChatMsg, agentName, undefined, 1);
				}, 20 * 1000);
					}

		function clearSlowLoadTimers() {
			clearTimeout(slowLoadFirstTimeout);
			clearTimeout(slowLoadSecondTimeout);
			clearTimeout(slowLoadThirdTimeout);
			clearTimeout(slowLoadChatTimeout);
			clearTimeout(verySlowLoadChatTimeout);
			$srJq(".sr-expectation-msg").remove();
		}

		function fadedExpectationMessage(message) {
			$srJq(".sr-expectation-msg").remove();
			console.log('sr-check-4');
			$srJq('#srMsgs').append('<span class="sr-expectation-msg"><p id="srFaded">' + message + '</p></span>');
			scrollChat();
		}

		 
		function submitMessage(form){
			console.log("SUBMIT MESSAGE CALLED");

			integrationTyping(false);

			clearInterval(check_existing_interval);

			if($srJq("#srChatter").hasClass("delayed-creation")) {
				createChat(undefined, undefined, undefined, false, true, form);
				$srJq("#srChatter").removeClass("delayed-creation");
				disableChatForm();
				return;
			}

						var isForm = false;
			if(typeof form == 'undefined' || form == 'form') {
				var isValid = $srJq('#srChatForm').valid();
				if (typeof form != 'undefined' && form == 'form') {
					isForm = true;
				}
			} else {
				var isValid = $srJq('#' + form + 'Form').valid();
			}

						if($srJq('#srInputs input[type=tel]').length){
				phone_rslt = validatePhone($srJq('#srInputs input[type=tel]').val());
				if(phone_rslt != true){
					isValid = false;
					$srJq('#srInputs input[type=tel]').closest('div').children('p.errormsg').remove();
					$srJq('#srInputs input[type=tel]').closest('div').append('<p class="small errormsg">' + phone_rslt + '</p>');
				}
			}

						if(typeof autoClose != 'undefined'){
				clearTimeout(autoClose);
				delete autoClose;
				msg_val = $srJq('#srMsgSender').val();
				if(typeof form != 'undefined' && form != 'form') {
					msg_val = $srJq('#' + form).val();
				} else {
					msg_val = $srJq('#' + form).val();
				}
				if(msg_val != undefined && (msg_val.indexOf('no') > -1 || msg_val.indexOf('No') > -1 || msg_val.indexOf('NO') > -1 || msg_val.indexOf('thanx') > -1 || msg_val.indexOf('thanks') > -1)){
					endReplierChat('skip', 'nof');
					return;
				}
			}

						srClearLookupListener(true);

						var icChats = $srJq('#icChats').val();

			if(isValid == true){

								var chat_ref = $srJq('#chat_ref').val();
				enableChatForm();
								if(typeof form != 'undefined' && form != 'form') {
					form_data = $srJq('#' + form + 'Form').serializeArray();
				} else {
					form_data = $srJq('#srChatForm').serializeArray();
				}


				form_data = JSON.stringify(form_data);
								if($srJq('#srMsgSender').length){
					var msg = $srJq('#srMsgSender').val();
					
											var characterLimit = 160;

						if(msg.length > characterLimit){
							return false;
						} else {
							var resetToDefault = true;
							styleMessageInput(resetToDefault);
						}
															msg = stripIncorrectSpaces(msg);
										msg = srHandleLineBreaks(msg);
					var winWidth = getScreenWidth();
					if(winWidth < 720){
						$srJq('#srMsgSender').off('focusout');
						$srJq('#srMsgSender').blur();
						$srJq('#srMsgSender').focusout(function(event) {
							submitMessage();
						});
					}
				}

								var is_form = $srJq('#srMsgSender').val();
				if(is_form == undefined){
					$srJq('#srInputs').html('<img src="//app.meetami.ai/img/core/bg/loading.gif" class="loading" style="width: 70px; display: block; margin: 5px auto;" alt="Loading..." />');
					if(isMobileUx) {
						checkRecentMsgHeight();
            msgHeight(20, function(){});
					}
					$srJq('#srChatForm').removeClass('details');
				} else {

										var msgCount = $srJq('#srMsgs > p').length;
					if (msgCount == 1) {
											}

				}

				var agentsAvailable = $srJq('#agentsList').val();
				var curAgents = '';

								disableChatForm();

								form_agents = '';
				if(typeof form != 'undefined' && form == 'form'){
					var current_cookie = $srJq.cookie('sr-data');
					if(typeof current_cookie != 'undefined'){
						current_cookie = JSON.parse(current_cookie);
						curAgents = agentsAvailable;
						agentsAvailable = current_cookie['uid'];
					}

										
				} else if(typeof form != 'undefined') {
										msg = $srJq('#' + form).val();
				}

				
				form_data = srHandleFormBreaks(form_data);

        if(typeof(msg) == "undefined") msg = '';

								if (srInSearchFunnel()) {
					console.log('CHECKING FOR CF');
					var appendage = {name: "cf_value", value: srCheckSearchFunnelValue(msg)};
					form_data = appendToFormData(form_data, appendage);
					console.log('CF is: ');
					console.log(appendage);
				}

				if(srInFilterForm()) {
					var appendage = {name: "ff_value", value: srCheckFilterFormValue(msg)};
					form_data = appendToFormData(form_data, appendage);
				}

		        if (typeof msg != 'undefined' && msg != "") {

			
					msg = msg.replace(/</g, "&lt;").replace(/>/g, "&gt;");
		      $srJq('#srMsgs').append('<p><span>You:</span> ' + msg + '</p>');
          $srJq('#srMsgSender').val("");
          scrollChat();
        }

				initSlowLoadTimers();

				form_data = CryptoJSAesEncrypt(chatNonce, form_data);

				var msgObj = {data: form_data};

				language = 'en';

								if( $srJq.cookie('sr-ln') != undefined){
					language = $srJq.cookie('sr-ln');
				}

								$srJq.ajax({
					url: "//app.meetami.ai/chats/add_msg/" + client_ref + "/" + chat_ref +'/' + language + "/" + agentsAvailable + '/' + icChats + '/' + curAgents ,
					type: "POST",
					data: msgObj,
					success: function(data) {
						data = CryptoJSAesDecrypt(chatNonce, data);
						console.log('Completed add_msg');
						clearSlowLoadTimers();
												dataObj = JSON.parse(data);
						if(isMobileUx) {
							$srJq("#srMobileSendButton").removeClass("srHasMsg");
													}
						var message = "";
												console.log('###');
						console.log(dataObj);
						console.log('###');
												if(typeof dataObj.responses !== 'undefined' && dataObj.responses.length > 0 && typeof dataObj.responses[0].ailClarifyResponseOptions !== 'undefined' && dataObj.responses[0].ailClarifyResponseOptions == true) {
							handleAilResponseOptions(dataObj);
						} else {
							handleSubmitMessageSuccess(dataObj, true, isForm, isValid, msg, form_data, client_ref, chat_ref, agentsAvailable, icChats, curAgents);
						}
						var agentsList = $srJq("#agentsList").val();
						populateAgentsList(agentsList);
					}, error: function(e,f,g) {
						console.log(e);
						clearSlowLoadTimers();
					}

				});
			} else {
				if($srJq('#srMsgSender').length != 1){
					alert("Please complete the form before submitting it.");
				} else {
					$srJq('#srMsgSender-error').slideDown(250);
				}
			}
		}

		function handleAilResponseOptions(dataObj) {
			              	var availableAmiAgents = $srJq('#amiAgentsList').val();
              	var amiAgentStatus = $srJq('#amiAgentsStatus').val();
              	var chatReclaimed = sr_isChatReclaimed();
				var chat_ref = getChatId();
              	if (!chatReclaimed && availableAmiAgents != '') {
                  	console.log('Ami Agent AIL clarify response options');
                  	submitLiveMessage(chat_ref, "", 1, undefined, 1);
                  	                  	enableChatForm();
                  	                  	$srJq('#amiAgentsStatus').val(1);

					sr_startResponseTimer();
				} else {
					dataObj.response = dataObj.responses[0];
					handlePretext(dataObj, function() {
						handleAutoMsgs(dataObj.response, chat_ref, true, dataObj);
					});
				}
					}

		if(typeof(chat_ref) === "undefined") var chat_ref = getChatId();
		if(typeof(user_ref) === "undefined") var user_ref = getUsrId();
		var dpFormCode = '<div class="dp-container"><button class="dp-yes">Yes</button><button class="dp-no">No</button></div>';
		var dpQuestions = [];
		var intro_msg = "Thanks for your details. We would like to ask you some questions about how we use your personal data:",
			unfinished_msg = "Last time we chatted you answered some of our data protection questions, but we've got some more for you:",
			thanks_msg = "Thanks for answering our questions";

				function triggerDP(display, triggered_by_agent) {
			sr_clearResponseTimer();
			if(typeof(chat_ref) === "undefined") var chat_ref = getChatId();
			if(typeof(user_ref) === "undefined") var user_ref = getUsrId();
            if(typeof(triggered_by_agent) === "undefined") triggered_by_agent = false;
			var chat_ref = getChatId();
			$srJq.ajax({
				url: "//app.meetami.ai/chats/check_user_dp_responses/" + client_ref + "/" + user_ref + "/1/" + chat_ref,
				dataType: "json",
				type: "GET",
				success: function(data) {
										if(data) {
						handleDPQuestions(data, display, triggered_by_agent);
                        console.log("TRIGGERING HANDLE DP QUESTIONS");
					}
				},
				error: function(errorThrown) {
					console.log(errorThrown);
				}
			});
		}

		function toSimpleForm (override) {
			console.log("TO SIMPLE FORM");
			if(isMobileUx) {
				$srJq("#srContent").removeClass("srMobileUxChatForm");
				$srJq('#srLaunchContainer').removeClass('srInFeedbackState');
				$srJq("#srLaunchContainer").removeClass("srMobileUxChatForm");
							}
			if($srJq("#srMsgSender").length > 0 && $srJq("#srMsgSender").val() != "") return;
			if (typeof override != 'undefined' || $srJq('.dp-container').length == 0 ) {
				var simple_form = '<div class="input textarea"><textarea name="data[Chat][message]" id="srMsgSender" required="required" placeholder="Press [Enter] to send" cols="30" rows="6"></textarea></div>';
								$srJq('#srInputs').html(simple_form);
				$srJq('#srInputs').find('#srMsgSender').parent().append($('<div id="srMobileSendButton"></div>'));
			}
		}

		function storeDPQuestion(message, html_class, include_form, usr_msg, cb, triggered_by_agent) {
			var chat_ref = getChatId();
			if(typeof(user_ref) === "undefined") var user_ref = getUsrId();
			if(typeof(client_ref) === "undefined") var client_ref = '302220474411';
			if(typeof(triggered_by_agent) === "undefined") var triggered_by_agent = false;
			if(typeof(include_form) !== "undefined" && !include_form) {
				var formToInclude = null;
			} else{
				var formToInclude = dpFormCode;
			}
            console.log("formToInclude", formToInclude);
			if(typeof(usr_msg) == "undefined") {
				var usr_msg = 0;
				var sender = 'Ami';
			} else {
				var sender = 'Customer';
			}

			var data = {
				chat_id: chat_ref,
				agent_msg: 0,
				msg: message,
				user_ref: user_ref,
				sender: sender,
				block_suggestion: true,
				is_dp: true,
				client_ref: "302220474411"
			};

						var amiAgentStatus = $srJq('#amiAgentsStatus').val();
			if(amiAgentStatus == 1) {
                console.log("emitting autochat message from store question");
				socket.emit('autochat message', data);
			} else {
                console.log("emitting chat message from store question");
				socket.emit('chat message', data);
			}

			$srJq.ajax({
				url: "//app.meetami.ai/chats/store_dp_chat_message/" + chat_ref + "/" + client_ref + "/" + user_ref + "/" + usr_msg,
				dataType: "json",
				type: "POST",
				data: {
					message: message,
					html_class: html_class,
					form: formToInclude
				},
				success: function(data) {
                    if(!triggered_by_agent) redistributeViaNode({question: message, usr_msg: usr_msg, dpQuestions: dpQuestions}, 'dp-question');
					if(typeof(cb) !== "undefined" && cb !== false) cb();
				}
			});
		}

		function handleDPQuestions(questions, display, triggered_by_agent) {
			if(isMobileUx) {
				$srJq("#srChatForm").addClass("srMobileUxDpQuestion");
				$srJq("#srContent").addClass("srMobileUxDpQuestion");
				$srJq("#srLaunchContainer").addClass("srMobileUxDpQuestion");
			}
			dpQuestions = questions['questions'];
			if(questions.info.intro_msg != "") intro_msg = questions.info.intro_msg;
			if(questions.info.unfinished_msg != "") unfinished_msg = questions.info.unfinished_msg;
			if(questions.info.thanks_msg != "") thanks_msg = questions.info.thanks_msg;
			if(questions.info.unfinished == true) intro_msg = unfinished_msg;
			if(display) {
				setTimeout(function() {
					if(typeof(chat_ref) === "undefined") var chat_ref = getChatId();
					if(typeof(client_ref) === "undefined") var client_ref = '302220474411';
					socket.emit('switch answering dp', {chat_id: chat_ref, client_ref: client_ref, status: 1});
					appendDPQuestion(dpQuestions[0], intro_msg, false, triggered_by_agent);
					convertToDPInputs();
				}, 1000);
			}
		}

		function convertToDPInputs() {
			$srJq('#srInputs').html(dpFormCode);
		}

		function convertToNormalInput() {
			if(typeof(chat_ref) === "undefined") var chat_ref = getChatId();
			if(typeof(client_ref) === "undefined") var client_ref = '302220474411';
			toSimpleForm(1);
			setTimeout(function(){
				socket.emit('switch answering dp', {chat_id: chat_ref, client_ref: client_ref, status: 0});
			}, 250);
		}

		function appendDPQuestion(question, intro_msg, redistributed, triggered_by_agent) {
            if(!question.hasOwnProperty("question_content")) {
            	var content = question;
            } else {
    			if(typeof(intro_msg) !== "undefined" && intro_msg != "") {
    				var content = intro_msg + "<br /><br />" + question.question_content;
    			} else {
    				var content = question.question_content;
    			}
            }
			$srJq('#srMsgs').append('<div class="srDPQuestion"><p>' + content + '</p></div>');
			handleTts(content);
			scrollChat();
            if(typeof(redistributed) == "undefined" || !redistributed) {
                storeDPQuestion(content, 'srDPQuestion', true, 0, false, triggered_by_agent);
            }
			convertToDPInputs();
			if(typeof(redistributed) == "undefined") srPlink();
		}

		function endDPQuestions(redistributed) {
			if(typeof(chat_ref) === "undefined") var chat_ref = getChatId();
			if(typeof(client_ref) === "undefined") var client_ref = '302220474411';
			$srJq('#srMsgs').append('<div class="srDPQuestion end positive"><p>' + thanks_msg + '</p></div>');
			handleTts(thanks_msg);
			if(typeof(redistributed) == "undefined") storeDPQuestion(thanks_msg, 'srDPQuestion end positive', false);
			convertToNormalInput();
			$srJq("#srChatForm").removeClass("srMobileUxDpQuestion");
			if(isMobileUx) {
				$srJq("#srContent").removeClass("srMobileUxDpQuestion");
				$srJq("#srLaunchContainer").removeClass("srMobileUxDpQuestion");
			}
			scrollChat();
			if(typeof(redistributed) == "undefined") srPlink();
            socket.emit('switch answering dp', {chat_id: chat_ref, client_ref: client_ref, status: 0});
		}

		function nextDPQuestion() {
			dpQuestions.shift();
			if(dpQuestions.length > 0) {
				appendDPQuestion(dpQuestions[0]);
			} else {
				endDPQuestions();
			}
		}

		function handleDPResponse(response) {
			$srJq("#srInputs").addClass("text-center").html('<img src="//app.meetami.ai/img/core/bg/loading.gif" class="loading loading-mini" alt="Loading..." />');
			if(response == 0) {
				var response_verbose = "No";
			} else {
				var response_verbose = "Yes";
			}
			if(typeof(user_ref) === "undefined") var user_ref = getUsrId();
			$srJq("#srMsgs").append(
				"<p class='srDPQuestionTempHidden'><span>" + response_verbose + "</span></p>"
			);
			setTimeout(function() {
				dismissSpecificMsg(response_verbose);
			}, dismissTime);
			scrollChat();
			storeDPQuestion(response_verbose, "", false, true, function() {
				$srJq.ajax({
					url: "//app.meetami.ai/chats/store_user_dp_response/" + user_ref + "/" + dpQuestions[0].question_id + "/" + response,
					dataType: "json",
					type: "GET",
					success: function(data) {
						console.log(data);
						var previousAgentMsg = $srJq('#srMsgs').find(".agent, .srDPQuestion").last().find(".srMsgInnerContent").find("p").text();
						dismissUpToMsg(previousAgentMsg);
						var elems = [];
						elems.push($srJq('#srMsgs').find(".agent, .srDPQuestion").last());
						$srJq('#srMsgs').find(".agent, .srDPQuestion").last().prevAll('div, p').each(function(index, value) {
							elems.push($srJq(value));
						});
						$srJq.each(elems, function(index, value) {
							$srJq(value).animate({
								opacity: 0
							}, 200, function() {
								$srJq(value).css("opacity", 1);
								$srJq(value).addClass("srDismissed");
							});
						});
						$srJq("#srInputs").removeClass("text-center");
						convertToDPInputs();
						nextDPQuestion();
                        					},
					error: function(errorThrown) {
						console.log(errorThrown);
					}
				});
			});
		}

		$srJq("body").on("click", ".dp-yes", function(e) {
			e.preventDefault();
			handleDPResponse(1);
		});

		$srJq("body").on("click", ".dp-no", function(e) {
			e.preventDefault();
			handleDPResponse(0);
		});

		$srJq("body").on("change", "#sr-checkbox1", function() {
			if($srJq(this).prop("checked") == true) {
				$srJq("#feedback-callback-form").slideDown();
			} else {
				$srJq("#feedback-callback-form").slideUp();
			}
		});

		
		function populate_feedback_callback_form() {
			var uid = getUsrId();
			$srJq("#feedback-callback-form, #sr-toggles").hide();
			$srJq(".feedback-callback-intro").addClass("ami-hidden");

					}

		function handlePretext(dataObj, callback) {

						if ( typeof dataObj.curResponse != 'undefined' ) {
				dataObj.response = dataObj.curResponse;
				if ( typeof dataObj.agent_name != 'undefined' ) dataObj.response.agent_name = dataObj.agent_name;
				if ( typeof dataObj.agent_image != 'undefined' ) dataObj.response.agent_image = dataObj.agent_image;
			}

						if(typeof dataObj.response.pretext != 'undefined' && dataObj.response.pretext != '' && dataObj.response.pretext != null) {
				timeDelay = dataObj.response.pretext.length * auto_delay;
				agentTyping(dataObj.response.agent_name);
				setTimeout(function () {
					var pretextMsg = getAgentMsgHtml(dataObj, dataObj.response.pretext);
					$srJq('#srMsgs').append(pretextMsg);
					handleTts(dataObj.response.pretext);
					urlTransfer(pretextMsg);
					removeAgentTyping();
					callback();
				},timeDelay);
			} else {
				callback();
			}

		}

		function handleTrackScript (isForm, triggerType) {

			if (isForm === true) {
															if (triggerType == 'chat-form') {
													}
												}

		}

		function agentMsgCount () {
						var agent_msg_count = $srJq('#srMsgs p.agent').length;
						if (typeof agent_msg_count == 'undefined') {
				agent_msg_count = 0;
			}
			return agent_msg_count;
		}

				function getAgentMsgHtml(dataObj, msg) {

						var addnStyle = "";
			for (var i in dataObj.responses) {
				if(dataObj.responses.hasOwnProperty(i)) {
					console.log("BOOM SHAKALAKA");
					console.log(msg);
					console.log(typeof msg);
					console.log(dataObj.responses[i].message);
					console.log(typeof dataObj.responses[i].message);
					if (dataObj.responses[i].message.indexOf(msg) > -1) {
						console.log("Made one");
						if (typeof dataObj.responses[i].msgStyle != "undefined") {
							console.log("Made two");
							addnStyle = 'sr-' + dataObj.responses[i].msgStyle;
						}
					}
				}
			}

						var msgHtml = "";
			if ( typeof dataObj.response.agent_image != 'undefined' && dataObj.response.agent_image != '' && dataObj.response.agent_image != 'widget/default-avatar-lrg.svg' ) {
				msgHtml = '<p class="agent inc-avatar ' + addnStyle + '"><span class="avatar-mini"><img src="' + dataObj.response.agent_image +'" alt="' + dataObj.response.agent_name + '" /></span><span>' + dataObj.response.agent_name + ':</span> ' + msg + '</p>';
			} else if(dataObj.response.virtual_msg_type=='response_link') {

				msgHtml = '<p class="agent ' + addnStyle + ' sr-response-link " >';

				if(dataObj.response.link_type == 'url'){
					msgHtml += '<a href="'+dataObj.response.outcome+'"   target="_blank" > ' + msg + '</a></p>';
				}	else {
					msgHtml += '<a href="#" class="sr-response-linked-response" data-multiple-response-link ='+dataObj.response.outcome+' > ' + msg + '</a></p>';
				}
				
				
				if(dataObj.response.link_type == 'url'){
					urlTransfer (dataObj.response.outcome);
				}
			} else {
				msgHtml = '<p class="agent ' + addnStyle + '"><span>' + dataObj.response.agent_name + ':</span> ' + msg + '</p>';
			}

			return msgHtml;
		}

		function agentTyping(agentName) {
			console.log('sr-check-5');
			var typingMsg = "Ami is typing...".replace("Ami", "").replace(agentName, "");
			$srJq('#srMsgs').append('<span><p id="srFaded">' + agentName + ' ' + typingMsg + '</p></span>');
		}

		function removeAgentTyping() {
			console.log('sr-check-6');
			$srJq('#srFaded').remove();
		}

				function handleAutoMsgs ( dataObj, chat_ref, redistribute, mmObj ) {
						if ( typeof mmObj != 'undefined' ) {
				dataObj.agent_image = mmObj.agent_image;
				dataObj.agent_name = mmObj.agent_name;
				mmObj.response = dataObj;
				dataObj = mmObj;
			}

						if ( typeof dataObj.response.agent_name == 'undefined' || dataObj.response.agent_name == null ) {
				dataObj.response.agent_name =	$srJq('#srMsgs').find('p.agent span:not(.avatar-mini)').html();
				if (typeof dataObj.response.agent_name != 'undefined') {
					dataObj.response.agent_name =	dataObj.response.agent_name.replace(':', '');
				}
			}
			if (typeof dataObj.response.agent_image == 'undefined' || dataObj.response.agent_image == '' || dataObj.response.agent_image.indexOf('small_') == -1 ) {
				if ( $srJq('#srMsgs p.agent.inc-avatar span.avatar-mini').length > 0 ) {
					dataObj.response.agent_image = $srJq('#srMsgs').find('p.agent.inc-avatar span.avatar-mini img').attr('src');
					dataObj.response.agent_image = dataObj.response.agent_image.replace('https://s3-eu-west-1.amazonaws.com/aomg-sr-app-live/', '');
				} else {
					dataObj.response.agent_image = '';
				}
			}

			
			console.log(dataObj.response.message);


			// if(dataObj.response.paragraph_more_info_message){
			// 	var indexCutoff = parseInt(dataObj.response.paragraph_character_limit);

			// 	console.log(dataObj.response.message.charAt(indexCutoff));
			// 	while(dataObj.response.message.charAt(indexCutoff) != ' '){
			// 		console.log(dataObj.response.message.charAt(indexCutoff));
			// 		indexCutoff += 1;
			// 	}

			// 	dataObj.response.message = dataObj.response.message.substring(0,indexCutoff)+'...';

			// 	if(dataObj.response.page_url && dataObj.response.page_url.substr(-1) =='/'){
			// 		dataObj.response.page_url = dataObj.response.page_url.substr(0,dataObj.response.page_url.length - 1);
			// 	}

			// 	if(document.location.host === dataObj.response.page_url){
			// 		dataObj.response.message 
			// 	}
			// }

			// alert(document.location.host );
			// alert(dataObj.response.page_url);

			var stopAfterGrn = false;
						if (typeof dataObj.response.pretext != 'undefined' && typeof dataObj.response.message != 'undefined' && dataObj.response.message != '' && typeof dataObj.isConvoForm != 'undefined') {
								ptDelay = dataObj.response.pretext.length * auto_delay;
				agentTyping(dataObj.response.agent_name);
				var ptResponse = getAgentMsgHtml(dataObj, dataObj.response.pretext);
				setTimeout(function(){
					removeAgentTyping();
					$srJq('#srMsgs').append(ptResponse);
					handleTts(dataObj.response.pretext);
					scrollChat();
					setTimeout(function(){
						agentTyping(dataObj.response.agent_name);
						scrollChat();
					}, 150);
				}, ptDelay);
								timeDelay = dataObj.response.message.length * auto_delay + ptDelay + 150;
				var response = getAgentMsgHtml(dataObj, dataObj.response.message);
			} else if (typeof dataObj.response.message != 'undefined' && dataObj.response.message != '') {
								console.log("MESSAGE: " + dataObj.response.message);
				if(dataObj.response.virtual_msg_type == 'results-response' && dataObj.response.message.match(/(?:\*).*(?:\*)/)) {
					dataObj = handleResultsResponse(dataObj);
				} else if(dataObj.response.virtual_msg_type == 'ClickThrough' || dataObj.response.virtual_msg_type == 'ClickThroughEnd' || dataObj.response.virtual_msg_type == 'click-through-unupdated') {
					dataObj = handleClickThrough(dataObj);
				} else if(dataObj.response.hasOwnProperty('trigger_qsf_redirect') && (dataObj.response.virtual_msg_type == 'QuickSearchForm' || dataObj.response.virtual_msg_type == 'QuickSearchFormEnd' || dataObj.response.virtual_msg_type == 'quick-search-form')) {
					dataObj = handleQuickSearchForm(dataObj);
				} else if(dataObj.response.hasOwnProperty('cancel_appts')) {
					handleApptCancellationDates(dataObj);
 				}

				console.log(dataObj);
				if(typeof(dataObj) === "undefined") return false;
							} else {
				stopAfterGrn = true;
			}

						var overrideCall = false;
			if (dataObj.response.hasOwnProperty('grn_msg')) {
								if (typeof dataObj.response.grn_msg.override != 'undefined' && dataObj.response.grn_msg.override == 1) {
					overrideCall = true;
				}
								if (stopAfterGrn === true) {
										var addn_data = '<div class="srEndChat positive"><p>' + dataObj.response.grn_msg.msg + '</p></div>';
					$srJq('#srMsgs').append(addn_data);
					handleTts(addn_data);
					toSimpleForm();
					$srJq('#srChatForm').removeClass('details');
										if(redistribute) srPlink();
					scrollChat();
				}
			}

			if (dataObj.hasOwnProperty('integration_override')) {
				toSimpleForm();
			}

						scrollChat();
			
			if (stopAfterGrn === false) {

				var startingIndex = 0;
				renderAutoMessage(dataObj, startingIndex);
			}

						if(dataObj.response.hasOwnProperty('cancel_call') && dataObj.response.cancel_call == true && dataObj.response.hasOwnProperty('call_ref') && dataObj.response.call_ref != '' && dataObj.response.call_ref != null){
				socket.emit('call cancel', '302220474411', dataObj.response.call_ref);
				clearTimeout(srSpecifyHide);
				delete srSpecifyHideSpec;
				$srJq('#srMsgs .srEndChat.phone:last').html("<p>The callback request has been cancelled.</p>").show();
				$srJq('#srSpecifyTime').off('click');
				$srJq('#srSpecifyTimeBtn').off('click');
			} else if (dataObj.response.hasOwnProperty('cancel_call') && dataObj.response.cancel_call == true && dataObj.response.hasOwnProperty('call_ref') && dataObj.response.call_ref == null) {
				clearTimeout(srSpecifyHide);
				delete srSpecifyHideSpec;
				$srJq('#srMsgs .srEndChat.phone:last').html("<p>The callback request has been cancelled.</p>").show();
				$srJq('#srSpecifyTime').off('click');
				$srJq('#srSpecifyTimeBtn').off('click');
			}


			$srJq('#srMsgs').linkify({ target: '_blank' });

			if (typeof timeDelay == 'undefined') {
				var timeDelay = 1500;
			}
			return timeDelay;

			function renderAutoMessage(dataObj,index){

				// if(!typeof dataObj.response.expandedAnswerMessage != 'undefined' ){
				// 	dataObj.response.message = dataObj.response.expandedAnswerMessage
				// 	if(dataObj.response.expandedAnswerMessage.indexOf('<ul') === 0 || dataObj.response.expandedAnswerMessage.indexOf('<ul') === 0){
				// 		character_count_threshold = 0;
				// 	}
				// }

				var message = dataObj.response.message.trim();
				message = formatAutoMessageStrForRegularExpression(message);

				var splitMessage = getSplitMessageString(message,index,character_count_threshold);

				if(index >= message.length){
										enableChatForm();
					return;
				}

				if(splitMessage.trim().length === 0){
										index = getCutOffIndex(message,index,character_count_threshold) +1 ;
					return renderAutoMessage(dataObj,index);
				}

				index = getCutOffIndex(message,index,character_count_threshold);

				timeDelay = splitMessage.length * auto_delay;

				var response = getAgentMsgHtml(dataObj, splitMessage);
				disableChatForm();
				setTimeout(function(){

					scrollChat();
					agentTyping(dataObj.response.agent_name);
					setTimeout(function () {

						$srJq('#srMsgs').append(response);
						if(typeof(dataObj.response.message) !== "undefined") handleTts(dataObj.response.message);
						removeAgentTyping();
						scrollChat();

						$srJq("#srContent .feedback-prechat-container").removeClass("cc-exists");

												if (dataObj.response.hasOwnProperty('form') && dataObj.response.form != '' && dataObj.response.form != null && dataObj.response.form != "address-lookup") {

							var form = dataObj.response.form;
							if(dataObj.response.form.indexOf('CC*') === -1) {
								form += '<p class=\"srDataSecure\"><span>Data Once</span> We only use this information to contact you regarding your enquiry.</p><a href="#submit" rel="srSubmitMessage" name="form" class="srFormBtn">Submit</a>';
							} else {
															}
							form = form.replace('CB*', '').replace('CC*', '').replace(/<br \/>/g,'');
							$srJq('#srInputs').html(form);
							$srJq('#srChatForm').addClass('details');
							if(isMobileUx) {
								prepareMobileUxChatForm();
								checkRecentMsgHeight();
															}
														handleAddressLookups(true);
														$srJq('a[rel="srSubmitMessage"]').off('click');
							$srJq('a[rel="srSubmitMessage"]').click(function(e){
								e.preventDefault();
								var params = $srJq(this).attr('name');
								if(typeof params != 'undefined'){
									submitMessage(params);
								} else {
									submitMessage();
								}
							});

						} else if ( dataObj.response.hasOwnProperty('form') && dataObj.response.form == "address-lookup" ) {

														srHandleAddressLookup(10);

						}

												if(dataObj.response.hasOwnProperty('dl_redirect') && dataObj.response.dl_redirect != ''){
							handleRedirect(dataObj.response);
						}

						processGrnMsg(dataObj);

												if(dataObj.response.hasOwnProperty('callback') && dataObj.response.callback == 1){

							var haveNo = $srJq('#srNoExists').val();
							if(haveNo == 1 || (dataObj.response.hasOwnProperty('haveno') && dataObj.response.haveno == 1)){
																if (overrideCall === false) {

									setTimeout(function () {
																				var ref = 'ch-';
										if(dataObj.response.hasOwnProperty('callback_funnel') && dataObj.response.callback_funnel == 1){
											ref = 'sf-';
										}
																					scope.greenTimeout = setTimeout(function(){
												if (dataObj.response.hasOwnProperty('cb_exists') && dataObj.response.cb_exists == 1){
																										var end_msg = '<div class="srEndChat phone"><p>A call has already been scheduled. We will be in touch as soon as we can.</p></div>';
													if(redistribute) recordAutoMsg('A call has already been scheduled. We will be in touch as soon as we can.', 'srEndChat phone');
													$srJq('#srMsgs').append(end_msg);
													handleTts(end_msg);
													scrollChat();
													if(redistribute) srPlink();
												} else {
													srEndChatWrapper(true, ref, redistribute);
												}
											}, 2000);
																			}, 3000);
																		toSimpleForm();
									$srJq('#srChatForm').removeClass('details');

								}

							} else if (!dataObj.response.hasOwnProperty('form') || dataObj.response.form == '') {
								var cb_form = '<form action="/sitereplier/chats/chat/54251525" id="chatPhoneForm" method="post" accept-charset="utf-8"><div class="input text"><label for="srNameChat">Your name</label><input name="data[Chat][full_name]" id="srNameChat" required="required" type="text"/></div><div class="input text required"><label for="email">Email address</label><input type="email" id="email" name="data[Chat][email]" required="required" /></div><div class="input text"><label for="srPhoneChat">Phone number</label><input name="data[Chat][phone_no]" id="srPhoneChat" type="text"/></div></form><button class="srSubmitForm" id="srPhoneRlBtn" onclick="return triggerCallWrapper(%ch-%, %XYXY%, %srPhoneChat%, %srNameChat%, 0); return false;">Submit</button>';
								cb_form = cb_form.replace('XYXY', chat_ref);
								cb_form = cb_form.replace(/%/g, "'");
								$srJq('#srInputs').html(cb_form);
								$srJq('#srChatForm').addClass('details');
								handleAddressLookups(false);
								if(isMobileUx) {
									checkRecentMsgHeight();
																	}
							}
						}

												enableChatForm();
						scrollChat();

						if(redistribute) srPlink();
						

						var result = $srJq('#srMsgs').linkify({ target: '_blank' });
						appendViewMoreLinkToResponse();
												if(overrideCall === false && dataObj.response.hasOwnProperty('redirect') && dataObj.response.redirect != 'email'){
							if(dataObj.hasOwnProperty('redistributed')) {
								var add_chat = '<div class="srEndChat chat"><p>Your chat is being transferred to our team who will answer shortly.</p></div>';
								// recordAutoMsg('', 'srEndChat chat', 1, redistribute);
								$srJq('#srMsgs').append(add_chat);
								handleTts(add_chat);
								$srJq('#srMsgs').linkify({ target: '_blank' });
								scrollChat();
							} else if(!dataObj.response.hasOwnProperty('form') || dataObj.response.form == "") {
								switchLive(chat_ref, dataObj.response.redirect);
							}
						}

												if(overrideCall === false && dataObj.hasOwnProperty('emailed') && dataObj.emailed == 1){
							srEndChatWrapper('emailed');
						}

																			scope.chat.hasUnknownQueries = false;
						
						if (scope.chat.hasUnknownQueries === false && typeof meMsgShown == 'undefined') {
																				}

												urlTransfer(response);

						index++;
						console.log('##index passed on next iteration##',index);
						renderAutoMessage(dataObj,index);
					}, timeDelay);

				},500);
			}
		}

		function getDynamicValues(selector, numeric, formatting) {
			var firstChar = $srJq(selector).first().text().charAt(0);
			var values = [];
			var floatValues = [];
			var hasValue = false;
			if(firstChar.match(/^[0-9a-zA-Z]+$/)) {
				var currencySymbol = "";
			} else {
				var currencySymbol = $srJq(selector).first().text().replace(/\n/ig, '').charAt(0).match(/[^\d,]/g);
			}
			var aVal;
			$srJq(selector).each(function(index, value) {
				var floatVal = parseFloat($srJq(this).text().replace(/[^\d.-]/g, ''));
				if (floatVal != "NaN" && !isNaN(floatVal)) {
					floatValues.push(floatVal);
					hasValue = true;
				}
				if(typeof(numeric) == "undefined" || numeric === false || (typeof(numeric) != "undefined" && numeric && !isNaN(floatVal))) {
					if(typeof(formatting) === "undefined" || formatting == "") {
						aVal = $srJq(this).html().replace(/<\/h[^>]*>/g, "<br />").replace(/<\/p>/g, "<br />").replace(currencySymbol, '').replace(/(<((?!br)[^>]+)>)/ig, "").trim();
						values.push(aVal);
					} else {
						var subElements = formatting.match(/[^{\}]+(?=})/g);
						if(subElements && subElements.length > 0) {
							var str = formatting;
							for(var i in subElements) {
								var regexp = new RegExp(subElements[i].replace(/\(/g, "\\(").replace(/\)/g, "\\)").replace(/\:/g, "\\:"), "g");
								str = str.replace(regexp, $srJq(this).find(subElements[i]).text()).replace(/{|}/g, "").replace(/&nbsp;/, " ").trim();
							}
						} else {
							var str = "";
						}
						values.push(str.replace(currencySymbol, ''));
					}
				}
			});
			if(typeof numeric != "undefined" && numeric) {
				if($srJq(selector).length > 0 && !hasValue) {
					return 'parse-failure';
				}
			}
			return {
				values: values,
				floatValues: floatValues,
				currencySymbol: currencySymbol
			};
		}

		function handleApptCancellationDates(dataObj) {
			var appt_btns = "";
			$srJq("body").off("click", ".srCancelAppt");
			$srJq("body").on("click", ".srCancelAppt", function() {
				$srJq("#srContent .feedback-prechat-container").removeClass("cc-exists");
				handleCancelAppt($srJq(this).data("value"));
			});
		}

		var apptCancelWait = false;
		function handleCancelAppt(value) {
			toSimpleForm();
			$srJq("#srMsgSender").val(value);
			submitMessage();
			$srJq("#srInputs").addClass("text-center").html('<img src="//app.meetami.ai/img/core/bg/loading.gif" class="loading loading-mini" alt="Loading..." />');
			apptCancelWait = true;
		}

		function handleResultsResponse(dataObj, isLast) {
			if(dataObj.response.target_url !== null) {
				var urlLength = dataObj.response.target_url.length;
				var curUrl = window.location.href;
				if(curUrl.substr(0, urlLength) !== dataObj.response.target_url) {
					dataObj.failed = true;
					return dataObj;
				}
			}
			var resultsResponsePre = dataObj.response.message;
			if(dataObj.response.message.indexOf('*LOWEST*') >= 0 && typeof(dataObj.response.lowest_css_selector) !== "undefined" && dataObj.response.lowest_css_selector != "") {
				var lowest = getDynamicValues(dataObj.response.lowest_css_selector, true);
				if(lowest == 'parse-failure') {
					dataObj.response.message = dataObj.response.parse_failure_message;
				} else if(lowest.floatValues.length > 0) {
					dataObj.response.message = dataObj.response.message.replace('*LOWEST*', lowest.currencySymbol + Math.min.apply(null, lowest.floatValues));
				}
			}
			if(dataObj.response.message.indexOf('*HIGHEST*') >= 0 && typeof(dataObj.response.highest_css_selector) !== "undefined" && dataObj.response.highest_css_selector != "") {
				var highest = getDynamicValues(dataObj.response.highest_css_selector, true);
				if(highest == 'parse-failure') {
					dataObj.response.message = dataObj.response.parse_failure_message;
				} else if(highest.floatValues.length > 0) {
					dataObj.response.message = dataObj.response.message.replace('*HIGHEST*', highest.currencySymbol + Math.max.apply(null, highest.floatValues));
				}
			}
			if(dataObj.response.message.indexOf('*AVERAGE*') >= 0 && typeof(dataObj.response.average_css_selector) !== "undefined" && dataObj.response.average_css_selector != "") {
				var average = getDynamicValues(dataObj.response.average_css_selector, true);
				if(average == 'parse-failure') {
					dataObj.response.message = dataObj.response.parse_failure_message;
				} else if(average.floatValues.length > 0) {
					dataObj.response.message = dataObj.response.message.replace('*AVERAGE*', average.currencySymbol + (average.floatValues.reduce(function(a,b){return a+b;}) / average.floatValues.length).toFixed(2));
				}
			}
			if(dataObj.response.message.indexOf('*LIST-ALL*') >= 0 && typeof(dataObj.response.list_all_css_selector) !== "undefined" && dataObj.response.list_all_css_selector != "") {
				var listAll = getDynamicValues(dataObj.response.list_all_css_selector, false, dataObj.response.list_all_formatting);
				if(listAll.values.length > 0) {
					var listValues = [];
					$srJq.each(listAll.values, function(lindex, lvalue) {
						if(listAll.currencySymbol != "") {
							lvalue = listAll.currencySymbol + lvalue;
						}
						listValues.push(lvalue);
					});
					if(listValues.length > 0) dataObj.response.message = dataObj.response.message.replace('*LIST-ALL*', ' - ' + listValues.join("<br /> - "));
				}
			}
			if(dataObj.response.message.search(/(LIST-)+[0-9]/) != -1 && typeof(dataObj.response.list_n_css_selector) !== "undefined" && dataObj.response.list_n_css_selector != "") {
				var listN = getDynamicValues(dataObj.response.list_n_css_selector, false, dataObj.response.list_n_formatting);
				var numToList = parseInt(dataObj.response.message.charAt(dataObj.response.message.search(/(LIST-)+[0-9]/) + 5));
				if(listN.values.length > 0) {
					var listValues = [];
					var c = 0;
					$srJq.each(listN.values, function(lindex, lvalue) {
						if(c < numToList) {
							if(listN.currencySymbol != "" && listN.currencySymbol != "↵") {
								lvalue = listN.currencySymbol + lvalue;
							}
							listValues.push(lvalue);
							c++;
						}
					});
					if(listValues.length > 0) {
						if (listValues.length == 1) {
							dataObj.response.message = dataObj.response.message.replace(/(\*LIST-)+[0-9]+(\*)/, listValues.join(""));
						} else {
							dataObj.response.message = dataObj.response.message.replace(/(\*LIST-)+[0-9]+(\*)/, ' - ' + listValues.join("<br />- "));
						}
					}
				}
			}
			var chat_ref = getChatId();
			var client_ref = '302220474411';
			if(dataObj.response.message.replace(/\r?\n|\r/g, " ").indexOf(/\*.*\*/) != -1 || dataObj.response.message.indexOf("LIST-") != -1 || dataObj.response.message.indexOf("*LOWEST*") != -1 || dataObj.response.message.indexOf("*HIGHEST*") != -1 || dataObj.response.message.indexOf("*AVERAGE*") != -1) {
				if(isLast) dataObj.response.message = dataObj.response.failure_message;
				dataObj.failed = true;
			} else {
				dataObj.failed = false;
			}
			if(isLast || !dataObj.failed) {
				$srJq.ajax({
					url: "//app.meetami.ai/results_response/update_variable_message/",
					type: "POST",
					dataType: "json",
					data: {
						chat_ref: chat_ref,
						client_ref: client_ref,
						pre_message: resultsResponsePre,
						post_message: dataObj.response.message
					},
					success: function(data) {
						console.log(data);
					},
					error: function(errorThrown) {
						console.log(errorThrown);
					}
				});
				dataObj.response.message = dataObj.response.message.replace(/(\r\n|\n\r|\r|\n)/g, "<br>");
			}
			if(!isLast && dataObj.failed) {
				dataObj.response.skip = 1;
			}
			return dataObj;
		}

		function handleQuickSearchForm(dataObj) {
			if($srJq(dataObj.response.search_input_selector).length > 0 && $srJq(dataObj.response.submit_button_selector).length > 0) {
				if(typeof(dataObj.response.terms) === 'string') dataObj.response.terms = JSON.parse(dataObj.response.terms);
				var term_string = dataObj.response.terms.join(" ");
				$srJq(dataObj.response.search_input_selector).val(term_string);
				$srJq(dataObj.response.submit_button_selector).trigger("click");
			} else {
				dataObj.response.message = dataObj.response.no_form_negative_message;
				return dataObj;
			}
		}

		function handleClickThrough(dataObj) {
			var terms = dataObj.response.terms;
			var name_css_selector = dataObj.response.name_css_selector;
			var chat_ref = getChatId();
			var client_ref = '302220474411';
			if(typeof(terms) == 'object') {
				var tmp = terms;
				terms = [];
				for(var i in tmp) {
					terms.push(tmp[i]);
				}
			}
			if(terms.length > 0) {
				var nameObjects = $srJq(name_css_selector);
				var nameObjectsText = [];
				$srJq(nameObjects).each(function(index, value) {
					nameObjectsText.push($srJq(value).text());
				});
				var matches = valueScores(terms, nameObjectsText);
				if(typeof(matches) !== "undefined" && matches.length > 0) {
					if(matches.length == 1) {
						var foundName = "\"" + $srJq(nameObjects[matches[0]]).text() + "\"";
						if(dataObj.response.hasOwnProperty('trigger_ct_redirect') || dataObj.response.hasOwnProperty('no_confirmation_toggle')) {
							var triggerElement = $srJq(nameObjects[matches[0]]).parents(dataObj.response.containing_css_selector).find(dataObj.response.click_through_css_selector);
							if(!dataObj.response.hasOwnProperty('no_confirmation_toggle')) {
								triggerElement.trigger("click");
							} else {
								$srJq.ajax({
									url: "//app.meetami.ai/chats/update_click_through_redirected/" + client_ref + "/" + chat_ref,
									type: "POST",
									success: function(data) {
										var dataObj = JSON.parse(data);
										console.log(dataObj);
										triggerElement.trigger("click");
									},
									error: function(data) {
										console.log(data);
									}
								});
							}
							return;
						} else {
							dataObj.response.message = dataObj.response.item_found_message.replace("*MATCH*", foundName);
							if(dataObj.response.message.indexOf("*ADDITIONAL*" != -1) && dataObj.response.additional_css_selector != "" && dataObj.response.containing_css_selector != "") {
								dataObj.response.message = dataObj.response.message.replace("*ADDITIONAL*", $srJq(nameObjects[matches[0]]).parents(dataObj.response.containing_css_selector).find($srJq(dataObj.response.additional_css_selector)).text());
							}
							$srJq.ajax({
								url: "//app.meetami.ai/chats/update_click_through_confirmation/" + client_ref + "/" + chat_ref,
								type: "POST",
								data: {
									msg: dataObj.response.message
								},
								success: function(data) {
									var dataObj = JSON.parse(data);
									console.log(dataObj);

								},
								error: function(data) {
									console.log(data);
								}
							});
						}
					} else if(matches.length > 1) {
						var clarifyNames = [];
						for(var i in matches) {
							clarifyNames.push("\"" + $srJq(nameObjects[matches[i]]).text() + "\"");
						}
						dataObj.response.message = dataObj.response.multi_clarification_message.replace("*MATCHES*", ' - ' + clarifyNames.join("<br /> - "));
					}
				} else {
					if(!dataObj.response.hasOwnProperty('enter_ct')) {
						dataObj.response.message = dataObj.response.none_found_message;
					}
				}
			}
			if(typeof(isEnd) === "undefined") var isEnd = null;
			$srJq.ajax({
				url: "//app.meetami.ai/chats/update_recent_click_through_msg/" + client_ref + "/" + chat_ref,
				type: "POST",
				data: {
					msg: dataObj.response.message,
					end: isEnd
				},
				success: function(data) {
					var dataObj = JSON.parse(data);
					console.log(dataObj);

				},
				error: function(data) {
					console.log(data);
				}
			});
			return dataObj;
		}

				function valueScores(needles, elements) {
			var results = [];
			for(var i in needles) {
				var nameObjectCount = 0;
				for(var n in elements) {
					if(!results.hasOwnProperty(nameObjectCount)) {
						results[nameObjectCount] = {fullWord: 0, partialWord: 0, smallNeedle: false, elementIndex: parseInt(n)};
					}
					var fullWordMatch = false;
					var elementsSplit = elements[n].split(" ");
					for(var s in elementsSplit) {
						if(needles[i].toLowerCase() == elementsSplit[s].toLowerCase()) {
							fullWordMatch = true;
							results[nameObjectCount].fullWord = parseInt(results[nameObjectCount].fullWord + 2);
						}
					}
					if(!fullWordMatch && elements[n].toLowerCase().indexOf(needles[i].toLowerCase()) != -1) {
						if(needles[i].length < 3) {
							results[nameObjectCount].smallNeedle = true;
						}
						results[nameObjectCount].partialWord = parseInt(results[nameObjectCount].partialWord + 1);
					}
					nameObjectCount++;
				}
			}
			var highestScore = -1;
			var highestIndexes = [];
			for(var i in results) {
				if(results[i].fullWord == 0 && results[i].partialWord == 1 && results[i].smallNeedle == true) {
					delete results[i];
				} else {
					var combinedScore = results[i].fullWord + results[i].partialWord;
					if(combinedScore == 0) continue;
					if(combinedScore > highestScore) {
						highestScore = combinedScore;
						highestIndexes = [results[i].elementIndex];
					} else if(combinedScore == highestScore) {
						highestScore = combinedScore;
						highestIndexes.push(results[i].elementIndex);
					}
				}
			}
						return highestIndexes;
		}
		window.valueScores = valueScores;

		function processGrnMsg (dataObj){
console.log(dataObj);
			if (dataObj.hasOwnProperty('response') && dataObj.response.hasOwnProperty('grn_msg') && (!dataObj.response.hasOwnProperty('form') || (dataObj.response.hasOwnProperty('form') && dataObj.response.form == ''))) {
								var addn_data = '<div class="srEndChat positive"><p>' + dataObj.response.grn_msg.msg + '</p></div>';
				$srJq('#srMsgs').append(addn_data);
				handleTts(addn_data);
				handleAddressLookups(false);
								srPlink();
				scrollChat();
			}
		}

				function trackDept (data) {

			if ( typeof data.department_id != 'undefined' && data.department_id != null ) {
				var prev = $srJq('#chatDept').val();
				if (prev != data.department_id) {
					$srJq('#chatDept').val(data.department_id);
					updateAvailableAgents(data.department_id);
				}
			}

		}

				function handleRedirect (dl_data) {

			setTimeout(function(){
				window.location.href = dl_data.dl_redirect;
			}, dl_data.dl_delay * 1000);

		}

				function updateAvailableAgents (dept_id) {

			if (typeof dept_id == 'undefined' || (typeof(dept_id) == 'string' && dept_id == '')) {

								socket.emit('agents customer query', '302220474411');

			} else {

								socket.emit('agents customer query', '302220474411', dept_id);

			}
						socket.emit('ami_agents customer query', '140');

		}

				function containsApprovedDomain ( url ) {

						var approvedDomains = [];
			approvedDomains.push("https://faq.liverpoolfc.com/");
							approvedDomains.push("liverpoolfc.com");
							approvedDomains.push("store.liverpoolfc.com");
							approvedDomains.push("faq.liverpoolfc.com");
							approvedDomains.push("demo.meetami.ai");
							approvedDomains.push("meetami.ai");
							approvedDomains.push("app.meetami.ai");
							approvedDomains.push("chat.meetami.ai");
			
						for ( var i in approvedDomains ) {
								if (url.indexOf(approvedDomains[i]) > -1) {
					return true;
				}
			}

						return false;
		}

				function urlTransfer (response_content) {

              return;
      		}

		function transferToBumpyard() {
			if(typeof chat_ref == "undefined") {
				var chat_ref = getChatId();
			}
			console.log("transferToBumpyard");
						$srJq.ajax({
				url: "//app.meetami.ai/chats/transfer_to_bumpyard/" + chat_ref + "/" + client_ref,
				type: "GET",
				success: function(data) {
					console.log("Transfer to bumpyard success callback: ");
					console.log(data);

				},
				error: function(error) {
					console.log(error);
				}
			});
		}

		var integrationReclaimTimeout = setTimeout(function(){}, 1);

		function reclaimIntegrationChat() {
			console.log("RECLAIMING NOW!");
			srSwitchAuto(true);
		}

				function switchLive(chat_ref, transfer_type){

			if (transfer_type != 'BY') {
				transferToBumpyard();
			}

						var agentsAvailable = $srJq('#agentsList').val();
			console.log('Start switchLive');
						if(agentsAvailable != '' || handedToIntegration){
				if(agentsAvailable == '') agentsAvailable = '-';
								$srJq.ajax({
					url: "//app.meetami.ai/chats/switch_chat/" + chat_ref + "/" + agentsAvailable + "/" + handedToIntegration,
					type: "GET",
					success: function(data) {
						var preData = JSON.parse(data);
						dataObj = preData.agent;
						if(typeof preData.reclaim_after !== 'undefined') {
							integrationReclaimTimeout = setTimeout(function() {
								reclaimIntegrationChat();
							}, preData.reclaim_after * 1000);
						}
						if(typeof dataObj == 'object' && dataObj.hasOwnProperty('response') && dataObj.response == 'by-sc' && transfer_type != 'BY') {
							console.log("Intercepted switch chat for existing bumpyard chat");

							if(dataObj.followup_type == "phone") {
								var add_chat = '<div class="srEndChat chat"><p>I have your details from our last conversation. I will ask a colleague to call.</p></div>';
								recordAutoMsg('I have your details from our last conversation. I will ask a colleague to call.', 'srEndChat chat', 1);
							} else {
								var add_chat = '<div class="srEndChat chat"><p>Thanks for providing your details, one of my colleagues will be in touch shortly.</p></div>';
								recordAutoMsg('Thanks for providing your details, one of my colleagues will be in touch shortly.', 'srEndChat chat', 1);
							}
							$srJq('#srMsgs').append(add_chat);
							handleTts(add_chat);
							$srJq('#srMsgs').linkify({ target: '_blank' });
							scrollChat();
														toSimpleForm();
							$srJq('#srChatForm').removeClass('details');

														trackTyping();

						} else if(preData.hasOwnProperty('integration-override')) {
							scrollChat();
														toSimpleForm();
							$srJq('#srChatForm').removeClass('details');

														trackTyping();
						} else if(data != 0){

														var chatSoFar = $srJq('#srMsgs').html();
							var countChatSoFar = (chatSoFar.match(/<p/g) || []).length - 1;

							createLiveChat(chat_ref, dataObj.public_id, dataObj.display_name, countChatSoFar, 'Switch to live agent chat', transfer_type);

							if (transfer_type != 'BY') {
																if(preData.hasOwnProperty('integration_avail_msg')) {
									var add_avail_chat = '<p class="agent "><span>' + preData.integration_avail_msg.agent_name + ':</span> ' + preData.integration_avail_msg.message + '</p>';
									$srJq('#srMsgs').append(add_avail_chat);
								}
								if(!preData.hasOwnProperty('overridden')) {
									var add_chat = '<div class="srEndChat chat"><p>' + preData.transfer_msg + '</p></div>';
								}
																$srJq('#srMsgs').append(add_chat);
								handleTts(add_chat);
								$srJq('#srMsgs').linkify({ target: '_blank' });
								scrollChat();
																toSimpleForm();
								$srJq('#srChatForm').removeClass('details');

																trackTyping();

								

																							}

						} else {
							console.log('switchLive - End Chat');

														endReplierChat('skip');
						}
					}, error: function(e,f,g) {
						console.log(e);
					}
				});

			} else {
								if(dataObj.redirect == 'email'){
										setTimeout(function(){
						var end_msg = '<div class="srEndChat mail"><p><a target=\'_top\' href=\'https://faq.liverpoolfc.com/portal/en/kb/articles/contact-us-email-us?fromarticle=true\'>Please click here to email us.</a><br /></p></div>';
						recordAutoMsg('<a target=\'_top\' href=\'https://faq.liverpoolfc.com/portal/en/kb/articles/contact-us-email-us?fromarticle=true\'>Please click here to email us.</a><br />', 'srEndChat mail');
						$srJq('#srMsgs').append(end_msg);
						handleTts(end_msg);
						scrollChat();
																	}, 1500);
				}
			}
		}

		function sr_loadResponseTimer() {
			var current_cookie = $srJq.cookie('sr-act');
			if(typeof current_cookie != 'undefined') {
				current_cookie = JSON.parse(current_cookie);
				if(current_cookie.hasOwnProperty('noResponseCheck')) {
										console.log('A response timer is in progress, loading now');
					var targetTimeout = current_cookie['noResponseCheck'];
					var now = new Date().getTime();
					var noResponseTimeoutSeconds = (targetTimeout - now) / 1000;
					if(noResponseTimeoutSeconds > 0) {
						sr_startResponseTimer(noResponseTimeoutSeconds);
					}
				}
			}
		}

		function sr_startResponseTimer(noResponseTimeoutSeconds) {

			if(noResponseTimeoutSeconds === undefined) {
				noResponseTimeoutSeconds = 480;
			}
			console.log('Starting no response timer for ' + noResponseTimeoutSeconds + ' seconds');

			var timeoutMillis = noResponseTimeoutSeconds * 1000;
			var targetTimeout = new Date().getTime() + timeoutMillis;
			var targetDateTime  = new Date(targetTimeout);
			console.log('Response check will trigger at ' + targetDateTime);

			var cookieData = {
				"noResponseCheck": targetTimeout
			};

			var current_cookie = $srJq.cookie('sr-act');
			var setCookie = true;
			if(typeof current_cookie != 'undefined') {
				current_cookie = JSON.parse(current_cookie);
				if(current_cookie.hasOwnProperty('noResponseCheck')) {
										setCookie = false;
				}
			}

			var chat_ref = getChatId();
			var data = {
				chat_id: chat_ref,
				client_ref: "302220474411",
				reclaim_time: targetTimeout
			};

			if (typeof socket != 'undefined') {
				socket.emit('autochat reclaim time', data);

				sr_data['response_timer_last_reset'] = new Date().getTime();

				if(setCookie)
					$srJq.cookie('sr-act', JSON.stringify(cookieData), { path: '/', domain: domain });

								clearTimeout(sr_data['responseTimer']);
				sr_data['responseTimer'] = setTimeout(function() {
					console.log('Checking now for a response!');
					sr_reclaimChat();
				}, timeoutMillis);
			}

		}

		function sr_clearResponseTimer() {
			console.log('Clearing no response timer');
			clearTimeout(sr_data['responseTimer']);
		}

		function sr_reclaimChat() {
			console.log('Reclaiming chat');

						var current_cookie = $srJq.cookie('sr-act');
			if(typeof current_cookie != 'undefined') {
				current_cookie = JSON.parse(current_cookie);
				if(current_cookie.hasOwnProperty('noResponseCheck')) {
										delete current_cookie['noResponseCheck'];
					current_cookie['chatReclaimed'] = true;
					$srJq.cookie('sr-act', JSON.stringify(current_cookie), { path: '/', domain: domain });

					var chat_ref = getChatId();
					var data = {
						chat_id: chat_ref,
						client_ref: "302220474411"
					};

					socket.emit('autochat reclaimed', data);

					sr_getNextAction();
				}
			}
		}

		function sr_isChatReclaimed() {
			console.log('Checking if chat has been reclaimed');
			var chatReclaimed = false;
			var current_cookie = $srJq.cookie('sr-act');
			if(typeof current_cookie != 'undefined') {
				current_cookie = JSON.parse(current_cookie);
				if(current_cookie.hasOwnProperty('chatReclaimed') && current_cookie['chatReclaimed']) {
					chatReclaimed = true;
				}
			}

			console.log('Chat Reclaimed', chatReclaimed);
			return chatReclaimed;
		}

		function sr_getNextAction() {

			 
			var chat_ref = $srJq('#chat_ref').val();


			$srJq.ajax({
					url: "//app.meetami.ai/chats/get_next_action/" + client_ref + "/" + chat_ref,
					type: "POST",
					data: {data: form_data},
					success: function(data) {
						console.log('Success getting next action');
						var dataObj = JSON.parse(data);
						console.log(dataObj);
												if (typeof dataObj.responses != 'undefined') {
							for ( var i in dataObj.responses ) {
								var indObj = dataObj;
								indObj.response = dataObj.responses[i];
								handleAutoMsgs(indObj, chat_ref);
							}
						} else if (typeof dataObj.response != 'undefined') {
							handleAutoMsgs(dataObj, chat_ref);
						}
					},
					error: function(data) {
						console.error('Error getting next action');
						console.log(data);
					}
			});
		}

		function sr_resetNoResponseTimer() {

			var last_reset = sr_data['response_timer_last_reset'];
			var now = new Date().getTime();
			if(now - last_reset > 5000) {
								sr_clearResponseTimer();
				sr_startResponseTimer();
			}
		}

				function srSwitchAuto (is_integration_reclaim) {

						chat_ref = $srJq('#chat_ref').val();
			usr_ref = getUsrId();
			if(typeof is_integration_reclaim === 'undefined') is_integration_reclaim = false;

						$srJq.ajax({
				url: "//app.meetami.ai/chats/switch_chat_auto/" + chat_ref + "/" + usr_ref + "/" + is_integration_reclaim,
				type: "GET",
				success: function(data) {

					if(data != 0){

												endLiveChat(chat_ref, 'auto');

												dataObj = JSON.parse(data);
						if(dataObj.hasOwnProperty('id')){

														$srJq('#srMsgs').append('<p class="feint">The hold time is longer than I expected. Perhaps you will give me another chance to help you.</p>');
							handleTts("The hold time is longer than I expected. Perhaps you will give me another chance to help you.");
														$srJq('p.srIntro').html('You are chatting with ' + dataObj.agent_name);
							$srJq('p.srIntroPos').html(dataObj.role);
							if(typeof dataObj.agent_image != 'undefined' && dataObj.agent_image != null){
								$srJq('img.profile').replaceWith('<img src="https://s3-eu-west-1.amazonaws.com/aomg-sr-app-live/virtual_agent/agent_image/' + dataObj.agent_image_dir + '/tmb_' + dataObj.agent_image + '" alt="' + dataObj.agent_name + '" class="profile" />');
							} else {
								$srJq('img.profile').replaceWith('<span><img src="//app.meetami.ai/img/widget/default-avatar-lrg.svg" alt="' + dataObj.agent_name + '" class="profile bbl" /></span>');
							}

														srPlink();
							scrollChat();

														setTimeout(function () {
								if(typeof dataObj.agent_image != 'undefined' && dataObj.agent_image != null){
									$srJq('#srMsgs').append('<p class="agent inc-avatar"><span class="avatar-mini"><img src="https://s3-eu-west-1.amazonaws.com/aomg-sr-app-live/virtual_agent/agent_image/' + dataObj.agent_image_dir + '/tmb_' + dataObj.agent_image + '" alt="' + dataObj.agent_name + '" /></span><span>' + dataObj.agent_name + ':</span> ' + dataObj.msg + '</p>');
									handleTts(dataObj.msg);
								} else {
									$srJq('#srMsgs').append('<p class="agent"><span>' + dataObj.agent_name + ':</span> ' + dataObj.msg + '</p>');
									handleTts(dataObj.msg);
								}
								srPlink();
								scrollChat();
							}, 3000);

						}

					} else {
						checkExistingChats(chat_ref);
					}

				}, error: function(e,f,g) {
					console.log(e);
				}
			})


		}

				function disableChatForm(){
			$srJq('#srMsgSender').prop('disabled', true);
			$srJq('#srInputs input').each(function(){
				$srJq(this).prop('disabled', true);
			});
		}
		function enableChatForm(nf){
			console.log("IS INPUT MSG: ", isInputMsg);
			if($srJq('#srMsgSender').hasClass("srLoadingFakeMsgSender")) return false;
			if(typeof nf == 'undefined'){
				if (isIpad() === true) {
					$srJq('#srMsgSender').prop('disabled', false).blur();
				} else {
					$srJq('#srMsgSender').prop('disabled', false);
					if(isInputMsg) {
						$srJq('#srMsgSender').focus();
					}
				}
			} else {
				$srJq('#srMsgSender').prop('disabled', false);
			}
			$srJq('#srInputs input').each(function(){
				$srJq(this).prop('disabled', false);
			});
		}

				function checkForManExp () {

			var usrRef = getUsrId();

			$srJq.ajax({
				url: "//app.meetami.ai/chats/check_manexp/302220474411/" + usrRef,
				type: "GET",
				success: function(data) {
					if (data == 1) {
						scope.chat.hasUnknownQueries = 1;
					}
				}
			});

		}

		
		var socket = io.connect('https://chat.meetami.ai');
				socket.on('reconnect_attempt', function() {
			socket.io.opts.transports = ['websocket', 'polling'];
		});

		$srJq(function(){
						trackTyping();
							registerLoad();
						});

		function redistributeViaNode(data, type) {
			console.log("redistributing " + type);
			console.log(data);
			if(typeof(chat_ref) === "undefined") var chat_ref = getChatId();
			data.chat_id = chat_ref;
			data.client_ref = "302220474411";
			data.redistribution_type = type;
			socket.emit('redistribute', data);
		}

				function getTimeToRenderEstimate(time,message,index){
			message = formatAutoMessageStrForRegularExpression(message);

			if(index >= message.length -1){
								return time;
			}

			var splitMessage = getSplitMessageString(message,index,character_count_threshold);

			if(splitMessage.length > 0) {
				time += (splitMessage.length * auto_delay) + 500;
			}

			index = getCutOffIndex(message,index,character_count_threshold);

			return getTimeToRenderEstimate(time,message,index)
		}

		var handedToIntegration = false;

		function handleSubmitMessageSuccess(dataObj, redistribute, isForm, isValid, msg, form_data, client_ref, chat_ref, agentsAvailable, icChats, curAgents) {

			if (dataObj['type'] == 'success' && (!dataObj.hasOwnProperty('redirect') || dataObj.redirect !== 'handed_to_integration' || dataObj.hasOwnProperty('integration_override'))) {

				$srJq(".footerRate").addClass("active-chat");

				if (apptCancelWait == true) {
					toSimpleForm();
					apptCancelWait = false;
				}

								if (typeof dataObj.message != 'undefined') {
										if (isMobileUx) {
						convertMsgsMobileUx();
						bindChatMessageDraggable();
						var previousAgentMsg = $srJq('#srMsgs').find(".agent").last().find(".srMsgInnerContent").find("p").ignore("span").text();
						dismissUpToMsg(previousAgentMsg);
						var elems = [];
						elems.push($srJq('#srMsgs').find(".agent").last());
						$srJq('#srMsgs').find(".agent").last().prevAll('div, p').each(function(index, value) {
							elems.push($srJq(value));
						});
						$srJq.each(elems, function(index, value) {
							$srJq(value).animate({
								opacity: 0
							}, 200, function() {
								$srJq(value).css("opacity", 1);
								$srJq(value).addClass("srDismissed");
							});
						});
						$srJq(".srMobileUxEdit").parent().remove();
						var t = setTimeout(function() {
							dismissSpecificMsg(dataObj.message);
						}, dismissTime);
					}
				}
				console.log('sr-check-7');
				$srJq('#srFaded').remove();
								$srJq('#srMsgSender').val('');

				if (dataObj.hasOwnProperty('filter_form')) {
					handleFilterForm(dataObj.filter_form);
				}

								if (dataObj.hasOwnProperty('responses')) {

										trackDept(dataObj);

										var delay = 0;
					console.log(dataObj.responses);
					$srJq.each(dataObj.responses, function(key, response) {
						console.log("response", response);

						if (response.hasOwnProperty('handed_to_integration') && response.handed_to_integration == true) {
							is_ami = false;
							handedToIntegration = true;
							if (typeof response.integration_reclaim_after !== 'undefined') {
								console.log("Reclaiming in " + response.integration_reclaim_after + " seconds....");
								integrationReclaimTimeout = setTimeout(function() {
									reclaimIntegrationChat();
								}, response.integration_reclaim_after * 1000);
							}
						}

						if (response.hasOwnProperty('filter_form_selectors')) {
							filterFormSelectors = response.filter_form_selectors;
						}

												srCheckSearchEntry(response);
												setTimeout(function() {

														var ptObj = dataObj;
							ptObj.curResponse = response;

														
								var availableAmiAgents = $srJq('#amiAgentsList').val();
								var amiAgentStatus = $srJq('#amiAgentsStatus').val();
								var chatReclaimed = sr_isChatReclaimed();
								if (!chatReclaimed && availableAmiAgents != '') {
																		if (response.virtual_msg_type == 'negative' || amiAgentStatus == 1) {
																				console.log('Ami Agent');
										if (redistribute) submitLiveMessage(chat_ref, msg, 1);
																				enableChatForm();
																				$srJq('#amiAgentsStatus').val(1);
										var hasPretext = 0;
										if (response.hasOwnProperty('pretext')) {
											hasPretext = 1;
										}
																				$srJq.ajax({
											url: "//app.meetami.ai/chats/ami_hide/" + chat_ref + '/' + amiAgentStatus + '/' + hasPretext,
											type: "GET",
											success: function(data) {}
										});

																				setTimeout(function() {
											sr_startResponseTimer();
										}, 1000);

									} else {

																				submitLiveMessage(chat_ref, msg, 'yes');
										handlePretext(ptObj, function() {
											if (typeof response.pretext != 'undefined' && response.pretext != '') {
												submitLiveMessage(chat_ref, response.pretext, 0, response.agent_name);
											}

											handleAutoMsgs(response, chat_ref, redistribute, dataObj);
																						submitLiveMessage(chat_ref, response.message, 0, response.agent_name);
										});

									}
								} else {

									console.log('No Ami agents');
																		handlePretext(ptObj, function() {
										handleAutoMsgs(response, chat_ref, redistribute, dataObj);
									});

								}

							
						}, delay);
						if (typeof response.message != 'undefined') {
							var startTime = 0;
							var startIndex = 0;
							console.log(character_count_threshold);
							console.log('##response message##', response.message);
							delay += getTimeToRenderEstimate(startTime, response.message, startIndex) + 1000;
							console.log('##delay##', delay);
						} else {
							enableChatForm();
						}
					});

									} else if (dataObj.hasOwnProperty('response')) {

										srCheckSearchEntry(dataObj.response);

										trackDept(dataObj.response); // TODO

																var availableAmiAgents = $srJq('#amiAgentsList').val();
						var amiAgentStatus = $srJq('#amiAgentsStatus').val();
						var chatReclaimed = sr_isChatReclaimed();
						if (!chatReclaimed && availableAmiAgents != '') {
														if (dataObj.response.virtual_msg_type == 'negative' || amiAgentStatus == 1) {
																console.log('Ami Agent');
								if (redistribute) submitLiveMessage(chat_ref, msg, 1);
																enableChatForm();
																$srJq('#amiAgentsStatus').val(1);
								var hasPretext = 0;
								if (dataObj.response.hasOwnProperty('pretext')) {
									hasPretext = 1;
								}
																$srJq.ajax({
									url: "//app.meetami.ai/chats/ami_hide/" + chat_ref + '/' + amiAgentStatus + '/' + hasPretext,
									type: "GET",
									success: function(data) {}
								});


																setTimeout(function() {
									sr_startResponseTimer();
								}, 1000);

							} else {

																submitLiveMessage(chat_ref, msg, 'yes');
								handlePretext(dataObj, function() {
									if (typeof dataObj.response.pretext != 'undefined' && dataObj.response.pretext != '') {
										submitLiveMessage(chat_ref, dataObj.response.pretext, 0, dataObj.response.agent_name);
									}

									handleAutoMsgs(dataObj, chat_ref, redistribute);
																		submitLiveMessage(chat_ref, dataObj.response.message, 0, dataObj.response.agent_name);
								});

							}

						} else {

							console.log('No Ami agents');
														handlePretext(dataObj, function() {
								handleAutoMsgs(dataObj, chat_ref, redistribute);
							});

						}

					
				} else {

					var language = getLanguage();

										if ($srJq('#srMsgSender').length) {
												submitLiveMessage(chat_ref, msg, undefined, undefined, undefined, dataObj);
					}

				}

				handleTrackScript(isForm, 'chat-form');

			} else if (dataObj.hasOwnProperty('redirect') || dataObj['type'] == 'redirect') {

				handleTrackScript(isForm, 'chat-form');

								if (typeof dataObj.message != 'undefined' && dataObj.message != '') {
					$srJq('#srMsgs').append('<p><span>You:</span> ' + dataObj.message + '</p>');
					handleTts(dataObj.message);
					console.log('sr-check-8');
					$srJq('#srFaded').remove();
										$srJq('#srMsgSender').val('');
				}

				if(dataObj.redirect == 'email'){
					
						if(dataObj.hasOwnProperty('callback_id')){
            				var trigger = 'ch';
							if(dataObj.hasOwnProperty('callback_trigger')){
								trigger = dataObj.callback_trigger;
							}
							setTimeout(function () {
																if (dataObj.hasOwnProperty('cb_exists') && dataObj.cb_exists == 1){
																		var end_msg = '<div class="srEndChat phone"><p>A call has already been scheduled. We will be in touch as soon as we can.</p></div>';
									if(redistribute) recordAutoMsg('A call has already been scheduled. We will be in touch as soon as we can.', 'srEndChat phone');
									$srJq('#srMsgs').append(end_msg);
									handleTts(end_msg);
									scrollChat();
									if(redistribute) srPlink();

								} else {
									srEndChatWrapper(true, trigger, redistribute);
								}
							}, 2500);

						} else {

						  	setTimeout(function () {
																var end_msg = '<div class="srEndChat mail"><p><a target=\'_top\' href=\'https://faq.liverpoolfc.com/portal/en/kb/articles/contact-us-email-us?fromarticle=true\'>Please click here to email us.</a><br /></p></div>';
								$srJq('#srMsgs').append(end_msg);
								handleTts(end_msg);
								if(redistribute) recordAutoMsg('<a target=\'_top\' href=\'https://faq.liverpoolfc.com/portal/en/kb/articles/contact-us-email-us?fromarticle=true\'>Please click here to email us.</a><br />', 'srEndChat mail');
								scrollChat();
								if(redistribute) srPlink();
								triggerDP(true, false);
							}, 2500);

						}

															if (typeof dataObj.msg != 'undefined') {
						var agent_image = $srJq('#srMsgs .agent.inc-avatar .avatar-mini img').first().attr('src');
						var agent_name = $srJq('#srMsgs').find('p.agent span:not([class])').html();
						if (typeof agent_image != 'undefined' && agent_image.indexOf('default-avatar-lrg.svg') == -1) {
							response = '<p class="agent inc-avatar"><span class="avatar-mini"><img src="' + agent_image + '" alt="' + agent_name + '" /></span><span>' + agent_name + '</span> ' + dataObj.msg + '</p>';
						} else {
							response = '<p class="agent"><span>' + agent_name + '</span> ' + dataObj.msg + '</p>';
						}

						$srJq('#srMsgs').append(response);
						handleTts(dataObj.msg);
					}

					processGrnMsg(dataObj);

										toSimpleForm();
					$srJq('#srChatForm').removeClass('details');

					setTimeout(function() {
											}, 5000);

										scrollChat();

										autoClose = setTimeout(function() {
						endReplierChat('skip', 'nof');
					}, 600000);

				} else {

					if (redistribute) switchLive(chat_ref, dataObj.tns_type);

				}

			} else if (dataObj.hasOwnProperty('noagents')) {
								endReplierChat('skip', 'nof');

			} else {
							}

			if (redistribute) redistributeViaNode(dataObj, "message");
		}

      socket.on("redistribute message", function(data) {
        console.log("recevied redistribute payload:");
        console.log(data);
        handleSubmitMessageSuccess(data, false);
      });

      socket.on("redistribute close", function(data) {
        console.log("recevied redistribute close payload:");
        console.log(data);
        closeReplier(true);
      });

	  socket.on("redistribute endchat", function(data) {
        console.log("recevied redistribute end chat payload:");
        console.log(data);
	  	endReplierChat('skip');
      });

      socket.on("redistribute dp-question", function(data) {
        if(data.hasOwnProperty("trigger_dp_questions")) return false;
        console.log("recevied redistribute dp payload:");
        console.log(data);
        if(data.hasOwnProperty('dpQuestions')) {
        	dpQuestions = data.dpQuestions;
        }
        if(data.usr_msg == true) {
          $srJq("#srMsgs").append(
  			"<p><span>" + data.question + "</span></p>"
  		);

		} else {

		  if(dpQuestions.length > 0) {
  			appendDPQuestion(data.question, '', true);
  		} else {
  			endDPQuestions(true);
  		}
    }
  });

  socket.on("redistribute callback-scheduled", function(data) {
    console.log("recevied redistribute cb schedule payload:");
    console.log(data);
    displayPhoneThanks(data.time);
  });

		socket.on("reclaim bumpyard", function(data) {
      console.log("Reclaim bumpyard payload received");
      console.log(data);
      reclaimBumpyard(data.chat_ref);
    });

		function reclaimBumpyard(chat_ref) {
			$srJq.ajax({
				url: "//app.meetami.ai/chats/reclaim_bumpyard/" + chat_ref,
				type: "GET",
				success: function(data) {
					console.log("SUCCESS FROM RECLAIM BUMPYARD AJAX:");
					console.log(data);
					dataObj = JSON.parse(data);
					dataObj.type = "success";
					handlePretext(dataObj, function() {
						handleAutoMsgs(dataObj, chat_ref, true);
						submitLiveMessage(chat_ref, dataObj.response.message, 0, dataObj.response.agent_name);
					});
				}
			});
		}
		
				function registerLoad(callback){

						var current_cookie = $srJq.cookie('sr-data');
			if(typeof current_cookie != 'undefined'){
				current_cookie = JSON.parse(current_cookie);
			}
			var current_session = $srJq.cookie('sr-cur');
			var current_chat = $srJq.cookie('sr-ec');
			if(typeof current_chat == 'undefined'){
				current_chat = 0;
			}

						if(typeof current_cookie == 'undefined' || typeof current_cookie['uid'] == 'undefined' || current_cookie['uid'] == ''){
								$srJq.ajax({
					url: "//app.meetami.ai/chats/register_user/302220474411",
					type: "GET",
					success: function(data) {

												dataObj = JSON.parse(data);
						current_cookie = {};
						current_cookie['uid'] = dataObj.user_ref;
						current_cookie['os'] = current_cookie['platform'] = dataObj.os;
						current_cookie['browser'] = dataObj.browser;
						current_cookie['device'] = dataObj.device;
						current_cookie['ip'] = dataObj.ip;
						current_cookie['country_code'] = dataObj.country_code;
												current_cookie = JSON.stringify(current_cookie);

						$srJq.cookie('sr-data', current_cookie, { expires: 30, path: '/', domain: domain });

												var written_cookie = $srJq.cookie('sr-data');
						if (typeof written_cookie == 'undefined' || typeof written_cookie['uid'] == 'undefined'){
							console.log('Failure to load up cookie first time');
														setTimeout(function(){
								console.log('Set retry of register');
								registerLoad();
							}, 2500);

						} else {
														var new_user = {
								user_ref: dataObj.user_ref,
								browser: dataObj.browser,
								os: dataObj.os,
								device: dataObj.device,
								ip: dataObj.ip,
								country_code: dataObj.country_code,
								logon_time: new Date(),
								cur_chat: current_chat,
								chat_no: 0,
								client_ref: '302220474411',
								visit_no: 1,
								page_url: document.URL,
								client_id: '140'
							}
console.log('Socket user data');
							socket.emit('customers load', new_user);

														var winWidth = getScreenWidth();
							if(winWidth < 720){
								$srJq('#srHeader h4 > a').attr('href','https://app.meetami.ai/chats/chat/302220474411/mob/' + dataObj.user_ref).attr('rel', '').attr('target', '_blank');
							}

														var launchChat = $srJq.cookie('sr-lc');
							if(launchChat !== undefined){
								createChat();
								$srJq.removeCookie('sr-lc', { path: '/', domain: domain });
							}
						}
						if(typeof callback !== "undefined") {
							callback();
						}
					}
				});
			} else {

								$srJq.ajax({
					url: "//app.meetami.ai/chats/track_load/302220474411/" + current_cookie['uid'],
					type: "GET",
					success: function(data) {	}
				});

				if(typeof current_cookie['visit_no'] != 'undefined'){
					current_cookie['visit_no']++;
				} else {
					current_cookie['visit_no'] = 1;
				}

				if(typeof current_cookie['country_code'] == 'undefined'){
					current_cookie['country_code'] = '';
				}
								var new_user = {
					user_ref: current_cookie['uid'],
					browser: current_cookie['browser'],
					os: current_cookie['os'],
					ip: current_cookie['ip'],
					country_code: current_cookie['country_code'],
					device: current_cookie['device'],
					logon_time: current_session,
					cur_chat: current_chat,
					chat_no: current_cookie['chat_no'],
					client_ref: '302220474411',
					visit_no: current_cookie['visit_no'],
					page_url: document.URL,
					client_id: '140'
				}
				socket.emit('customers load', new_user);

								var launchChat = $srJq.cookie('sr-lc');
				if(launchChat !== undefined){
					createChat();
					$srJq.removeCookie('sr-lc', { path: '/', domain: domain });
				}
				// Return the callback (if it is defined)
				if(typeof callback !== "undefined") {
					callback();
				}
			}
		}

		function populateAgentsList(agents) {
			var chat_ref = getChatId();
			var dept = getDeptId();
			populateAgentsDom(agents);
			console.log({"Client":{"id":"140","theme_id":null,"client_name":"Liverpool Football Club","account_id":"302220474411","api_key":"ffee421ce9810f4a8838d13a0e34b553","client_website":"https:\/\/faq.liverpoolfc.com\/","website_name":"Liverpool Footbal Club","client_manager_phone":"+447980305283","client_manager_email":"lawrence@meetami.ai","client_manager":"Lawrence Turner","is_reseller":"0","parent_client":"0","is_active":true,"expiry_date":"2030-11-30","created":"2018-07-10 17:26:14","modified":"2021-02-10 18:03:03","agent_limit":"100","can_autochat":"1"},"Skin":{"id":"140","client_id":"140","colour":"d7061b","success_colour":"78e254","note_colour":"404040","is_transparent":false,"bubble_txt":"ffffff","agent_bubble_colour":"d70015","bubble_colour":"404759","dp_colour":"e90914","email_colour":"","record_colour":"#D5171C","response_link_bg_colour":"#e85353","response_link_text_colour":"#ffffff","success_text":"#3b3b3b","image":null,"image_orientation":"land","aws_image":null,"image_dir":null,"chat_image":null,"aws_chat_image":null,"chat_image_dir":null,"widget_header_image":"lfc badge small.png","aws_widget_header_image":"https:\/\/s3-eu-west-1.amazonaws.com\/aomg-sr-app-live\/skin\/widget_header_image\/140","widget_header_image_dir":"140","widget_header_image_square":false,"widget_header_image_style":"none","chat_auto_popup_image":null,"aws_chat_auto_popup_image":null,"chat_auto_popup_image_dir":null,"image_is_tab":true,"alignment":"l","chat_size":"b","mobile_chat_size":"l","is_square":false,"display_branding":"none","link_target":"_blank","autotrigger_links":false,"uses_auto":true,"auto_screening":true,"allow_repeats":true,"block_user_details_form":false,"chat_queue":"99","queue_delay":"999","realert_chat_delay":"0","va_name":"Digital Assistant","hide_standalone_widget":false,"show_call_btn":false,"call_btn_no":"44444444444444444","auto_negative":"Sorry, but I do not understand","autochat_intro":"Hi, my name is Livi and I am a digital assistant here to help you. I may not have all the answers and if that\u2019s the case I will transfer our chat to a member of our Fan Services team to assist you. How can I help you today?","auto_intro_on":false,"auto_intro_msg":"Hi, how can I help you?","manage_neg_expect":false,"neg_expect_msg":"","auto_delay":"1","character_count_threshold":"120","serviced_chat_ami_messages":"1","trigger_chat":"60","auto_trigger":false,"block_auto_mobile":false,"neg_switch":"99","show_feedback":false,"feedback_during":false,"feedback_posn":"top","feedback_text":"<style>.button-ami{background-color:#d1001a!important;border:none!important;color:white!important;padding:15px 32px!important;text-align:center!important;text-decoration:none!important;display:inline-block!important;font-size:16px!important;margin:4px 2px!important;cursor:pointer!important}<\/style><p>If you would like to provide us with feedback please click the survey below<\/p><a href=\"https:\/\/feedback.liverpoolfc.com\/liverpool-fc\/livi\/{CHAT_REF}\" class=\"button-ami\">Click for Survey<\/a>","enable_ga_events":false,"use_gtag_ga":false,"send_customer_emails":"0","hide_tab":true,"hide_tab_id":"#liviLaunch","queue_timer_msg":"","queue_time":"0","created":"2018-07-10 17:26:14","modified":"2021-02-10 18:03:03","max_concurrent_chats":null,"conversational_forms":false,"conversational_form_email_validation":true,"separate_form_name_input":false,"address_field":false,"phone_is_required":"2","known_customers_update":false,"form_question_name":"Could you give me your name?","form_question_email":"What is your email?","form_question_phone":"What is your phone number?","feedback_callbacks":false,"transcribed_msg_autosend":"5","slow_load_thinking_time":"2","slow_load_typing_time":"5","slow_load_researching_time":"10","slow_load_chat_time":null,"very_slow_load_chat_time":"20","single_email_per_sales_lead":"0","success_border":"#55bf31"},"ClientConfigValue":{"id":"140","client_id":"140","agent_limit":"100","live_chat":true,"auto_chat":true,"max_auto_convos":"5","recovery_layers":false,"uses_mtls":false,"instant_call_back_layer":false,"call_back_recovery":false,"form_callback":false,"instant_callback":false,"ami_agents":true,"bookings":false,"audio":false,"cpv_type":"fixed","cpv_discount":null,"excess_cpv":null,"fixed_amount":null,"fixed_payment":null,"poor_feedback_threshold":"2","display_success":false,"created":"2018-07-10 17:26:14","modified":"2021-02-10 18:03:03","disable_widget":false,"chats_sales_lead_value":null,"chats_commission_percentage":null,"autochats_sales_lead_value":null,"autochats_commission_percentage":null,"callbacks_sales_lead_value":null,"callbacks_commission_percentage":null,"serviced_chat_value":"30.00","sales_commission_lead_days":null,"chats_sales_conversion_value":null,"autochats_sales_conversion_value":null,"callbacks_sales_conversion_value":null,"percentage_conversion_value":"10.00","has_zapier_sales_tracking":"0","average_sale_value":null,"conversion_goal_frequency_minutes":null,"timezone":"Europe\/London","ail_confidence_threshold":"100","ail_dynamic_confidence_threshold":"100","ail_keyword_confidence_threshold":"100","ail_notification_email_addresses":"[]","ail_clarification_upper_threshold":"25","ail_clarification_question":null,"ail_confidence_multiplier":"100","ail_document_confidence_multiplier":"1","ail_secondary_splitters":"[\",\",\":\",\";\",\"and\",\"or\",\"but\"]","ail_clarification_no_docs":true,"country_lookup":"0","display_character_limit":true,"character_limit":"160","character_limit_warning_colour":"","character_limit_threshold_colour":"#1c468d","display_character_string":"max message size","default_department_type":"sales","custom_javascript_input":"","display_feedback_overview_panel":"0"},"ClientHour":{"id":"326","client_id":"140","department_id":null,"block_calls":false,"monday_open":"08:00:00","monday_closed":"18:00:00","tuesday_open":"08:00:00","tuesday_closed":"18:00:00","wednesday_open":"08:00:00","wednesday_closed":"18:00:00","thursday_open":"08:00:00","thursday_closed":"18:00:00","friday_open":"08:00:00","friday_closed":"18:00:00","saturday_open":"09:00:00","saturday_closed":"15:00:00","sunday_open":null,"sunday_closed":null,"created":"2020-02-25 12:30:03","modified":"2021-02-09 14:07:55"},"ClientChatHour":{"id":"129","client_id":"140","is_inverted":false,"monday_open":null,"monday_closed":null,"tuesday_open":null,"tuesday_closed":null,"wednesday_open":null,"wednesday_closed":null,"thursday_open":null,"thursday_closed":null,"friday_open":null,"friday_closed":null,"saturday_open":null,"saturday_closed":null,"sunday_open":null,"sunday_closed":null,"created":"2020-02-25 12:30:03","modified":"2021-02-09 14:07:55"},"ClientRecoveryLayerSetting":{"id":null,"client_id":null,"is_post_search":null,"is_enabled":null,"action":null,"instant_callback":null,"enable_delay":null,"title":null,"triggered_time":null,"image":null,"image_dir":null,"aws_image":null,"click_to_chat":null,"start_chat_direct":null,"form_content":null,"text_content":null,"css_selector":null,"query_string_param":null,"created":null,"modified":null},"ClientMtLayerSetting":{"id":null,"client_id":null,"is_on":null,"views_to_trigger_layer":null,"call_delay":null,"skip_wait":null,"submit_wait":null,"image":null,"image_dir":null,"aws_image":null,"title":null,"intro_text":null,"created":null,"modified":null},"ClientCallbackSetting":{"id":"140","client_id":"140","send_emails":null,"is_on":false,"callback_requests":false,"trigger_delay":"30","call_separation":"5","concurrent_calls":"1","trigger_calls_instantly":false,"callback_type":"double-trunk","linked_element":null,"relative_x":null,"relative_y":null,"yfrom_btm":false,"image":null,"image_dir":null,"aws_image":null,"title":null,"intro_text":null,"btn_isfixed":true,"form_is_on":false,"form_image":null,"form_image_dir":null,"aws_form_image":null,"submit_image":null,"submit_image_dir":null,"aws_submit_image":null,"form_linked_element":null,"form_relative_x":null,"form_relative_y":null,"form_bg_width":null,"form_yfrom_btm":false,"form_bg_height":null,"form_width":null,"form_inner_x":null,"form_inner_y":null,"form_isblock":true,"form_isfixed":true,"created":"2020-02-04 12:43:12","modified":"2021-02-10 18:03:03"},"ClientSearchLayerSetting":{"id":null,"client_id":null,"is_post_search":null,"is_enabled":null,"action":null,"instant_callback":null,"enable_delay":null,"title":null,"triggered_time":null,"image":null,"image_dir":null,"aws_image":null,"click_to_chat":null,"start_chat_direct":null,"form_content":null,"text_content":null,"css_selector":null,"query_string_param":null,"created":null,"modified":null},"ClientWebhookSetting":{"bumpyard_api_key":""},"ClientCallbackSkinSetting":{"id":"48","client_id":"140","department_id":null,"is_enabled":"0","allow_dept_select":false,"bubble_bg_colour":"444444","bubble_font_colour":"ffffff","bubble_text":"Would you like us to schedule a callback?","fade_in_seconds":"10","created":"2020-11-30 12:51:07","modified":"2021-02-09 14:07:55"},"Badge":{"id":null,"client_id":null,"is_enabled":null,"max_times_displayed":null,"default_message":null,"default_title_message":null,"is_outcome":null,"script_to_trigger":null,"image_dir":null,"image":null,"aws_image":null,"right_css_position":null,"bottom_css_position":null,"created":null,"modified":null},"ClientConfigTranslation":{"id":"28","client_id":"140","translation_engine":"google","translation_type":"english_only","foreign_language":"French","foreign_language_code":"fr","created":"2020-11-30 12:19:12","modified":"2021-02-10 18:03:03","LanguageUrlDefinitions":[],"LanguageWidgetDefinitions":[]},"ClientFormConfigValue":{"id":"28","client_id":"140","is_enabled":"1","ending_message":"","created":"2020-11-30 12:19:12","modified":"2021-02-10 18:03:03"},"Integration":[{"id":"5","client_id":"140","remote_auth_id":"22","type":"handover","platform":"mitel","config_options":"{\"base_url\":\"https:\\\/\\\/micc.liverpoolfc.com\\\/MiccSdk\\\/api\\\/v1\",\"auth_server_url\":\"https:\\\/\\\/micc.liverpoolfc.com\\\/authorizationserver\\\/token\",\"queue\":\"ebd209b2-7bd0-4e28-95cc-cdfbbbdac3a5\",\"username\":\"LiviAPI\",\"password\":\"&kKGNwg5\",\"default_agent_name\":\"Agent\",\"reclaim_after\":\"9999\",\"check_agent_availability\":2,\"inside_hours_unavailable_message\":\"I've put you in the queue for the next available person.  You shouldn't have to wait long.\",\"department_queues\":\"[{\\\"department_id\\\":\\\"523\\\",\\\"department_queue\\\":\\\"ebd209b2-7bd0-4e28-95cc-cdfbbbdac3a5\\\"},{\\\"department_id\\\":\\\"524\\\",\\\"department_queue\\\":\\\"253338c3-18c2-46f5-9315-c1c5aef318cb\\\"},{\\\"department_id\\\":\\\"525\\\",\\\"department_queue\\\":\\\"ce3abb2e-3d26-4602-963a-c21357e2b54f\\\"},{\\\"department_id\\\":\\\"526\\\",\\\"department_queue\\\":\\\"19fde4a4-8c0b-4ed7-878b-bc610413b06d\\\"},{\\\"department_id\\\":\\\"527\\\",\\\"department_queue\\\":\\\"5e0f8ef8-e836-4b8f-a32b-52353c62b212\\\"},{\\\"department_id\\\":\\\"519\\\",\\\"department_queue\\\":\\\"6f2cd6b3-7de6-4481-81fa-953462e05cfc\\\"}]\"}","is_deleted":"0","created":"2020-12-02 14:10:58","modified":"2021-02-13 00:20:03"}],"ClientGenericSetting":[{"id":"25","client_id":"140","setting_name":"enable_chat_reclaim_timer","setting_value":"0","created":"2020-11-30 12:51:07","modified":"2021-01-25 17:39:03"},{"id":"26","client_id":"140","setting_name":"ambig_qn_type","setting_value":"query_length","created":"2020-11-30 12:51:07","modified":"2021-01-25 17:39:03"},{"id":"38","client_id":"140","setting_name":"custom_widget_css","setting_value":"#srContent {\r\n    border: 3px solid #808080 !important;}","created":"2020-12-07 18:41:20","modified":"2021-02-10 18:03:03"},{"id":"40","client_id":"140","setting_name":"ambig_qn_length","setting_value":"160","created":"2020-12-14 16:57:13","modified":"2021-01-25 17:39:03"},{"id":"41","client_id":"140","setting_name":"ambig_qn_length_msg","setting_value":"Thanks for your message. What would you like me to work on first?","created":"2020-12-14 16:57:13","modified":"2021-01-25 17:39:03"},{"id":"60","client_id":"140","setting_name":"enable_chat_reclaim_timer","setting_value":"0","created":"2021-01-25 18:13:38","modified":"2021-02-09 14:06:53"},{"id":"61","client_id":"140","setting_name":"ambig_qn_type","setting_value":"off","created":"2021-01-25 18:13:38","modified":"2021-02-09 14:06:53"},{"id":"66","client_id":"140","setting_name":"enable_chat_reclaim_timer","setting_value":"0","created":"2021-02-09 14:07:55","modified":"2021-02-09 14:07:55"},{"id":"67","client_id":"140","setting_name":"ambig_qn_type","setting_value":"off","created":"2021-02-09 14:07:55","modified":"2021-02-09 14:07:55"}],"ClientAILSite":[],"ClientMtlTrigger":[],"ClientDomain":[{"id":"669","client_id":"140","domain":"liverpoolfc.com","created":"2020-11-30 12:19:12","modified":"2021-02-10 18:03:03"},{"id":"670","client_id":"140","domain":"store.liverpoolfc.com","created":"2020-11-30 12:19:12","modified":"2021-02-10 18:03:03"},{"id":"671","client_id":"140","domain":"faq.liverpoolfc.com","created":"2020-11-30 12:19:12","modified":"2021-02-10 18:03:03"},{"id":"672","client_id":"140","domain":"demo.meetami.ai","created":"2020-11-30 12:54:20","modified":"2021-02-10 18:03:03"},{"id":"673","client_id":"140","domain":"meetami.ai","created":"2020-11-30 12:54:20","modified":"2021-02-10 18:03:03"},{"id":"674","client_id":"140","domain":"app.meetami.ai","created":"2020-11-30 13:30:52","modified":"2021-02-10 18:03:03"},{"id":"675","client_id":"140","domain":"chat.meetami.ai","created":"2020-11-30 13:30:52","modified":"2021-02-10 18:03:03"}],"TriggerScript":[{"id":"116","client_id":"140","trigger_type":"chat-form","script":"","created":"2020-11-30 12:51:07","modified":"2021-02-09 14:07:55"}],"CustomField":[],"SalesGoal":[],"ClientContactForm":[],"ClientSearchForm":[],"ClientResultPage":[],"Sitemap":[{"id":"3","client_id":"140","base_url":"https:\/\/www.liverpoolfc.com\/news","crawl_depth":"5","title_selector":"h1","keyword_selectors":"[\"h1\",\"h2\",\".post-content\"]","frequency":"daily","wording":null,"created":"2020-12-05 13:54:03","modified":"2020-12-31 11:11:01","deleted_at":null,"SitemapMessage":[{"id":"3","sitemap_id":"3","wording":"Good question how about...","created":"2020-12-05 13:54:03","modified":"2020-12-31 11:11:01"},{"id":"4","sitemap_id":"3","wording":"You have got me thinking. How about...","created":"2020-12-07 18:51:23","modified":"2020-12-31 11:11:01"},{"id":"5","sitemap_id":"3","wording":"How about...","created":"2020-12-07 18:51:23","modified":"2020-12-31 11:11:01"}]},{"id":"5","client_id":"140","base_url":"https:\/\/faq.liverpoolfc.com\/portal\/en\/kb\/liverpool-fc","crawl_depth":"5","title_selector":"h1","keyword_selectors":"[\".description\"]","frequency":"daily","wording":null,"created":"2020-12-31 11:11:01","modified":"2020-12-31 11:11:01","deleted_at":null,"SitemapMessage":[{"id":"7","sitemap_id":"5","wording":"Good question how about...","created":"2020-12-31 11:11:01","modified":"2020-12-31 11:11:01"},{"id":"8","sitemap_id":"5","wording":"You have got me thinking. How about...","created":"2020-12-31 11:11:01","modified":"2020-12-31 11:11:01"},{"id":"9","sitemap_id":"5","wording":"How about...","created":"2020-12-31 11:11:01","modified":"2020-12-31 11:11:01"}]}],"labels":{"no_response":" Thanks for your question","no_response_plus":"I am working out best action to help you.","neg_funnel":"Please check the information you entered as I do not recognise the format.","thinking_msg":"","pre_form_call":"Please provide me with your details and I will get one of my colleagues to give you a call.","post_form_call":"Thanks for providing your details, one of my colleagues will be in touch shortly.","skip_form_call":"I have your details from our last conversation. I will ask a colleague to call.","part_form_call":"I have your details from our last conversation. <br \/><br \/>If you add your phone number to the form below, I can prioritise your enquiry. ","pre_form_transfer":"Please provide your details so I can contact a colleague who can help you with your enquiry. ","transfer_auto":"The hold time is longer than I expected. Perhaps you will give me another chance to help you.","skip_form_transfer":"I have your details from our last conversation. <br \/><br \/>I will ask a colleague to continue the conversation with you.","known_customers_update":"Here are your details from our last conversation. <br \/><br \/>Please take a moment to check they are correct. ","pre_form_email":"I want to ask a colleague to get in touch.<br \/><br \/>Please help me by filling in your details.","skip_form_email":"I have your details from our last conversation. <br \/><br \/>I have just sent a message to a colleague to contact you.","post_form_email":"We\u2019re chatting out of hours.  My colleagues are not available to help you at the moment.<br \/>  <br \/>Please come back and chat to us when we\u2019re open, or send us an email now.<br \/>","update_email":"Thanks for continuing our conversation.  <br \/><br \/>I have just provided my colleague with an update :-)","mobile_ux_instruction":"To get help from the Pulse Virtual Agent use the record button. ","tts_empty_array":"Please help me by repeating your last message. ","stt_unsupported_device":"Unfortunately your browser does not support voice control.<br \/>","exit_funnel":"I think you want to discuss something else, how can I help?","funnel_end":"Please fill in your details then I will transfer you to the most relevant team to help you.","funnel_skip":"We\u2019re chatting out of hours.  My colleagues are not available to help you at the moment.<br \/>  <br \/>Please come back and chat to us when we\u2019re open, or send us an email now.","repeat_question":"Let\\'s carry on chatting  :-)","repeat_question_2":"Back to our last topic","repeat_question_3":"Good question","transfer_live":"Your chat is being transferred to our team who will answer shortly.","funnel_transfer":"Thanks for answering our questions. I will transfer you to the most relevant team to help you.","schedule_emailed":"<a target=\\'_top\\' href=\\'https:\/\/faq.liverpoolfc.com\/portal\/en\/kb\/articles\/contact-us-email-us?fromarticle=true\\'>Please click here to email us.<\/a><br \/>","schedule_thanks":"Thank you. Your call is now scheduled.","callback_already_requested":"A callback has already been scheduled for you. Our team will be in touch at your requested time.","green_exit":"Chat transferring . Please wait.","already_called":"A call has already been scheduled. We will be in touch as soon as we can.","callback_cancelled":"No problem, we will cancel the scheduled callback.","invalid_email":"Sorry, please enter a valid email address","schedule_clicked_call_now":"We will call you as soon as possible","agent_left_chat":"The agent has left the chat","schedule_callback":"Schedule your call.","schedule_after_click":"Please choose a time for your call today","schedule_calling_now":"We are calling you now.","data_secure":"<span>Data Once<\/span> We only use this information to contact you regarding your enquiry.","title_placeholder":"Title","first_name_placeholder":"Please enter your first name here...","last_name_placeholder":"Please enter your last name here...","address_placeholder":"Start typing your address...","slow_load_thinking":"Ami is thinking...","slow_load_typing":"Ami is typing...","slow_load_researching":"Ami is researching...","slow_load_chat":"Please wait while I find out for you.","very_slow_load_chat":"I\\'m just checking and will get back to you as soon as possible","neg_switch":1,"neg_funnel_end":"Sorry I didn't understand that answer.","funnel_form":"<input type=\"hidden\" name=\"data[Chat][transfer]\" value=\"transfer\" \/><div class=\"input text required\"><label for=\"name\">Full name<\/label><input id=\"name\" name=\"data[Chat][name]\" required=\"required\" type=\"text\" \/><\/div><div class=\"input text required\"><label for=\"phone\">Phone number<\/label><input id=\"phone\" name=\"data[Chat][phone]\" \/><\/div><div class=\"input text required\"><label for=\"email\">Email address<\/label><input id=\"email\" name=\"data[Chat][email]\" required=\"required\" \/><\/div>","switch_form":"<input type=\"hidden\" name=\"data[Chat][transfer]\" id=\"srTransfer\" value=\"transfer\" \/><div class=\"input text required\"><label for=\"name\">Full name<\/label><input id=\"name\" name=\"data[Chat][name]\" required=\"required\" type=\"text\" \/><\/div><div class=\"input text required\"><label for=\"email\">Email address<\/label><input id=\"email\" name=\"data[Chat][email]\" required=\"required\" type=\"email\" \/><\/div><div class=\"input text\"><label for=\"phone\">Phone number<\/label><input id=\"phone\" name=\"data[Chat][phone]\" type=\"tel\" \/><\/div>","noagent_form":"<input type=\"hidden\" name=\"data[Chat][transfer]\" value=\"transfer\" \/><div class=\"input text required\"><label for=\"name\">Full name<\/label><input id=\"name\" name=\"data[Chat][name]\" required=\"required\" type=\"text\" \/><\/div><div class=\"input text required\"><label for=\"email\">Email address<\/label><input type=\"email\" id=\"email\" name=\"data[Chat][email]\" required=\"required\" \/><\/div><div class=\"input text required\"><label for=\"phone\">Phone number<\/label><input id=\"phone\" name=\"data[Chat][phone]\" \/><\/div><div class=\"input textarea required\"><label class=\"left-align\" for=\"message\">Message<\/label><textarea id=\"amessage\" name=\"data[Chat][amessage]\" required=\"required\"><\/textarea><\/div>","inchat_form":{"transfer":"<input type=\"hidden\" name=\"data[Chat][transfer]\" id=\"srTransfer\" value=\"XXXX\" \/>","title":"<div class=\"input text required title-container\"><label for=\"title\">Title<\/label><input id=\"title\" name=\"data[Chat][title]\" required=\"required\" type=\"text\" \/><\/div>","first_name":"<div class=\"input text required first-name-container\"><label for=\"first_name\">First name<\/label><input id=\"first_name\" name=\"data[Chat][first_name]\" required=\"required\" type=\"text\" \/><\/div>","last_name":"<div class=\"input text required\"><label for=\"last_name\">Last name<\/label><input id=\"last_name\" name=\"data[Chat][last_name]\" required=\"required\" type=\"text\" \/><\/div>","name":"<div class=\"input text required name-container\"><label for=\"name\">Full name<\/label><input id=\"name\" name=\"data[Chat][name]\" required=\"required\" type=\"text\" \/><\/div>","email":"<div class=\"input text required\"><label for=\"email\">Email address<\/label><input id=\"email\" name=\"data[Chat][email]\" required=\"required\" type=\"email\" \/><\/div>","phone":"<div class=\"input text\"><label for=\"phone\">Phone number<\/label><input id=\"phone\" name=\"data[Chat][phone]\" type=\"tel\" \/><\/div>","address":"<div class=\"input text required\"><label for=\"srAddress\">Address<\/label><input id=\"srAddress\" name=\"data[Chat][address]\" required=\"required\" type=\"text\" \/><input id=\"srAddressId\" name=\"data[Chat][address_id]\" required=\"required\" type=\"hidden\" \/><div id=\"srAddOptions\"><\/div><\/div>"},"sales_form":"This is a sales form","sales_link":"This is a sales link","offers_form":"An offers form","offers_link":"An offers link","sales_chat_link":"A sales chat link","callback_form":"<form action=\"\/sitereplier\/chats\/chat\/54251525\" id=\"chatPhoneForm\" method=\"post\" accept-charset=\"utf-8\"><div class=\"input text\"><label for=\"srNameChat\">Your name<\/label><input name=\"data[Chat][full_name]\" id=\"srNameChat\" required=\"required\" type=\"text\"\/><\/div><div class=\"input text required\"><label for=\"email\">Email address<\/label><input type=\"email\" id=\"email\" name=\"data[Chat][email]\" required=\"required\" \/><\/div><div class=\"input text\"><label for=\"srPhoneChat\">Phone number<\/label><input name=\"data[Chat][phone_no]\" id=\"srPhoneChat\" type=\"text\"\/><\/div><\/form><button class=\"srSubmitForm\" id=\"srPhoneRlBtn\" onclick=\"return triggerCallWrapper(%ch-%, %XYXY%, %srPhoneChat%, %srNameChat%, 0); return false;\">Submit<\/button>","callback_btn":"<button class=\"srSubmitForm\" id=\"srPhoneRlBtn\" onclick=\"return triggerCallWrapper(%ch-%, %XYXY%, %srPhoneChat%, %srNameChat%, 0); return false;\">Request Call Back<\/button>","callback_tks":"Sorry but there are currently no live chat operators available. We have emailed our agents, one of whom will be in contact shortly to answer your question.","sales_phone":"01234 567890","data_secure_short":"<p class=\"srDataSecure\"><span>Data Once<\/span> We don&rsquo;t share any of your information.<\/p>","auto_pre_in":"Please complete the details below for one of our live chat operators to assist you","auto_post_in":"Sorry but there are currently no live chat operators available. We have emailed our agents, one of whom will be in contact shortly to assist you.","auto_pre_out":"Please complete the details below for one of our live chat operators to assist you","auto_post_out":"Sorry but there are currently no live chat operators available as it is outside our office hours. We will contact you as soon as the office re-opens.","auto_intro":"Please beware that I am a virtual agent, so you will need to word your questions clearly. If I am unable to help you I will put you in touch with a live chat agent.","green_exit_override":"Thanks. We will be in touch shortly.","placeholder_title":"Title","placeholder_first_name":"Please enter your first name here...","placeholder_last_name":"Please enter your last name here...","placeholder_name":"Please enter your name here...","placeholder_email":"Please enter your email address here...","placeholder_phone":"Please enter your telephone number here...","schedule_callback_later":"There is currently no-one available to call you back. Please schedule your call for an appropriate time.","transfer_ami":"Is there anything else I can help you with?","default_welcome":"Hi, how can I help you today?","agent_closed":"The agent has ended this chat session. If you wish to open a new chat session please close this window and open a new one.","agent_closed_time":"This chat session has been ended due to a period of inactivity. If you wish to view the details they can be found on the history page.","customer_ended":"The customer has ended the conversation.","chat_transferred_to":"The chat was transferred to","chatting_with":"You are chatting with","has_ended_the_convo":"has ended the conversation.","has_been_switched_auto":"has been switched to an automated agent chat","please_call":{"today":"Please call today at","tomorrow":"Please call tomorrow at","monday":"Please call on monday at","tuesday":"Please call on tuesday at","wednesday":"Please call on wednesday at","thursday":"Please call on thursday at","friday":"Please call on friday at","saturday":"Please call on saturday at","sunday":"Please call on sunday at"},"select_time":"Select time","click_here":"Click here","specify_time":"to specify a time","or":"or","for_a_call_now":"for a call now","yes":"Yes","no":"No","dp_intro":"Thanks for your details. We would like to ask you some questions about how we use your personal data:","dp_unfinished":"Last time we chatted you answered some of our data protection questions, but we've got some more for you:","dp_thanks":"Thanks for answering our questions","dismiss":"Dismiss","reply":"Reply"}});
							$srJq.ajax({
					url: "//app.meetami.ai/agents/get_integration_agents/" + client_ref + "/" + chat_ref + "/" + dept,
					type: "GET",
					success: function(data) {
						var dataObj = JSON.parse(data);
						if(dataObj !== 0) {
														if(dataObj.hasOwnProperty("out-of-hours")) {
																return;
							} else {
								var agentString = dataObj.join("-N-");
								if (agents == "") {
									agents = agentString;
								} else {
									agents = agents + '-N-' + agentString;
								}
							}
						}
						populateAgentsDom(agents);
					},
					error: function(error) {
											}
				});
					}

		function populateAgentsDom(agents) {
			var finalArray = agents.split("-N-");
			console.log(finalArray);
			var final = dedupeAndJoin(finalArray);
						$srJq('#agentsList').val(final.trim());
		}

		
		function dedupeAndJoin (oldArr) {
			var newStr = "";
			for (var i in oldArr){
				if (oldArr.hasOwnProperty(i) && newStr.indexOf(oldArr[i]) == -1 && oldArr[i] !== "") {
					if (newStr != "") newStr += "-N-";
					newStr += oldArr[i];
				}
			}
			return newStr;
		}

				socket.on('agents inputList', function(data){
			if(data.client_ref == '302220474411'){
				
				var dept = getDeptId();

				if (dept == '') {
console.log('POPULATE EMPTY DEPT');
console.log(data.usrs);
					populateAgentsList(data.usrs);
console.log('VAL OF INPUT');
console.log($srJq('#agentsList').val());
				} else {
										updateAvailableAgents(dept);
				}
			}
		});

		socket.on('trigger dp questions', function(data){
            console.log("trigger dp questions!");
			triggerDP(true, true);
		});

				socket.on('agents inputList specific', function(data){
			if(data.client_ref == '302220474411'){
console.log('AGENTS SPECIFIC LISTING');
console.log(data);
				populateAgentsList(data.usrs);
			}
		});
		socket.on('ami_agents amiInputList', function(agents){
console.log('AMI AGENTS LISTING');
console.log(agents);
			var have_agents = false;
			for (var key in agents['usrs']){
				if(key == '140'){
					$srJq('#amiAgentsList').val(agents['usrs'][key]);
					have_agents = true;
				}
			}
			if(have_agents == false){
				$srJq('#amiAgentsList').val('');
			}
		});

				socket.on('customer query trigger', function(data){
			socket.emit('agents query', '302220474411');
		});

				socket.on('chats incoming', function(data){
			if(data.client == '302220474411'){
				$srJq('#icChats').val(data.chats);
			}
		});

				function createLiveChat(chat_id, agent_ref, agent_name, chatCount, lastMessage, transfer_type){
			console.log("CREATING LIVE CHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAT");
						var current_cookie = $srJq.cookie('sr-data');

			var current_session = $srJq.cookie('sr-cur');
			if(current_cookie !== undefined){
				current_cookie = JSON.parse(current_cookie);
				if(typeof current_cookie['visit_no'] != 'undefined'){
					var visit_no = current_cookie['visit_no'];
				} else {
					var visit_no = 1;
				}
			} else {
				var visit_no = 1;
			}
						if(current_session !== undefined){
				var logon_time = current_session;
			} else {
				var logon_time = new Date();
			}

						if(typeof chatCount === undefined){
				chatCount = 1;
			}
			if(typeof lastMessage === undefined){
				lastMessage = 1;
			}
			if(typeof transfer_type === undefined){
				transfer_type = 'D';
			}
			if(typeof current_cookie['country_code'] == 'undefined'){
				current_cookie['country_code'] = '';
			}

			var uid = current_cookie['uid'];
			if(typeof uid == 'undefined'){
				uid = getUsrId();
			}

						var dept_id = getDeptId();

						var data = {
				chat_id: chat_id,
				dept_id: dept_id,
				client_ref: "302220474411",
				agent_ref: agent_ref,
				agent_name: agent_name,
				visit_no: visit_no,
				user_ref: uid,
				chat_no: current_cookie['chat_no'],
				logon_time: logon_time,
				last_message: lastMessage,
				message_no: 0,
				transfer_type: transfer_type,
				device: current_cookie['device'],
				os: current_cookie['os'],
				browser: current_cookie['browser'],
				ip: current_cookie['ip'],
				country_code: current_cookie['country_code'],
				page_url: document.URL
			};
			console.log('CREATING CHAT');
			console.log(data);
			if(typeof transfer_type != 'undefined' && transfer_type == 'ami'){
				data.ami_status = 0;

				socket.emit('autochat create', data);
			} else {
				console.log('CREATING LIVE');
				socket.emit('chat create', data);
			}
			trackTyping();
		}

				function getDeptId () {
			var deptID = $srJq('#chatDept').val();
			return deptID;
		}

				function endLiveChat(chat_id, end_type){

			if(typeof end_type == 'undefined'){
				end_type = 'end';
			}

						var data = {
				chat_id: chat_id,
				client_ref: "302220474411",
				end_type: end_type
			};
			socket.emit('chat close', data);
			registerLoad();
		}

		function srGenerateConfirmRef ( msgData ) {

		  		  var ref = Math.random() * 1000000 + (new Date()).getTime() + '';
		  ref = ref.replace('.','');

		  		  msgData.confirmRef = ref;

		  		  var existing = $srJq.cookie('sr-data');
		  existing = JSON.parse(existing);
		  existing.unconfirmedMsg = msgData;
		  existing = JSON.stringify(existing);
		  $srJq.cookie('sr-data', existing, { path: '/', domain: domain });

		  		  return msgData;

		}

		function srConfirmMsgReceipt ( msgRef ) {

		  		  var existing = $srJq.cookie('sr-data');
		  if (typeof existing != 'undefined') {

		    existing = JSON.parse(existing);
				if (typeof existing.unconfirmedMsg != 'undefined' && typeof existing.unconfirmedMsg.confirmRef != 'undefined' && existing.unconfirmedMsg.confirmRef == msgRef ) {
									  delete existing.unconfirmedMsg;
		      existing = JSON.stringify(existing);
		      $srJq.cookie('sr-data', existing, { path: '/', domain: domain });
					console.log('CONFIRMED MSG RECEIPT AT THE SERVER');
		      console.log(existing);
		    }

		  }
		  return true;
		}

		function srCheckForUnconfirmed () {

						var existing = $srJq.cookie('sr-data');
		  if (typeof existing != 'undefined') {

				existing = JSON.parse(existing);
				if (typeof existing.unconfirmedMsg != 'undefined' && typeof existing.unconfirmedMsg.confirmRef != 'undefined' ) {
					var msgId = existing.unconfirmedMsg.confirmRef;
					if (typeof existing.unconfirmedChecks != 'undefined' && existing.unconfirmedChecks == msgId ) {
												srDisplayConnectionIssue(existing.unconfirmedMsg);
						delete(existing.unconfirmedMsg);
						delete(existing.unconfirmedChecks);
						console.log('DISPLAYED unconfirmed error message');
					} else {
												existing.unconfirmedChecks = msgId;
					}
										existing = JSON.stringify(existing);
		      $srJq.cookie('sr-data', existing, { path: '/', domain: domain });
				}

			}
			return true;
		}

				function srDisplayConnectionIssue ( errorMsg ) {
						var alertMsg = '<div id="dcErr">';
			alertMsg += '<p>We\'re really sorry but it looks like there has been an issue sending your last messge to Ami:</p>';
			alertMsg += '<p><em>"' + errorMsg.msg + '"</em></p>';
			alertMsg += '<p>Please refresh the page and try resending the message.</p>';
			alertMsg += '</div>';

						$srJq('#srMsgs').after(alertMsg);
			msgHeight(50, function(){});
		}

		function srHideConnectionIssue () {
			$srJq('#dcErr').slideUp(200, function(){
				$srJq('#dcErr').remove();
				msgHeight(50, function(){});
			});
		}

		$srJq(function(){
			setInterval(function(){
				srCheckForUnconfirmed();
			}, 7500);
		});

				socket.on('message receipt', function(data){
		  srConfirmMsgReceipt(data);
		});

				function submitLiveMessage(chat_id, msg, is_ami, agent_name, ail_clarification, data_object){
			console.log("submit live message", chat_id, msg, is_ami, agent_name);

			if( typeof is_ami == 'undefined'){
				is_ami = false;
			}

			if( typeof agent_name == 'undefined'){
				agent_name = false;
			}

						if(is_ami === false){
				enableChatForm();
				var uid = getUsrId();
			}

						srHideConnectionIssue();

						var data = {
				chat_id: chat_id,
				agent_msg: 0,
				msg: msg,
				user_ref: uid,
				client_ref: "302220474411"
			};

			if(typeof data_object != 'undefined' && data_object.hasOwnProperty('foreignMessage')) {
				data.foreign_msg = data_object.foreignMessage;
				data.msg = data_object.message;
			}

			data = srGenerateConfirmRef(data);

			if(typeof(ail_clarification) !== 'undefined') {
				data.ail_clarification = true;
			}

			if( is_ami === false ) {

								socket.emit('chat message', data);

								$srJq('#srMsgs').linkify({ target: '_blank' });

								var agent_msg_count = agentMsgCount();
								if (typeof agent_msg_count != 'undefined') {
					var usr_msg_count = $srJq('#srMsgs p').length - (agent_msg_count + 2);
					agent_msg_count = 0;
				}

				
				
			} else {

								var origStatus = $srJq('#amiAgentsStatus').val();

								if (is_ami == 'yes'){
					data.ami_status = 0;
				} else {
					data.ami_status = is_ami;
				}
				if ( agent_name !== false ) {
					data.sender = agent_name;
				}
				socket.emit('autochat message', data);

								if (is_ami == 1 && origStatus == 0) {
					srDisplayThinkingMsg();
				}
			}

			typingCheck();

						msgCheck = setTimeout(function () {
				joinChat(chat_id, "302220474411");
				socket.emit('chat notify', { chat_ref: chat_id, client_ref: "302220474411"});
				scrollChat();
			}, 750);

		}

		function srDisplayThinkingMsg () {
											if (!isMobileUx) {
					setTimeout(function(){
												var msg = "<div><p class='feint' id='typing'></p></div>";
						$srJq('#srMsgs').append(msg);
						scrollChat();
					}, 1850);
				}
					}

		socket.on('chat closeagent agent', function(closed_chat) {
			var chat_ref = $srJq('#chat_ref').val();
			if (chat_ref == closed_chat) {
				sr_clearResponseTimer();
			}
		});

				socket.on('chat message', function(data){
			console.log('Chat dataaaaaaa', data);
			if(data.is_dp == true) return;

			clearTimeout(integrationReclaimTimeout);

						if(typeof msgCheck != 'undefined'){
				clearTimeout(msgCheck);
			}

			if(data.sender != undefined){

				srCheckWidgetHeader(data);

				if(typeof data.agent_addn != 'undefined' && data.agent_addn != ''){
					data.sender = data.sender + ' - ' + data.agent_addn;
				}
				var agentImgUrl = false;

				if(data.sender == 'feint') {
					response = '<div><p class="feint">' + data.msg + '</p></div>';
				} else if ( typeof data.image != 'undefined' && data.image != '' ) {
					agentImgUrl = data.image;
					response = '<p class="agent inc-avatar"><span class="avatar-mini"><img src="'+agentImgUrl+'" alt="' + data.sender + '" /></span><span>' + data.sender + ':</span> ' + data.msg + '</p>';
				} else {
					response = '<p class="agent"><span>' + data.sender + ':</span> ' + data.msg + '</p>';
				}
								$srJq('#srMsgs').append(response);
				handleTts(data.msg);

				if(!sr_isChatOpen()) {
					sr_incrementUnreadMessages();
					sr_showPreviewMessage(data.msg, agentImgUrl);
				} else {
										sr_markMessagesRead(1);
				}

								srPlink();
								if(typeof queueTimer != 'undefined'){
					clearTimeout(queueTimer);
				}

								if(srSwAutoTimer !== false) {
					clearTimeout(srSwAutoTimer);
					srSwAutoTimer = false;
				}

				sr_clearResponseTimer();
			}
			$srJq('#srMsgs p#typing').remove();
			console.log('sr-check-9');
			$srJq('#srMsgs #srFaded').parent().remove();
			srHideConnectionIssue();
			convertToNormalInput();
			scrollChat();

						$srJq('#srMsgs').linkify({ target: '_blank' });

						urlTransfer(data.msg);

						$srJq('#srMsgSender').focus();

		});
				function srCheckWidgetHeader ( sender ) {

						var curAgent = $srJq('#srChatter #srMsgs p.srIntro').html();
			curAgent = curAgent.replace('You are chatting with ', '');
			var curPosn = $srJq('#srChatter #srMsgs p.srIntroPos').html();

						var msgAgent = sender['sender'].replace(sender.agent_addn, '').trim();

						if ( msgAgent != curAgent ) {
								$srJq('.srIntro').html('You are chatting with ' + msgAgent);

								populateAgent(sender.agent_ref, sender.sender);
			}

		}

				socket.on('chat notify', function(data){
			var chat_ref = getChatId();
			if(typeof chat_ref != 'undefined' && chat_ref == data.chat_ref){
				joinChat(data.chat_ref, "302220474411");
			}
		});

				socket.on('autochat email request', function(chat_ref, message, method, form_details, isFallback){

			if (typeof isFallback == 'undefined') {
				isFallback = 0;
			}

						var agent_name = getAgentName();

						sr_clearResponseTimer();

						if ( method == 'email-sent' ) {

				$srJq('#srMsgs').append('<p class="agent"><span>' + agent_name + ':</span> ' + message + '</p>');
				handleTts(message);
				scrollChat();

								if (isFallback == 1) {
					var haveEmailed = "<a target=\'_top\' href=\'https://faq.liverpoolfc.com/portal/en/kb/articles/contact-us-email-us?fromarticle=true\'>Please click here to email us.</a><br />";
					setTimeout(function(){
						$srJq('#srMsgs').append('<div class="srEndChat mail"><p>' + haveEmailed + '</p></div>');
						handleTts(haveEmailed);
						srPlink();
						scrollChat();
					}, 2000);
				}

			} else {

								$srJq('#srMsgs').append('<p class="agent"><span>' + agent_name + ':</span> ' + message + '</p>');
				handleTts(message);
								if ( typeof form_details.form != 'undefined' && form_details.form != '' ){

					var full_form = form_details.form;
					form_details = form_details.form.replace('CB*', '');
										$srJq('#srInputs').html(form_details + '<p class=\"srDataSecure\"><span>Data Once</span> We only use this information to contact you regarding your enquiry.</p><a href="#submit" rel="srSubmitMessage" name="form" class="srFormBtn">Submit</a>');
					$srJq('#srChatForm').addClass('details');
					if(isMobileUx) {
						checkRecentMsgHeight();
            			msgHeight(50, function(){});
					}
										$srJq('a[rel="srSubmitMessage"]').off('click');
					$srJq('a[rel="srSubmitMessage"]').click(function(e){
						e.preventDefault();
						var params = $srJq(this).attr('name');
						if(typeof params != 'undefined'){
							submitMessage(params);
						} else {
							submitMessage();
						}
					});

				}

								$srJq('#amiAgentsStatus').val(0);
				scrollChat();
				srPlink();

			}

						if (isFallback == 1) {
				if ( typeof full_form == 'undefined'){
					full_form = '';
				}
				recordAutoMsg (message, 'negative', true, agent_name, full_form);
				srSetAuto(chat_ref, 1);

								if (typeof haveEmailed != 'undefined') {
					setTimeout(function(){
						recordAutoMsg(haveEmailed, 'srEndChat mail', false);
					}, 500);
				}

								srPlink();
			}

		});

		function srPlink () {
						if(Modernizr.audio){
				var playPromise = document.getElementById('chink').play();
				if ( playPromise !== undefined ) {
										playPromise.catch(function(){});
				}
			}
							$srJq('a#srLaunch').effect('bounce', {times: 3}, 'slow');
					}

				function srSetAuto (chat_ref, isAuto) {
			$srJq.ajax({
				url: "//app.meetami.ai/chats/adjust_chat_status/302220474411/" + chat_ref + "/" + isAuto,
				type: "GET",
				success: function(data) {
				}
			});
		}

				socket.on('autochat chat request', function(chat_ref, message, method, agent_name, agent_ref){

						var old_agent = getAgentName();

						sr_clearResponseTimer();

						joinChat(chat_ref, '302220474411', false);

						$srJq('#srMsgs').append('<p class="agent"><span>' + old_agent + ':</span> ' + message + '</p>');
			handleTts(message);
			recordAutoMsg(message, '', false, old_agent);
			scrollChat();
			srPlink();

						setTimeout(function(){
				var transferMsg = "Your chat is being transferred to our team who will answer shortly.";
				$srJq('#srMsgs').append('<div class="srEndChat chat"><p>' + transferMsg + '</p></div>');
				handleTts(transferMsg);
				srPlink();
				scrollChat();
				recordAutoMsg(transferMsg, 'srEndChat chat', false);
			}, 2500);

			if (method == 'chat-by') {
			  transferToBumpyard();
			}

								});

				socket.on('autochat callback request', function(chat_ref, message, method, isFallback){

			if (typeof isFallback == 'undefined') {
				isFallback = 0;
			}

						sr_clearResponseTimer();

						$srJq('#amiAgentsStatus').val(0);

						var trigger = 'ch-' + chat_ref;
			if ( method == 'callback-sf') {
				trigger = 'sf-';
			}
			triggerCall(trigger, '', '', '', '', 0, 0, 1);

						var old_agent = getAgentName();
			$srJq('#srMsgs').append('<p class="agent"><span>' + old_agent + ':</span> ' + message + '</p>');
			handleTts(message);
			scrollChat();

						if (isFallback == 1) {
				recordAutoMsg(message, 'negative', 0, old_agent, '');
				srPlink();
			}

		});

				socket.on('autochat message', function(data){

			if(data.agent_msg == 0) {
				$srJq('#amiAgentsStatus').val(0);
			}

						if ( data.agent_msg != 0 || (typeof(data.force_show) !== "undefined" && data.force_show == 1)) {
								var agent_name = $srJq('#srMsgs p.agent span:not([class])').html();
				agent_name = agent_name.replace(':', '');
								var agentImgUrl = false;
				if ( typeof data.image != 'undefined' && data.image != '' && data.image_dir != '' ) {
					agentImgUrl = data.image;
					var message = '<p class="agent inc-avatar"><span class="avatar-mini"><img src="'+agentImgUrl+'" alt="' + agent_name + '" /></span><span>' + agent_name + ':</span> ' + data.msg + '</p>';
				} else {
					var message = '<p class="agent"><span>' + agent_name + ':</span> ' + data.msg + '</p>';
				}
				$srJq('#srMsgs').append(message);
				handleTts(data.msg);
				$srJq('#srMsgs').linkify({ target: '_blank' });
				convertToNormalInput();
				scrollChat();

								srPlink();
				sr_clearResponseTimer();

				srHideConnectionIssue();

			}

			if(!sr_isChatOpen()) {
				sr_incrementUnreadMessages();
				sr_showPreviewMessage(data.msg, agentImgUrl);
			} else {
								sr_markMessagesRead(1);
			}
		});

				function srCheckPreviousClose () {
			var display = true;
			$srJq('#srMsgs p.feint').each(function(){
				var content = $srJq(this).html();
				if (content.indexOf('ended') > -1) {
					display = false;
				}
			});
			return display;
		}

				socket.on('chat closeagent', function(){
			var display = srCheckPreviousClose();
			if (display = true) {
				response = '<div><p class="feint">The agent has ended this chat session. If you wish to open a new chat session please close this window and open a new one.</p></div>';
				$srJq('#srMsgs').append(response);
				scrollChat();
				registerLoad();
			}
		});

				socket.on('chat agentclosedirect', function(data){
			console.log("closeagentdirect", data);
			var display = srCheckPreviousClose();
			if (display = true) {
				response = '<div><p class="feint">' + data.message + '</p></div>';
				$srJq('#srMsgs').append(response);
				scrollChat();
				registerLoad();
			}
		});

				socket.on('autochat transfered-back', function(new_status){
			$srJq('#amiAgentsStatus').val(new_status);
		});

				function joinChat(chat_ref, client_ref, is_ami){
						if(typeof is_ami == 'undefined'){
				is_ami = false;
			}

			var cust_url = "https://www.liverpoolfc.com/";
			var usrRef = getUsrId();
			var chat_data = { chat_id: chat_ref, client_ref: client_ref, custUrl: cust_url, usr_ref: usrRef }
			if(is_ami === false){
				socket.emit('chat join', chat_data);
			} else {
				chat_data.page_url = cust_url;
				socket.emit('autochat join', chat_data);
			}
		}

				socket.on('agent closed', function(){
			var display = srCheckPreviousClose();
			if (display = true) {
				response = '<div><p class="feint">This chat session has been ended due to a period of inactivity. If you wish to view the details they can be found on the history page.</p></div>';
				$srJq('#srMsgs').append(response);
				scrollChat();
			}
		});
				socket.on('agent closed-time', function(){
			var display = srCheckPreviousClose();
			if (display = true) {
				response = '<div><p class="feint">The agent has ended this chat session. If you wish to open a new chat session please close this window and open a new one.</p></div>';
				$srJq('#srMsgs').append(response);
				scrollChat();

								storeMessage(response, 'feint');
			}
		});

		socket.on('autochat ami_status', function(cust_id, ami_status){
			var usr_id = getUsrId();
			if ( cust_id == usr_id && ami_status != 0 ) {
				$srJq('#amiAgentsStatus').val(1);
			}
		});

				function storeMessage (message, sender, vmType, isAgent) {

			if (typeof vmType == 'undefined') {
				vmType = '';
			}
			if (typeof isAgent == 'undefined') {
				isAgent = '-';
			}

			var user_ref = getUsrId();
			var chat_ref = $srJq('#chat_ref').val();

						$srJq.ajax({
				url: "//app.meetami.ai/chats/store_message/302220474411/" + chat_ref + "/" + user_ref,
				type: "POST",
				data: { msg: message, sender: sender, vm_type: vmType, is_agent: isAgent },
				success: function(data) {
				}
			});

		}

				function trackTyping(){
			$srJq('#srMsgSender').off('keyup');
			$srJq('#srMsgSender').keyup(function(){
				typingCheck();
			});
		}

		var customerTyping = false;
		function typingCheck(){
			var entry = $srJq('#srMsgSender').val();
			data = {
				name: 'Customer',
				pub_id: 'NONE',
				chat_id: $srJq('#chat_ref').val(),
				client_ref: "302220474411"
			}

			if(typeof data.chat_id == 'undefined' || data.chat_id == '') {
				return;
			}

			if(entry != ''){
				socket.emit('chat typing', data);
				data.typing = 1;
				socket.emit('autochat typing', data);
				$srJq('#srMobileSendButton').addClass('srHasMsg');
				if(!customerTyping) integrationTyping(true);
			} else {
				socket.emit('chat stoptyping', data);
				data.typing = 0;
				socket.emit('autochat typing', data);
				$srJq('#srMobileSendButton').removeClass('srHasMsg');
				if(customerTyping) integrationTyping(false);
			}
		}

		function integrationTyping(isTyping) {
			if(!handedToIntegration) return false;
			var chatId = getChatId();
			customerTyping = isTyping;
			isTyping = isTyping ? 1 : 0;
			$srJq.ajax({
				url: "https://app.meetami.ai/integrations/customer_typing/",
				type: "POST",
				data: {
					chat_id: chatId,
					is_typing: isTyping
				},
				success: function(data) {
					
				}
			});
		}

		socket.on('chat typing', function(data){
			if (!isMobileUx) {
				console.log('sr-check-10');
				if(data.name != 'Customer' && $srJq('#srMsgs p#typing').length == 0 && $srJq('#srMsgs #srFaded').length == 0){
					$srJq('#srMsgs p#typing').remove();
					$srJq('#srMsgs #srFaded').parent().remove();
					agentTyping(data.name);
					scrollChat();
					sr_resetNoResponseTimer();
				}
			}
		});
		socket.on('chat stoptyping', function(data){
			$srJq('#srMsgs p#typing').remove();
			console.log('sr-check-11');
			$srJq('#srMsgs #srFaded').parent().remove();
			scrollChat();
		});

		socket.on('autochat typing', function(data){
						if (!isMobileUx) {
				if ( data.name != 'Customer' ) {
					$srJq('#srMsgs p#typing').remove();
					console.log('sr-check-12');
					$srJq('#srMsgs #srFaded').parent().remove();
					if (data.typing == 1) {
												var agent_name = $srJq('#srMsgs p.agent span:not([class])').html();
						agent_name = agent_name.replace(':','');
												agentTyping(agent_name);
						scrollChat();
						sr_resetNoResponseTimer();
					}
				}
			}
		});

				socket.on('autochat typists', function(typists){
						var hasTypists = false;
			$srJq.each(typists, function(key, value){
				if ( typeof value.name != "undefined" && value.name != "Customer" && value.name !== "" ) {
					hasTypists = true;
				}
			});
			if(hasTypists === true){
								var agent_name = $srJq('#srMsgs p.agent span:not([class])').html();
				if (typeof agent_name != 'undefined') {
					agent_name = agent_name.replace(':','');
										var existingTypeMsg = $srJq('#srMsgs #typing').length + $srJq('#srMsgs #srFaded').length;
					if (existingTypeMsg == 0){
												agentTyping(agent_name);
						scrollChat();
					}
				}
			}
		});

				function populateAgent (agent_ref, agent_name) {
						$srJq('.srIntro').html('You are chatting with ' + agent_name);

						$srJq.ajax({
				url: "//app.meetami.ai/agents/return_details/" + agent_ref,
				type: "GET",
				success: function(data) {
										dataObj = JSON.parse(data);
										$srJq('.srIntroPos').html(dataObj.team);
									}
			});
		}

				socket.on('chat transfered-widget', function(data){
			if (typeof data.agent_name != 'undefined' && data.agent_name.indexOf('Ami v') == -1) {
								$srJq('#srMsgs').append('<div><p class="feint">The chat was transferred to' + data.agent_name + '</p></div>');
								$srJq('.srIntro').html('You are chatting with ' + data.agent_name);

								populateAgent(data.agent_ref,data.agent_name);
				scrollChat();
			}
		});

		
		socket.on('disconnect', function(){
						console.log('Socket disconnected');
			$srJq('#amiAgentsList').val('');
			$srJq('#agentsList').val('');
						var curChat = getChatId();
			if(typeof curChat != 'undefined'){
				joinChat(curChat, "302220474411");
				socket.emit('chat notify', { chat_ref: curChat, client_ref: "302220474411"});
			}
		});

		socket.on('connect', function(){
						console.log('Socket connected');
			reconnectChats();
			var dept = getDeptId();
			updateAvailableAgents(dept);
		});

		socket.on('connect_error', function(){
						showErrorBanner();
		});

		socket.on('reconnect', function(){
						reconnectChats();
			hideErrorBanner();
						var dept = getDeptId();
			updateAvailableAgents(dept);
					});

		function reconnectChats () {
						var curChat = getChatId();
			if(typeof curChat != 'undefined'){
				joinChat(curChat, "302220474411");
							}
		}

		function showErrorBanner (  ) {

		}

		function hideErrorBanner (  ) {

		}

				function endReplierChat(skip_confirm, nof){

						if(typeof nof == 'undefined' || nof == ''){
				nof = "nof";
			}
						var amiAgentStatus = $srJq('#amiAgentsStatus').val();

						var close = 0;
			if(skip_confirm != 'skip' || (typeof nof == 'undefined' || nof == '')){
				var msg_no = $srJq('#srMsgs p.agent').length;
				if(msg_no == 1){
					skip_confirm = 'skip';
					nof = 'nof';
					close = 1;
				}
			}

			if($srJq('#srChatter').data('sr-feedback-given') == 1) {
				close = 1;
			}

			if(skip_confirm == 'skip'){
				var chat_ref = getChatId();
								if (typeof srSpecifyHide != 'undefined') {
					srTriggerCbEarly();
				}
				redistributeViaNode({}, 'close');
				endChat();

								$srJq.cookie('sr-cl', 1, { path: '/', domain: domain });
				$srJq('#srChatter').attr('class', 'srFeedback');

								$srJq.ajax({
					type: "GET",
					url: "//app.meetami.ai/feedback/create/" + chat_ref + "/" + nof,
					success: function(feedback_form) {
												if(close == 1){
							closeReplier();
						} else {
							$srJq('#srChatter').slideUp(250).html(feedback_form).slideDown(300);
							populate_feedback_callback_form();
						}
												if (amiAgentStatus == 1) {
							socket.emit('autochat close', chat_ref, 0);
						}

												$srJq('.srClose').attr("rel", "srChatToggle");
						if(nof == 'nof'){
							closeEnd();
						}
					}
				});
			} else {

				var confirmedExit = false;
				if ( confirmedExit === false ) {
					if($srJq("#srCloseOverlay").hasClass("visible") == false) {
						$srJq("#srCloseOverlay").fadeIn("fast");
						$srJq("#srCloseOverlay").addClass("visible");
						return;
					} else {
						confirmedExit = true;
					}
				}

				if (confirmedExit){
          			redistributeViaNode({}, 'close');
					endChat();
					var chat_ref = getChatId();

										if (typeof srSpecifyHide != 'undefined') {
						srTriggerCbEarly();
					}

					$srJq('#srChatter').attr('class', 'srFeedback');

										$srJq.cookie('sr-cl', 1, { path: '/', domain: domain });
											socket.emit('autochat close', chat_ref, 0);
											$srJq.ajax({
						type: "GET",
						url: "//app.meetami.ai/feedback/create/" + chat_ref + "/" + nof,
						success: function(feedback_form) {

														if(close == 1){
								closeReplier();
							} else {
								$srJq('#srChatter').slideUp(250).html(feedback_form).slideDown(300);
								populate_feedback_callback_form();
							}
														$srJq('.srClose').attr("rel", "srChatToggle");
							if(nof == 'nof'){
								closeEnd();
							}
						}
					});
				}
			}

			
			$srJq.cookie('sr-inSe', 0, { path: '/', domain: domain });
		}

		function endChat() {
			var chat_ref = getChatId();
			$srJq.ajax({
				type: "GET",
				url: "//app.meetami.ai/chats/end_chat/" + chat_ref,
				success: function(data) {
					console.log("Ended chat");
				}
			});
		}

		$srJq("#srCloseOverlay .srYes").click(function() {
			endReplierChat();
			$srJq("#srCloseOverlay").hide();
			$srJq("#srCloseOverlay").removeClass("visible");
		});

		$srJq("#srCloseOverlay .srNo").click(function() {
			$srJq("#srCloseOverlay").hide();
			$srJq("#srCloseOverlay").removeClass("visible");
						$srJq('#srMsgSender').prop('disabled', false);
		});

		function srIsiPhoneNoConfirm () {
		  var iHeight = window.screen.height;
		  var iWidth = window.screen.width;
			var size = false;
		  if (iWidth === 375 && iHeight === 667) {
		    size = true;
		  } else if (iWidth === 414 && iHeight === 736) {
		    size = true;
		  }

			var safariBrowser = isSafari();
			if (!!navigator.userAgent.match(/iPhone/i) && safariBrowser === true && size === true) {
				return true;
			}
			return false;
		}

		function isSafari () {
			var ua = navigator.userAgent.toLowerCase();
			if (ua.indexOf('safari') != -1) {
			  if (ua.indexOf('chrome') > -1) {
			    return false;
			  } else {
			    return true;
			  }
			}
			return false;
		}

				function submitFeedback(during){
			$srJq('a[rel="srSubmitFeedback"]').off('click');
						var chat_ref = getChatId();
			var client_ref = '302220474411';

						feedback = $srJq('#srFeedbackInput').val();
			rating = $srJq('#srRating').val();

			var name = $srJq("#feedback-callback-form").find("#name").val();
			var email = $srJq("#feedback-callback-form").find("#email").val();
			var phone = $srJq("#feedback-callback-form").find("#phone").val();
			var callback_time = $srJq("#feedback-callback-form").find("#srSelectTime").val();

						$srJq.ajax({
				url: "//app.meetami.ai/feedback/create/" + chat_ref + "/" + during,
				type: "POST",
				data: {
					feedback: feedback,
					rating: rating,
					uname: name,
					uemail: email,
					phone_no: phone,
					call_time: callback_time
				},
				success: function(data) {

					if(typeof(during) === "undefined" || during == false) {
						$srJq('#srChatter').html(data);
					} else {
						$srJq('#srChatter').html(chat_dom).data("sr-feedback-given", 1);
						checkExistingChats();
						triggerListeners();
						$srJq('#srChatter a.footerRate').parent().replaceWith('<p class="footerRate success-color">Thanks for your feedback</p>');
						setTimeout(function() {
							$srJq('#srChatter .feedback-upper-container').hide();
						}, 25000);

						if(phone != "" && callback_time != "") {
							if(data != 0 && data != 'invalid-phone' && data != 'error-phone' && data != 'error-recent'){

																toSimpleForm();

								displayPhoneThanks(callback_time);

																
							} else if(data == 'error-very-recent') {

								var end_msg = '<div class="srEndChat phone"><p>We are calling you now.</p></div>';
								$srJq('#srMsgs').append(end_msg);
								handleTts(end_msg);
								scrollChat();

								redistributeViaNode({time: 'none'}, 'callback-scheduled');

							} else if(data == 'error-recent') {
																var end_msg = '<div class="srEndChat phone"><p>A call has already been scheduled. We will be in touch as soon as we can.</p></div>';
								$srJq('#srMsgs').append(end_msg);
								handleTts(end_msg);
								scrollChat();

																recordAutoMsg ("A call has already been scheduled. We will be in touch as soon as we can.", "srEndChat phone", 0);
								clearTimeout(scope.greenTimeout);

							} else {
								alert('Sorry but there was a problem making the call. Please try again.');
							}
						}

					}
					$srJq('a[rel="srSubmitFeedback"]').click(function(e){
						e.preventDefault();
						submitFeedback();
					});

				}, error: function(e,f,g) {
					console.log(e);
				}
			});
		}

		
		$srJq(function() {

													
			
			
					});

		
		
		
		

			$srJq('#rlMsgForm .reply-rl-btn').on('click',function(e){
				e.preventDefault();
								if($srJq(".rl-intro-message").length > 0) {
					var msg = $srJq(".rl-intro-message").text();
				} else {
					var msg = null;
				}
				console.log("MSGSGSGMSGMSGMSGMSGMSGM", msg);
				chatToggle("coverhide", "RL-reply", "blMsg", null, null, null, msg);
							});

			$srJq('#rlMsgForm .dismiss-rl-btn').click(function(e){
				e.preventDefault();
				var params = $srJq('a[rel="srCloseLayer"]').attr('name');
				if(typeof params != 'undefined'){
					closeLayer(params);
				} else {
					closeLayer();
				}
			});

		function createRemoteChat(msg_type){

						form_data = $srJq('#' + msg_type + 'MsgForm').serializeArray();

			console.log(form_data);
			return;

						if( $srJq.cookie('sr-ln') != undefined){
				msgObj['language'] = $srJq.cookie('sr-ln');
			}

			form_data = JSON.stringify(form_data);
			var last_msg = $srJq('#' + msg_type + 'MsgForm #' + msg_type + 'Msg').val();
			$srJq('#' + msg_type + 'Msg').attr('disabled', true);

						var agents = $srJq('#agentsList').val();
			if(agents == ''){
				agents = 'none'
			}

			language = 'en';

						if( $srJq.cookie('sr-ln') != undefined){
				language = $srJq.cookie('sr-ln');
			}


			$srJq.ajax({
				type: "GET",
				url: "//app.meetami.ai/chats/create_chat/" + client_ref + '/' + language +'/' + agents + '/' + uid + '/direct-mob',
				success: function(data) {

					if(data != 'no-agent'){
						dataObj = JSON.parse(data);

						if(dataObj.hasOwnProperty('chat_nonce')) {
							chatNonce = dataObj.chat_nonce;
						}

						form_data = CryptoJSAesEncrypt(chatNonce, form_data);

						var msgObj = {data: form_data};

						language = 'en';

												if( $srJq.cookie('sr-ln') != undefined){
							language = $srJq.cookie('sr-ln');
						}


						
						$srJq.ajax({
							url: "//app.meetami.ai/chats/add_msg/" + client_ref + "/" + dataObj.chat_ref + "/" +language+ '/'+ agents,
							type: "POST",
							data: msgObj,
							success: function(data) {
								data = CryptoJSAesDecrypt(chatNonce, data);
																var tns_type = 'SL';
								if(msg_type == 'rl'){ tns_type = 'RL'; }
								createLiveChat(dataObj.chat_ref, dataObj.agent_id, dataObj.agent_name, dataObj.chat_no, last_msg, tns_type);

								var chat_url = 'https://app.meetami.ai/chats/chat/302220474411/mob/' + uid + '/' + dataObj.chat_ref;
								srOpenTab(chat_url);

																$srJq('#' + msg_type + 'Msg').attr('disabled', false).val('');
								if(msg_type == 'srch'){
									$srJq('#srCoverRecovery .text-form').html('<p>Thanks for starting a chat. Your conversation will open in a new tab.</p><p>If the chat window does not open automatically, please use the button below.</p><a href="' + chat_url + '" class="srSubBtn" target="_blank">Open Chat</a>');
								} else {
									$srJq('#srCover .text-form').html('<p>Thanks for starting a chat. Your conversation will open in a new tab.</p><p>If the chat window does not open automatically, please use the button below.</p><a href="' + chat_url + '" class="srSubBtn" target="_blank">Open Chat</a>');
								}
							}
						});

					} else {
						alert('Sorry but we do not have anyone available to speak to you at the moment');
					}
				}
			});

		}

		
				
		function storeField(the_form, field_selector, field_value, triggers_call, call_delay){

						uid = getUsrId();

						$srJq.ajax({
				url: "//app.meetami.ai/client_contact_forms/record_details/302220474411/" + the_form,
				type: "POST",
				data: {field_value: field_value, selector: field_selector, uid: uid, url: "https://www.liverpoolfc.com/"},
				success: function(data) {
									}
			});

		}

				
				function trackResult(){

						var client_ref = '302220474411';

						var uid = getUsrId();

						var srch_ref = $srJq.cookie('sr-srch');
			if(typeof srch_ref == 'undefined'){
				srch_ref = '';
			}

						
			if(typeof page_elements != 'undefined'){
								$srJq.ajax({
					url: "//app.meetami.ai/client_result_pages/record_result/" + client_ref + "/" + srch_ref,
					type: "POST",
					data: {field_data: page_elements, uid: uid, url: "https://www.liverpoolfc.com/"},
					success: function(data) {
												if(data != 0){
														$srJq.removeCookie('sr-srch', { path: '/', domain: domain });

													}
					}
				});
			}
		}

				function recoveryLayer(layer_type){

						var status = $srJq('#srContent').css('display');
 
						var existing = $srJq.cookie('sr-rl');
			if(typeof existing != 'undefined'){
				existing = JSON.parse(existing);
			}

						if(status == 'none'){

				if(typeof layer_type == 'undefined'){
										if(typeof existing == 'undefined' || existing['rl'] != 1){

						if($srJq('#srBadge').length == 0 || ( !($srJq('#srBadge').is(':animated')) &&  !($srJq('#srBadge').hasClass('sr-badge-onscreen')) ) ){
							$srJq('#srCover').fadeIn(350);
							setTimeout(function () {
								$srJq('#srCover .srCoverContent').slideDown(350);
								$srJq('#srCover a.srCloseBtn').slideDown(350);
							}, 550);
														if(typeof existing != 'undefined'){
								existing['rl'] = 1;
							} else {
								existing = { rl: 1, srch: 0 }
							}
							existing = JSON.stringify(existing);
							$srJq.cookie('sr-rl', existing, { path: '/', domain: domain });
						}
	
					}

				} else {

										$srJq('#srCoverRecovery').fadeIn(350);
					setTimeout(function () {
						$srJq('#srCoverRecovery .srCoverContentRecovery').slideDown(350);
						$srJq('#srCoverRecovery a.srCloseBtn').slideDown(350);
					}, 550);
										if(typeof existing != 'undefined'){
						existing['srch'] = 0;
					} else {
						existing = { rl: 1, srch: 0 }
					}
					var rslt = existing['rslt'];
					existing = JSON.stringify(existing);
					$srJq.cookie('sr-rl', existing, { path: '/', domain: domain });

					
										var usr_ref = getUsrId();
					$srJq.ajax({
						url: "//app.meetami.ai/user_searches/record_goal/" + usr_ref + '/' + rslt + '/rl' ,
						type: "GET",
						success: function(data) {}
					});
				}
			} else {
								if(typeof existing != 'undefined'){
					existing['srch'] = 0;
					var rslt = existing['rslt'];
					existing['rslt'] = 0;
					existing = JSON.stringify(existing);
					$srJq.cookie('sr-rl', existing, { path: '/', domain: domain });

										var usr_ref = getUsrId();
					var chat_ref = $srJq('#chat_ref').val();
					$srJq.ajax({
						url: "//app.meetami.ai/user_searches/record_goal/" + usr_ref + '/' + rslt + '/cho-' + chat_ref,
						type: "GET",
						success: function(data) {}
					});
				}
			}
		}

		function closeLayer(layer_type){
			if(typeof layer_type == 'undefined'){
				$srJq('#srCover .srCoverContent').slideUp(350);
				$srJq('#srCover a.srCloseBtn').fadeOut(350);
				$srJq('#srCover').fadeOut(600);
			} else {
				$srJq('#srCoverRecovery #srCoverContentRecovery').slideDown(350);
				$srJq('#srCoverRecovery a.srCloseBtn').fadeOut(350);
				$srJq('#srCoverRecovery').fadeOut(600);

								var existing = $srJq.cookie('sr-rl');
				if(typeof existing != 'undefined'){
					existing = JSON.parse(existing);
					var rslt = existing['rslt'];
					if(rslt != 0){
						existing['rslt'] = 0;
						existing = JSON.stringify(existing);
						$srJq.cookie('sr-rl', existing, { path: '/', domain: domain });

						var usr_ref = getUsrId();
						var chat_ref = $srJq('#chat_ref').val();
						$srJq.ajax({
							url: "//app.meetami.ai/user_searches/record_goal/" + usr_ref + '/' + rslt + '/rl-nfa',
							type: "GET",
							success: function(data) {}
						});
					}
				}
			}
		}

				function getUsrId(){
			var usr_cookie = $srJq.cookie('sr-data');
			uid = '';
			if(typeof usr_cookie != 'undefined'){
				usr_details = JSON.parse(usr_cookie);
				if(usr_details['uid'] != '' && usr_details['uid'] != undefined){
					uid = usr_details['uid'];
				}
			}
			return uid;
		}

		function getChatId () {

			var chat_ref = $srJq('#chat_ref').val();
			if(typeof(chat_ref) === "undefined" || chat_ref == '') var chat_ref = $srJq.cookie('sr-ec');

			if ( typeof chat_ref != 'undefined') {
				return chat_ref;
			} else {
				return false;
			}

		}

		console.log("department_hours", department_hours);
 
				function submitForm(form_id){

						
						var uid = getUsrId();

						var rlCookie = $srJq.cookie('sr-rl');
			if(typeof rlCookie != 'undefined'){
				rlCookie = JSON.parse(rlCookie);
				var rslt = rlCookie['rslt'];
				if(form_id == 'searchRecForm'){
					rslt = 'sl-' + rslt;
				} else {
					rslt = 'rl-' + rslt;
				}
				if(rslt != 0){
					rlCookie['rslt'] = 0;
					rlCookie = JSON.stringify(rlCookie);
					$srJq.cookie('sr-rl', rlCookie, { path: '/', domain: domain });
				}
			}

						var isValid = $srJq('#' + form_id).valid();

						if($srJq('#' + form_id + ' input[type=tel]').length){
				phone_rslt = validatePhone($srJq('#' + form_id + ' input[type=tel]').val());
				if(phone_rslt != true){
					isValid = false;
					$srJq('#' + form_id + ' input[type=tel]').closest('div').children('p.errormsg').remove();
					$srJq('#' + form_id + ' input[type=tel]').closest('div').append('<p class="small errormsg">' + phone_rslt + '</p>');
				}
			}

			if(isValid == true){

								$srJq('#' + form_id).slideUp(200);
				$srJq('#' + form_id).closest('div').children('.loader').slideDown(200);

								form_data = $srJq('#' + form_id).serializeArray();
				form_data = JSON.stringify(form_data);

								$srJq.ajax({
					url: "//app.meetami.ai/chats/submit_form/302220474411/" + uid + '/' + rslt,
					type: "POST",
					data: { form_data: form_data },
					success: function(data) {
						$srJq('#' + form_id).closest('div').children('.loader').slideUp(300);
						if(data == 1){
							$srJq('#' + form_id).prepend('<p class="success">Thanks for your message. We will be in touch shortly.</p>').slideDown(300);
														$srJq.ajax({
								url: "//app.meetami.ai/user_searches/record_goal/" + uid + '/' + rslt + '/form',
								type: "GET",
								success: function(data) {}
							});
						} else {
							$srJq('#' + form_id).prepend('<p class="error">Sorry but there was an error submitting your form. Please try again.</p>').slideDown(300);
						}
					}
				});
			}

		}

		
		
				function srEndChatMsg (msg, msg_class, redistribute) {
						var end_msg = '<div class="srEndChat ' + msg_class + '"><p><a target=\'_top\' href=\'https://faq.liverpoolfc.com/portal/en/kb/articles/contact-us-email-us?fromarticle=true\'>Please click here to email us.</a><br /></p></div>';
						$srJq('#srMsgs').append(end_msg);
			handleTts(end_msg);
			if(redistribute) recordAutoMsg('<a target=\'_top\' href=\'https://faq.liverpoolfc.com/portal/en/kb/articles/contact-us-email-us?fromarticle=true\'>Please click here to email us.</a><br />', 'srEndChat ' + msg_class);
			$srJq('#srMsgs').linkify({ target: '_blank' });
			scrollChat();
			if(redistribute) srPlink();
		}

				function srEndChatWrapper(callback_id, trigger, redistribute){

			var deptId = getDeptId();
							var icbl = 0;
			
			var is_cb_msg = false;

						if (typeof callback_id != 'undefined' && callback_id == 'emailed') {

				srEndChatMsg('<a target=\'_top\' href=\'https://faq.liverpoolfc.com/portal/en/kb/articles/contact-us-email-us?fromarticle=true\'>Please click here to email us.</a><br />', 'mail', redistribute);

							} else if(typeof callback_id != 'undefined' && callback_id != true && callback_id.indexOf('existing') > -1){

								srEndChatMsg('A callback has already been scheduled for you. Our team will be in touch at your requested time.', 'phone', redistribute);

			} else if(icbl == 1 && typeof(deptId) !== 'undefined' && deptId != '' && typeof department_hours[deptId] != 'undefined' && department_hours[deptId].open == 1) {
								is_cb_msg = true;
				var end_msg = '<div class="srEndChat phone"><p>Schedule your call.</p><p id="specifyBtn"><a href="#specify" name="' + callback_id + ' ' + trigger + '" id="srSpecifyTime">Click here</a> to specify a time or <a href="#specifyNow" id="srCallNow">click here</a> for a call now</p></div>';
				if(redistribute) recordAutoMsg('We are calling you now.', 'srEndChat phone');
			} else if(icbl == 1 && typeof(deptId) !== 'undefined' && deptId != '' && typeof department_hours[deptId] != 'undefined' && department_hours[deptId].hasFutureHours !== false) {
								is_cb_msg = true;
				var end_msg = '<div class="srEndChat phone"><p>There is currently no-one available to call you back. Please schedule your call for an appropriate time.</p><p id="specifyBtn"><a href="#specify" name="' + callback_id + ' ' + trigger + '" id="srSpecifyTime">Click here</a> to specify a time.</p></div>';
				if(redistribute) recordAutoMsg('There is currently no-one available to call you back. Please schedule your call for an appropriate time.', 'srEndChat phone');
			} else {
									var end_msg = '<div class="srEndChat mail"><p><a target=\'_top\' href=\'https://faq.liverpoolfc.com/portal/en/kb/articles/contact-us-email-us?fromarticle=true\'>Please click here to email us.</a><br /></p></div>';
					if(redistribute) recordAutoMsg('<a target=\'_top\' href=\'https://faq.liverpoolfc.com/portal/en/kb/articles/contact-us-email-us?fromarticle=true\'>Please click here to email us.</a><br />', 'srEndChat mail');
																		is_cb_msg = true;
			}

			if(is_cb_msg == true) {
								$srJq('#srMsgs').append(end_msg);
				handleTts(end_msg);
				$srJq('.phone').show();
				$srJq('#srMsgs').linkify({ target: '_blank' });
									srSetupListenner('trigger', callback_id);
				
								if(redistribute) srPlink();

								scrollChat();
				if(redistribute) srPlink();

														srSpecifyHide = setTimeout(function () {
						srHandleCallNow(false, false, trigger, redistribute);
					}, 30000);
					srSpecifyHideSpec = {
						'trigger': trigger
					};
					scrollChat();
							}

		}

		function srHandleCallNow(callbacks, callback_id, trigger, redistribute) {
			if(callbacks) {
				$srJq('#srMsgs #specifyBtn').slideUp(150);
								srCbRequest(callback_id, trigger, undefined, true);
			} else {
				$srJq('#srMsgs #specifyBtn').slideUp(150);
								var uid = getUsrId();
				var chat_id = getChatId();
				if(redistribute) srTriggerDirectCall(uid, chat_id, 'none', trigger, true);
				redistributeViaNode({time: 'none'}, 'callback-scheduled');
			}
		}

		function srTriggerCbEarly () {

			if (typeof srSpecifyHideSpec != 'undefined' && typeof srSpecifyHideSpec.trigger != 'undefined') {

								if (typeof srSpecifyHideSpec.callback_id != 'undefined') {
					srCbRequest(srSpecifyHideSpec.callback_id, srSpecifyHideSpec.trigger);
				} else {
					var uid = getUsrId();
					var chat_id = getChatId();

					srTriggerDirectCall(uid, chat_id, 'none', srSpecifyHideSpec.trigger);
				}
				clearTimeout(srSpecifyHide);
				delete srSpecifyHideSpec;
				$srJq('#srMsgs #specifyBtn').slideUp(150);
			}
			return;

		}

		function srGenerateCallbackSelect() {
			returnArr = {};
							returnArr = {
					content: '<p>Please choose a time for your call today</p>'.replace("today", "today"),
					day: 'today',
					menu: '<select name="data[time]" id="srSelectTime"><option value="9:00">9am</option><option value="10:00">10am</option><option value="11:00">11am</option><option value="12:00">12pm</option><option value="13:00">1pm</option><option value="14:00">2pm</option></select>'
				}
							return returnArr;
		}

		function srGenerateCallbackDeptSelect() {
			var selectMenuArr = {};
									return selectMenuArr;
		}

				function srSetupListenner (trigger, callback_id) {
			$srJq('#srCallNow').on('click', function(e){
				e.preventDefault();
        		clearTimeout(srSpecifyHide);
									srHandleCallNow(false, false, trigger, true, true);
					scrollChat();
							});

			$srJq('#srSpecifyTime').on('click', function(e){

				e.preventDefault();

								clearTimeout(srSpecifyHide);
				delete srSpecifyHideSpec;

								var params = $srJq(this).attr('name');
								var selectMenuData = srGenerateCallbackSelect();
				var updatedContent = selectMenuData.content;
				var selectMenu = selectMenuData.menu;
				var day_date = false;

								var selectMenuArr = srGenerateCallbackDeptSelect()

								var deptId = getDeptId();
				console.log("DEPT ID: " + deptId);
				console.log(selectMenuArr[deptId]);
				if (deptId != '' && typeof selectMenuArr[deptId] != 'undefined') {
					updatedContent = selectMenuArr[deptId].content;
					selectMenu = selectMenuArr[deptId].menu;
					selectMenuData = selectMenuArr[deptId];
					day_date = selectMenuData.day_date;
				}

				var pleaseCallLabels = {"today":"Please call today at","tomorrow":"Please call tomorrow at","monday":"Please call on monday at","tuesday":"Please call on tuesday at","wednesday":"Please call on wednesday at","thursday":"Please call on thursday at","friday":"Please call on friday at","saturday":"Please call on saturday at","sunday":"Please call on sunday at"};
				updatedContent += '<p>' + pleaseCallLabels[selectMenuData.day] + ': ' + selectMenu + '</p>';
								updatedContent += '<a href="#specify" name="' + params + '" id="srSpecifyTimeBtn">Select time</a>';

								$srJq('#srMsgs .srEndChat.phone:last').html(updatedContent).show();
				recordAutoMsg(updatedContent, 'srEndChat phone', 1);
				setTimeout(function () {
					scrollChat();
					if ( typeof trigger == 'undefined' ) {
						srSetupListenner();
						srSetupCallBackFormListenner(day_date); 					} else {
						srSetupListenner(trigger);
						srSetupTriggerTimeFormListenner(day_date);
					}
				}, 500);

			});
					};


				function srSetupTriggerTimeFormListenner (day_date) {

			$srJq('#srSpecifyTimeBtn').on('click', function(e){

				e.preventDefault();

								var selectedTime = $srJq('#srSelectTime').val();

				if(typeof day_date !== 'undefined' && day_date != false) {
					selectedTime = day_date + " " + selectedTime + ':00';
				} else {
					selectedTime = "2021-02-13 " + selectedTime + ':00';
				}

								var params = $srJq(this).attr('name');
				params = params.split(' ');

								var uid = getUsrId();
				var chat_id = getChatId();

								srTriggerDirectCall(uid, chat_id, selectedTime, params[1]);

       			 redistributeViaNode({time: selectedTime}, 'callback-scheduled');

				
			});

		}

		function displayPhoneThanks(time, isNow) {
            console.log("DISPLAYING THANKS FOR TIME: " + time);
			if ( time == 'none') {
				if(typeof(isNow) === "undefined") {
					var thanksContent = "We are calling you now.";
				} else {
					var thanksContent = "We will call you as soon as possible";
				}
			} else {
				var thanksContent = "Thank you. Your call is now scheduled.";
			}
			$srJq('#srMsgs .srEndChat.phone:last').html(thanksContent).show();
			recordAutoMsg("Thank you. Your call is now scheduled.", 'srEndChat phone', 1);
			scrollChat();
		}

				function srSetupCallBackFormListenner (day_date) {
						$srJq('#srSpecifyTimeBtn').on('click', function(e){

				e.preventDefault();

								var selectedTime = $srJq('#srSelectTime').val();

				if(typeof day_date !== 'undefined' && day_date != false) {
					selectedTime = day_date + " " + selectedTime + ':00';
				} else {
					selectedTime = "2021-02-13 " + selectedTime + ':00';
				}

								var paramsSet = $srJq(this).attr('name');
				paramsSet = paramsSet.split(' ');

								var uid = getUsrId();
				var chat_ref = getChatId();

								$srJq.ajax({
					url: "//app.meetami.ai/chats/update_cb_time/" + paramsSet[0] + "/" + uid + "/" + chat_ref,
					type: "POST",
					data: {cb_time: selectedTime},
					success: function(data) {
						                        redistributeViaNode({time: selectedTime}, 'callback-scheduled');
						if (data == 'BY') {
														var chat_id = getChatId();
							switchLive(chat_id, 'T');
							triggerDP(true, false);
						}
					}
				});

								srCbRequest(paramsSet[0], paramsSet[1], selectedTime);

								var thanksContent = "Thank you. Your call is now scheduled.";
				$srJq('#srMsgs .srEndChat.phone:last').html(thanksContent).show();
				recordAutoMsg("Thank you. Your call is now scheduled.", 'srEndChat phone', 1);
				scrollChat();

			});
		}


		

				function trackAction(trigger, action){

			var user_ref = getUsrId();

			$srJq.ajax({
				url: "//app.meetami.ai/chats/track_action/302220474411/" + user_ref + '/' + trigger + '/' + action,
				type: "GET",
				success: function(data) {
									}
			});

		}

				function recordAutoMsg (msg, msgClass, isUpdate, sender, form) {

						var user_ref = getUsrId();
			var chat_ref = $srJq('#chat_ref').val();

			if (typeof chat_ref == 'undefined' || chat_ref == '') {
				return false;
			}

			if (typeof isUpdate == 'undefined' || isUpdate == '') {
				isUpdate = 0;
			}

			if (typeof sender == 'undefined') {
				sender = '';
			}
			if (typeof form == 'undefined') {
				form = '';
			}
console.log(form);
						$srJq.ajax({
				url: "//app.meetami.ai/chats/record_auto_msg/302220474411/",
				type: "POST",
				data: { user_ref: user_ref, chat_ref: chat_ref, msg: msg, msg_class: msgClass, is_update: isUpdate, sender_name: sender, form: form },
				success: function(data) {
									}
			});

		}

		function srOpenTab(url) {
						var a = window.document.createElement("a");
			a.target = '_blank';
			a.href = url;

						var e = window.document.createEvent("MouseEvents");
			e.initMouseEvent("click", true, true, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null);
			a.dispatchEvent(e);
		};

		function oldSiteHack(){
						var viewportVal = $srJq('meta[name=viewport]').attr('content');
			if(typeof viewportVal == 'undefined' || viewportVal.indexOf('device-width') === false){

				var winWidth = getScreenWidth();
				if(winWidth < 720){
					$srJq('.mobOnly').css('display', 'block');
					$srJq('.mobHide').css('display', 'none');
					$srJq('#srContent').attr('class', 'mobHack');
					$srJq('.srCallBtn').attr('class', 'srCallBtn mobHack').css('display', 'block');
					imgToTxtHeader(1,1);
				} else {
					$srJq('.mobOnly').css('display', 'none');
					$srJq('.mobHide').css('display', 'block');
					$srJq('.mobHide.il').css('display', 'inline');
					$srJq('#srContent').attr('class', '');
					$srJq('.srCallBtn').attr('class', 'srCallBtn').css('display', 'none');
				}

			}
		}

		function timeOnSite(){
						var srLoggedOn = $srJq.cookie('sr-cur');

			if(typeof srLoggedOn != 'undefined'){
								srLoggedOn = Date.parse(srLoggedOn);
				var srNow = new Date();
				srNow = Date.parse(srNow);

				return (srNow - srLoggedOn) / 1000;
			} else {
								return 0;
			}
		}

		function getAgentName(){

			if($srJq('#srMsgs p.agent span:not(.avatar-mini)').length > 0){
				var name = $srJq('#srMsgs p.agent span:not(.avatar-mini)').html();
				name = name.replace(':', '');
			} else {
				name = '';
			}

			return name;
		}

				function validatePhone (phone_no) {
						regEx = new RegExp("^[0-9-+ ]{0,20}$");
			if(!regEx.test(phone_no)){
								phone_no = phone_no.toLowerCase();
				if(phone_no.indexOf('ex') > -1 || phone_no.indexOf('dd') > -1){
					return true;
				} else {
					return 'Please enter only numbers';
				}
			} else {
								if(phone_no.length > 9 ){
					return true;
				} else {
					if (phone_no.length == 0) {
						return "Please enter your phone number";
					} else {
						return "Sorry but your phone number is too short";
					}
				}
			}
		}

		function isIpad () {
						var isiPad = navigator.userAgent.match(/iPad/i) != null;
			return isiPad;
		}

		function sendGaEvent (sendVar, eventVar, nameVar, detailVar) {
							if (typeof ga != 'undefined') {
					ga(sendVar, eventVar, nameVar, detailVar);
				}
					}

		function appendToFormData(formData, obj) {
			formData = JSON.parse(formData);
			formData.push(obj);
			formData = JSON.stringify(formData);
			return formData;
		}

	

				function scrollChat(delay_me){
  console.log("scrollchat called..");
    var agent_images = {};
  $srJq('#srMsgs p').each(function(){
    var an_image = $srJq(this).children('span.avatar-mini').html();
    var aname = $srJq(this).children('span:not([class])').html();
    if ( typeof aname != 'undefined' && typeof agent_images[aname] == 'undefined' && typeof an_image != 'undefined' ){
      aname = aname.replace(';', '');
      agent_images[aname] = an_image;
    }

        var currStatus = $srJq(this).attr('class');
    if ( typeof currStatus != 'undefined' && currStatus.indexOf('inc-avatar') == -1 && typeof agent_images[aname] != 'undefined' && typeof an_image != 'undefined' ) {
      $srJq(this).addClass('inc-avatar').prepend('<span class="avatar-mini">' + an_image + '</span>');
    }
  });

    var winWidth = getScreenWidth();
  if(winWidth < 720){
    setTimeout(function(){
            window.scrollTo(0, 1);
    }, 0);
  }
	if(isHiddenTrigger && $srJq.cookie('srMin') == 1) {
		$srJq(".srClose").hide();
		return;
	}
    msgHeight(250, function(rslt){

        if(typeof delay_me == 'undefined'){
      $srJq("#srMsgs").each( function() {
                var scrollHeight = Math.max(this.scrollHeight, this.clientHeight);
        var sTVal = scrollHeight - this.clientHeight;
								this.scrollTop = sTVal;
								srPositionFeedback();
      });
    } else {
      setTimeout(function () {
        $srJq("#srMsgs").each( function() {
                    var scrollHeight = Math.max(this.scrollHeight, this.clientHeight);
					var sTVal = scrollHeight - this.clientHeight;
										this.scrollTop = sTVal;
					srPositionFeedback();
        });
      }, delay_me);
    }

  });
}

function getScreenWidth(){
    var screenSize = screen.width;
  var windowSize = $srJq(window).width();

    var winWidth = screenSize;
  if(screenSize > windowSize){
    winWidth = windowSize;
  }

  return winWidth;
}

function srPositionFeedback () {
					var scrnWidth = getScreenWidth();
		if (scrnWidth < 720) {
				if($srJq('.feedback-prechat-container').length){
								if($srJq('#srChatForm').length) {
					var formHeight = $srJq('#srContent #srChatForm').height() + 5;
					$srJq('#srContent .feedback-prechat-container').css('bottom', formHeight);
				} else {
					$srJq('#srContent .feedback-prechat-container').css('bottom', 95);
				}
			}
			}
	}

function msgHeight (delay, callback) {

  if (typeof delay =='undefined'){
    delay = 50;
  }
  setTimeout(function(){
        var screenWdth = getScreenWidth();
    var areaHeight = $srJq('#srContent').height();

	
    
			var scrnHeight = $srJq(window).height();

      if ( (areaHeight > 560 || scrnHeight > 860) && screenWdth > 720 ) {
        areaHeight = 560;
      }
            areaHeight -= $srJq('#srContent #srHeader').height();
        if($srJq('#srContent #footerLnk').length){
      areaHeight -= ($srJq('#srContent #footerLnk').height() + 15);
      console.log('Footer 1 ' + areaHeight);
    }
    if($srJq('#srContent .footerLnk').length){
      areaHeight -= ($srJq('#srContent .footerLnk').height() + 15);
      console.log('Footer 2 ' + areaHeight);
    }
    if($srJq('#srChatForm').length){
      areaHeight -= ($srJq('#srContent #srChatForm').height() + 15);
      console.log('chatForm ' + areaHeight);
						var formBtm = $srJq("#srContent #srChatForm").css('bottom');
			if (!$srJq('#srContent .footerLnk').length && !$srJq('#srContent #footerLnk').length && typeof formBtm != 'undefined' && formBtm != "") {
				formBtm = Number(formBtm.replace('px', ''));
				if (!isNaN(formBtm)) {
					areaHeight -= formBtm;
					console.log("added extra: " + formBtm);
				}
			}
    }
    if($srJq('.feedback-prechat-container').length){
      console.log('feedkack before ' + areaHeight);
      areaHeight -= ($srJq('#srContent .feedback-prechat-container').height());
            console.log('feedkack after ' + areaHeight);
    }
    
        console.log('Final ' + areaHeight);

    		$srJq('#srContent #srMsgs').css('max-height', areaHeight);
        if($srJq('#srContent #srMsgs').hasScrollBar()) {
      $srJq(".feedback-upper-container").addClass("scrollbar-visible");
          }
    callback(true);
  }, delay);
}

$srJq(function(){
  bindMobileSwipe();
});
function bindMobileSwipe() {
  }
					var display_character_limit = 1;
var character_limit = 160;
var character_limit_warning_colour = '';
var character_limit_threshold_colour = '#1c468d';
var display_character_string = 'max message size';

display_character_string = display_character_string.replace(/\*CHAR\*/,character_limit );

console.log(display_character_string);

$srJq(document).ready(function(){

	setupMessageLimitEventHandlers();
});


function setupMessageLimitEventHandlers(){

	$srJq(document).on('keyup','#srMsgSender', function(e){
		styleMessageInput();
	})
}

function styleMessageInput(resetToDefault){

	if($srJq('#srMsgSender').val() == undefined){
		return;
	}

	var charLength = $srJq('#srMsgSender').val().length;
	var charactersRemainingCount = character_limit - charLength;

	if(typeof resetToDefault !== 'undefined' && resetToDefault== true){
		charactersRemainingCount = character_limit
	}

	var cssStyle,cssInputStyle = '';
	if(charactersRemainingCount <= 50 &&  charactersRemainingCount > 20){
		cssInputStyle = 'box-shadow:none!important;border: 1px solid'+character_limit_warning_colour;
		cssStyle = 'color:'+character_limit_warning_colour+'!important';
	} else if (charactersRemainingCount <= 20 ) {
		cssInputStyle = 'box-shadow:none!important;border: 1px solid'+character_limit_threshold_colour;
		cssStyle = 'color:'+character_limit_threshold_colour+'!important';
	} else {
		cssStyle = '';
		cssInputStyle = '';
	}

	if(charactersRemainingCount < 0){

		$srJq('#character-message-container').text(display_character_string);
	} else {
		var placeHolder = '<span id="character-count">*CHAR*</span> characters left</div>'.replace(/\*CHAR\*/,charactersRemainingCount);
		$srJq('#character-message-container').html(placeHolder);
	}

	$srJq('#srMsgSender').attr('style',cssInputStyle );
	$srJq('#character-message-container').attr('style',cssStyle );
}				console.log("SHOULD BE LOADING BADGE NOW......");
		// console.log('["https:\/\/www.liverpoolfc.com\/"]');
		// var firstCheck = ;
		// var secondCheck = ;
		// var thirdCheck = ;
		// console.log("firstCheck", firstCheck, "secondCheck", secondCheck, "thirdCheck", thirdCheck); ?>
		
		var funnelStatus = {
	qFieldType: false,
	qFieldSelector: false,
	options: {},
	frameReady: false,
	groupCompletion: {},
	curGroup: 0,
	closed: false
}

function srCreateSkipper ( chatData, isEntry ) {

	$srJq("#srMsgSender").prop("disabled", true).addClass("srLoadingFakeMsgSender");

	if (typeof isEntry == 'undefined') {
		isEntry = false;
	}

		var chatRef = getChatId();
	console.log('GETTING FRAME: ' + chatRef);

		$srJq.ajax({
		url: "https://app.meetami.ai/search_funnels/frame/302220474411/" + chatRef,
		type: "GET",
		success: function(pageData) {
						$srJq('#srInputs').append(pageData);
			$srJq("#hiddenFrame").removeClass("srInvisibleFrame");
			$srJq("#srMsgSender").removeClass("srNormalMsgSender");
						if (typeof chatData != 'undefined' && typeof chatData.LastMsgSff != 'undefined') {
				var curFieldType = funnelStatus.qFieldType = chatData.LastMsgSff.field_type;
				var curFieldSelector = funnelStatus.qFieldSelector = chatData.LastMsgSff.element_selector;
			} else if ( isEntry && typeof chatData != 'undefined' && typeof chatData.selector != 'undefined' ) {
								var curFieldType = chatData.field_type;
				var curFieldSelector = chatData.selector;
			}

						srPopulateExisting();
			funnelStatus.closed = false;

						if ( typeof curFieldType != 'undefined' && typeof curFieldSelector != 'undefined' && (curFieldType == 'select' || curFieldType == 'radio-group') ) {
				setTimeout(function(){
					if (curFieldType == 'radio-group') {
						srRetrieveRadioOptions( curFieldSelector );
					} else if (curFieldType == 'select') {
						srRetrieveSelectOptions( curFieldSelector );
					}
				}, 4500);
			}

						$srJq.cookie('sr-inSe', 1, { path: '/', domain: domain });

		}
	});

}

function srCheckSearchEntry (response) {

		if (typeof response.virtual_msg_type != 'undefined' && response.virtual_msg_type == 'SearchFunnel' && $srJq('#hiddenFrame').length <= 0) {
		srCreateSkipper(response, true);
	}

		if (typeof response.populatePrevious != 'undefined') {
		srPopulateField(response.populatePrevious);
	}

		if (typeof response.action != 'undefined' && response.action.indexOf('click') > -1) {
		srClickBtn(response);
	}

		if (typeof response.field_type != 'undefined')
		funnelStatus.qFieldType = response.field_type;
	if (typeof response.selector != 'undefined')
		funnelStatus.qFieldSelector = response.selector;

		if ( typeof funnelStatus != "undefined" ) {
		if ( typeof funnelStatus.qFieldType != 'undefined' && funnelStatus.qFieldType == 'select' ) {
			srRetrieveSelectOptions( funnelStatus.qFieldSelector );
		} else if (typeof funnelStatus.qFieldType != 'undefined' &&  funnelStatus.qFieldType == 'radio-group' ) {
			srRetrieveRadioOptions( funnelStatus.qFieldSelector );
		}
	}

		if (typeof response.ending != 'undefined' && response.ending == 'clear-search') {
				setTimeout(function() {
			$srJq('#hiddenFrame').hide();
			$srJq('#srInputs').removeClass('srForceFrameUserInput');
			$srJq('#srMsgSender').show().prop("disabled", false).focus();
		}, 1000);
	}
}

function srMsgIFrame ( action, element, elementType, msg ) {

		var msgObj = {
		action: action,
		element: element,
		elementType: elementType
	}
	if (typeof msg != 'undefined') msgObj.msg = msg;

		var frame = document.getElementById('hiddenFrameIFrame');
	console.log(frame);
	if (frame != null && typeof frame.contentWindow != 'undefined') {
		frame.contentWindow.postMessage(msgObj, '*');
	} else {
		setTimeout(function(){
			frame = document.getElementById('hiddenFrameIFrame');
			if (frame != null) {
				frame.contentWindow.postMessage(msgObj, '*');
			}
		}, 1200);
	}

}

function srClickBtn (response, isLocal, delay) {

	if (typeof isLocal == 'undefined') {
		isLocal = false;
	}
	if (typeof delay == 'undefined') delay = 0;
console.log("CLICKING NOW");

	if (isLocal) {
		srRevertToNormalMsgSender();
		$srJq(response.selector).prop('disabled', false).click();
		console.log("CLICKING LOCAL");
	} else {
		console.log("CLICKING NONLOCAL");
		console.log(response);
				if ( response.action == 'click-parent' ) {
						var isInForm = 1; //$srJq(response.selector, hiddenFrame.contents()).closest('form').length;
			if (isInForm == 1) {
								setTimeout(function(){
					if (!srShouldClick) {
						setTimeout(function(){
							srClickBtn(response, isLocal, 0);
						}, 1500);
					} else if (!srShouldClear()) {
						srRevertToNormalMsgSender();
						srMsgIFrame('click', response.selector, 'button-parent');
						funnelStatus.frameReady = false;
						funnelStatus.curGroup++;
					}
				}, 500 + delay);
			} else {
								$srJq.cookie('sr-sea-rdr', JSON.stringify({ formUrl: response.formUrl, funnel: response.searchFunnel }), { path: '/', domain: domain });
				window.location = response.formUrl;
			}
		} else {
			setTimeout(function(){
				if (!srShouldClick) {
					setTimeout(function(){
						srClickBtn(response, isLocal, 0);
					}, 1500);
				} else if (!srShouldClear()) {
					srRevertToNormalMsgSender();
					srMsgIFrame('click', response.selector, 'button');
					funnelStatus.frameReady = false;
					funnelStatus.curGroup++;
				}
			}, 500 + delay);
		}
	}
}

function srRevertToNormalMsgSender() {
	$srJq("#hiddenFrame").addClass("srInvisibleFrame");
	$srJq("#srMsgSender").addClass("srNormalMsgSender").prop("disabled", true).blur();
	$srJq.cookie('sr-sea-rdr', 0, { path: '/', domain: domain });
	var msgSenderInterval = setInterval(function() {
		$srJq("#srMsgSender").prop("disabled", true);
	}, 10);
	setTimeout(function() {
		clearInterval(msgSenderInterval);
	}, 2000);
}

function srShouldClick (group) {
	if (funnelStatus.closed === true) {
		return true;
	}
	if (funnelStatus.frameReady !== true) {
		return false;
	}
	if (typeof response.group == 'undefined') {
		return true;
	}
	if (funnelStatus.curGroup != response.group ){
		return false;
	}
	if ( funnelStatus.groupCompletion[response.group].fieldsPopulated < funnelStatus.groupCompletion[response.group].fieldNo) {
		return false;
	}

	return true;
}

function srSearchReinput(chat_ref, searchCookie, callback) {

	if (typeof searchCookie == 'undefined') {
				console.log('NO SEARCH COOKIE');
		callback(true);
		return;
	}
	searchCookie = JSON.parse(searchCookie);
	if (typeof searchCookie.formUrl == 'undefined' || searchCookie.formUrl != window.location.href) {
		console.log('SEARCH COOKIE: wrong URL');
		console.log(window.location.href);
		callback(true);
		return;
	}

		$srJq.ajax({
		url: "https://app.meetami.ai/search_funnels/get_details/302220474411/" + chat_ref + '/' + searchCookie.funnel,
		type: "GET",
		success: function(data) {
			console.log("RE DATA");
						if (data != 'error') {

				data = JSON.parse(data);
				console.log('REPOPULATING');
				console.log(data);
				for (var i in data.fields) {
					srPopulateField(data.fields[i], true);
				}
			}
						srClickBtn(data.button, true);

						$srJq.removeCookie('sr-sea-rdr', { path: '/', domain: domain });

			callback(false);
			return;
		},
		error: function () {
			callback(true);
			return;
		}
	});

	callback(false);
}

function srPopulateField (details, isLocal, delay) {

	if (typeof isLocal == 'undefined') {
		isLocal = false;
	}
	if (typeof delay == 'undefined') {
		delay = 0;
	}
	  if (details.field_type == 'text' || details.field_type == 'textarea' || details.field_type == 'email' || details.field_type == 'tel') {
    srPopulateText(details.selector, details.value);
  } else {
		switch (details.field_type) {
			case "select-one":
				srPopulateSelect( details.selector, details.value, isLocal, delay );
				break;
			case "radio-group":
				srPopulateRadioGroup( details.selector, details.value, isLocal, delay );
				break;
			case "checkbox":
				srPopulateCheckbox( details.selector, details.value, isLocal, delay );
				break;
      case "autocomplete":
        srPopulateText(details.selector, details.value, isLocal, delay);
		  			break;
			default:
				srPopulateText(details.selector, details.value, isLocal, delay);
				break
		}
	}
}

function srPopulateText ( selector, value, isLocal, delay, group ) {
	if (typeof isLocal == 'undefined') {
		isLocal = false;
	}

	if (typeof delay == 'undefined') delay = 0;
	setTimeout(function(){
		if (isLocal) {
			$srJq(selector).val(value);
		} else {
			if (!srShouldPopulate(group)) {
				setTimeout(function(){
					srPopulateText( selector, value, isLocal, 0 );
				}, 1500);
			} else if (!srShouldClear()) {
				srMsgIFrame("populate", selector, "text", value);
				srTrackPopulation ( group );
			}
		}
	}, delay);
}

function srPopulateCheckbox ( selector, isChecked, isLocal, delay, group ) {
	if (typeof isLocal == 'undefined') {
		isLocal = false;
	}

	if (typeof delay == 'undefined') delay = 0;
	setTimeout(function(){
		if (isLocal) {
			$srJq(selector).prop('checked', isChecked);
		} else {
			if (!srShouldPopulate(group)) {
				setTimeout(function(){
					srPopulateCheckbox ( selector, isChecked, isLocal, 0 );
				}, 1500);
			} else if (!srShouldClear()) {
				srMsgIFrame("populate", selector, "checkbox", isChecked );
				srTrackPopulation ( group );
			}
		}
	}, delay);
}

function srPopulateRadioGroup ( selector, value, isLocal, delay, group ) {
	if (typeof isLocal == 'undefined') {
		isLocal = false;
	}

	if (typeof delay == 'undefined') delay = 0;

	setTimeout(function(){
		if (isLocal) {
			$srJq(selector + ' input[type=radio]').each(function(){
				if ($srJq(this).val() == value) {
					$srJq(this).prop('checked', true);
				} else {
					$srJq(this).prop('checked', false);
				}
			});
		} else {
			if (!srShouldPopulate(group)) {
				setTimeout(function(){
					srPopulateRadioGroup ( selector, value, isLocal, 0, group );
				}, 1500);
			} else if (!srShouldClear()) {
				srMsgIFrame("populate", selector, "radio", value );
				srTrackPopulation ( group );
			}
		}
	}, delay);
}

function srGetRadioOptions ( selector, isLocal ) {
	if (typeof isLocal == 'undefined') {
		isLocal = false;
	}
	if (isLocal) {
		var optList = {};
		$srJq(selector + ' input[type=radio]').each(function(){
			var thisId = $srJq(this).attr('id');
			if (typeof thisId != 'undefined' && $srJq( selector + ' label[for=' + thisId + ']').length > 0) {
				optList[$srJq(this).val()] = $srJq( selector + ' label[for=' + thisId + ']').html();
			} else {
				optList[$srJq(this).val()] = $srJq(this).val();
			}
		});
	} else {
		return (typeof funnelStatus.options[selector] != 'undefined') ? funnelStatus.options[selector] : {};
	}
	return optList;
}

function srRetrieveRadioOptions ( selector, incrementer ) {
		srMsgIFrame("retrieve", selector, "radio" );
		setTimeout(function(){
		incrementer = (typeof incrementer == 'undefined') ? 1 : incrementer++;
		if (incrementer < 10 && (typeof funnelStatus.options[selector] == 'undefined' || funnelStatus.options[selector] == 'pending')) {
			srRetrieveRadioOptions ( selector, incrementer );
		}
	}, 1500);
}

function srProcessRadioOptions ( selector, rData ) {
	if (rData != 'missing') {
		funnelStatus.options[selector] = rData;
	}
}

function srPopulateSelect ( selector, value, isLocal, delay, group ) {
	if (typeof isLocal == 'undefined') {
		isLocal = false;
	}

	if (typeof delay == 'undefined') delay = 0;
	setTimeout(function(){
		if (isLocal) {
			$srJq(selector + ' option').each(function(){
				if ($srJq(this).val() == value) {
					$srJq(this).prop('selected', true);
				} else {
					$srJq(this).prop('selected', false);
				}
			});
		} else {
			if (!srShouldPopulate(group)) {
				setTimeout(function(){
					srPopulateSelect ( selector, value, isLocal, delay, group );
				}, 1500);
			} else if (!srShouldClear()) {
				srMsgIFrame("populate", selector, "select", value );
				srTrackPopulation ( group );
			}
		}
	}, delay);
}

function srTrackPopulation ( group ) {
	if (typeof funnelStatus.groupCompletion[group] != 'undefined') {
		funnelStatus.groupCompletion[group].fieldsPopulated++;
	}
}

function srShouldPopulate ( group ) {
	if (funnelStatus.closed === true) {
		return true;
	}
	if (funnelStatus.frameReady !== true) {
		return false;
	}
	if (typeof group == 'undefined') {
		return true;
	}
	if (group != funnelStatus.curGroup) {
		return false;
	}
	return true;
}

function srShouldClear () {
	if (funnelStatus.closed) {
		return true;
	}
	return false;
}

function srGetSelectOptions ( selector, isLocal ) {
	if (typeof isLocal == 'undefined') {
		isLocal = false;
	}
	if (isLocal) {
		var optList = {};
		$srJq(selector + ' option').each(function(){
			optList[$srJq(this).val()] = $srJq(this).html();
		});
	} else {
		var optList = (typeof funnelStatus.options[selector] != 'undefined' && funnelStatus.options[selector] != 'pending') ? funnelStatus.options[selector] : {};
	}
	return optList;
}

function srRetrieveSelectOptions ( selector, incrementer ) {
		srMsgIFrame("retrieve", selector, "select" );
		funnelStatus.options[selector] = 'pending';
	setTimeout(function(){
		incrementer = (typeof incrementer == 'undefined') ? 1 : incrementer++;
		if (incrementer < 10 && (typeof funnelStatus.options[selector] == 'undefined' || funnelStatus.options[selector] == 'pending')) {
			srRetrieveSelectOptions ( selector, incrementer );
		}
	}, 1500);
}

function srProcessSelectOptions ( selector, rData ) {
	if (rData != 'missing') {
		funnelStatus.options[selector] = rData;
	}
}

function srCompareToOptions ( selector, fieldType, msgStr, isLocal ) {

	// Get the options
	switch (fieldType) {
		case "select":
			var optList = srGetSelectOptions(selector, isLocal);
			break;
		case "select-one":
			var optList = srGetSelectOptions(selector, isLocal);
			break;
		case "radio-group":
			var optList = srGetRadioOptions(selector, isLocal);
			break;
		default:
			var optList = srGetSelectOptions(selector, isLocal);
			break;
	}
	msgStr = msgStr.toLowerCase();
		for (var i in optList) {
				optList[i] = optList[i].toLowerCase();
		if (msgStr.indexOf(optList[i]) > -1 && optList[i].length > 10) {
			return i;
		}
	}

		var wordMatches = [];
	var msgArr = msgStr.split(' ');
	for (var i in optList) {
		var words = optList[i].split(' ');
		var matches = 0;
		for ( var j in words ) {
			if (msgArr.indexOf(words[j]) > -1) {
								matches++;
				matches++;
			} else if (msgStr.indexOf(words[j]) > -1 && words[j].length > 2) {
								matches++;
			}

		}
		wordMatches.push({ optVal: i, matches: matches });
	}

	if (wordMatches.length > 0) {
		wordMatches.sort(function(a,b){
			return a['matches'] - b['matches'];
		});
		var lastWord = wordMatches.pop();
		if (lastWord.matches > 1) {
			return lastWord.optVal;
		}
	}

		var nearMatches = [];
	var nearMatch = false;
	for (var i in optList) {
		var words = optList[i].split(' ');
		var matches = 0;
		for ( var j in words ) {
			// Still do a check for exact matches
			if (msgArr.indexOf(words[j]) > -1) {
				matches++;
			} else {
								nearMatch = srCloseSpellings(words[j], msgStr);
				if (nearMatch != false) {
					matches++;
				}
			}
		}
		nearMatches.push({ optVal: i, matches: matches });
	}
	if (nearMatches.length > 0) {
		nearMatches.sort(function(a,b){
			return a['matches'] - b['matches'];
		});
		var lastNearWord = nearMatches.pop();
		if (lastNearWord.matches > 0) {
			return lastNearWord.optVal;
		}
	}

	return false;

}

function srCloseSpellings (word, msgStr) {

	var lettersList = "abcdefghijklmnopqrstuvwxyz".split("");

		var rslts = [];
	for (i=0; i < word.length; i++) {
    console.log(word);
    console.log(typeof word);
    if (typeof word != 'undefined' && typeof word != 'function' && word != "") {
    	var opt = word.slice(0, i) + word.slice(i+1);
  		if (msgStr.indexOf(opt) > -1 && opt.length > 2) {
  			return opt;
  		}
    }
	}

		var rslts = [];
	for (i=0; i < word.length-1; i++) {
    if (typeof word != 'undefined' && typeof word != 'function' && word != "") {
    	var opt = word.slice(0, i) + word.slice(i+1, i+2) + word.slice(i, i+1) + word.slice(i+2);
  		if (msgStr.indexOf(opt) > -1 && opt.length > 2) {
  			return opt;
  		}
    }
	}

		var rslts = [];
	for (i=0; i < word.length; i++) {
		for( var j in lettersList) {
      if (typeof word != 'undefined' && typeof word != 'function' && word != "") {
  			var opt = word.slice(0, i) + lettersList[j] + word.slice(i+1);
  			if (msgStr.indexOf(opt) > -1 && opt.length > 2) {
  				return opt;
  			}
      }
		}
	}

		var rslts = [];
	for (i=0; i <= word.length; i++) {
		for ( var j in lettersList ) {
      if (typeof word != 'undefined' && typeof word != 'function' && word != "") {
  			var opt = word.slice(0, i) + lettersList[j] + word.slice(i);
  			if (msgStr.indexOf(opt) > -1 && opt.length > 2) {
  				return opt;
  			}
      }
		}
	}

		return false;
}

function srPopulateExisting () {
	$srJq("#hiddenFrame").removeClass("srInvisibleFrame");
	$srJq("#srMsgSender").removeClass("srNormalMsgSender");
	setTimeout(function(){
				var detailsArr = $srJq('#hiddenFrameField').val();
		var details = JSON.parse(detailsArr);

				var detailTO = 1; 		for (var i in details) {

						detailTO = details[i].group * 500 + 1;
						if (typeof funnelStatus.groupCompletion[details[i].group] == 'undefined' && details[i].field_type != 'button' && details[i].field_type != 'submit') {
				funnelStatus.groupCompletion[details[i].group] = {
					fieldNo: 1,
					fieldsPopulated: 0,
					btnClicked: false
				};
			} else if (typeof funnelStatus.groupCompletion[details[i].group] != 'undefined' && details[i].field_type != 'button' && details[i].field_type != 'submit') {
				funnelStatus.groupCompletion[details[i].group].fieldNo++;
			}

						switch (details[i].field_type) {
				case "select":
					srPopulateSelect( details[i].selector, details[i].value, false, detailTO, details[i].group );
					break;
				case "radio-group":
					console.log(details[i]);
					srPopulateRadioGroup( details[i].selector, details[i].value, false, detailTO, details[i].group );
					break;
				case "checkbox":
					srPopulateCheckbox( details[i].selector, details[i].value, false, detailTO, details[i].group );
					break;
				case "button":
					var btnDetail = details[i];
					if (btnDetail.action == 'click') srClickBtn(btnDetail, false, detailTO);
					break;
				case "submit":
					var btnDetail = details[i];
					if (btnDetail.action == 'click') srClickBtn(btnDetail, false, detailTO);
					break;
				default:
					srPopulateField(details[i], false, detailTO, details[i].group);
					break;
			}

		}
	}, 2500);
}

function srInSearchFunnel() {
		if ($srJq('#hiddenFrameId').length > 0) {
		return true;
	}
}

function srCheckSearchFunnelValue (msg) {

		if (funnelStatus.qFieldType === false || funnelStatus.qFieldSelector === false) {
		return false;
	}

		var selected = false;
	switch (funnelStatus.qFieldType) {
		case "select":
			selected = srCompareToOptions(funnelStatus.qFieldSelector, funnelStatus.qFieldType, msg);
			srPopulateSelect( funnelStatus.qFieldSelector, selected );
			break;
		case "select-one":
			selected = srCompareToOptions(funnelStatus.qFieldSelector, funnelStatus.qFieldType, msg);
			srPopulateSelect( funnelStatus.qFieldSelector, selected );
			break;
		case "radio-group":
			selected = srCompareToOptions(funnelStatus.qFieldSelector, funnelStatus.qFieldType, msg);
			srPopulateRadioGroup( funnelStatus.qFieldSelector, selected );
			break;
		default:
			return false;
			break;
	}

	return selected;

}

function srClearFrame () {

		$srJq('#hiddenFrame').remove();

		funnelStatus = {
		qFieldType: false,
		qFieldSelector: false,
		options: {},
		frameReady: false,
		groupCompletion: {},
		curGroup: 0,
		closed: true
	}

	return;
}

var current = false;
function handleBodyResize() {
	var bodyWidth = $srJq(window).outerWidth();
	if(bodyWidth > 720 && (current == false || current == 'mobile')) {
		srMsgIFrame('isDesktop');
		current = 'desktop';
	} else if(bodyWidth <= 720 && (current == false || current == 'desktop')) {
		srMsgIFrame('isMobile');
		current = 'mobile';
	}
}

$srJq(function() {
	$srJq(window).resize(function() {
		handleBodyResize();
	});
	// $srJq(window).trigger("resize");
});



$srJq(function(){

	window.addEventListener('message', function(event) {

				var domainList = ["Liverpool Football Club"];
					domainList.push("liverpoolfc.com");
					domainList.push("store.liverpoolfc.com");
					domainList.push("faq.liverpoolfc.com");
					domainList.push("demo.meetami.ai");
					domainList.push("meetami.ai");
					domainList.push("app.meetami.ai");
					domainList.push("chat.meetami.ai");
		
				var isAcceptable = false;
		for (var i in domainList) {
			if (~event.origin.indexOf(domainList[i])) {
				isAcceptable = true;
				continue;
			}
		}

		if (isAcceptable) {

						if (typeof event.data.isReady != 'undefined') {

				funnelStatus.frameReady = event.data.isReady;
				$srJq("#hiddenFrame").css("opacity", 1);

			} else if (typeof event.data.forceUserInput != 'undefined') {

				$srJq("#srInputs").addClass("srForceFrameUserInput");
				$srJq("#srMsgSender").prop("disabled", true).removeClass("srLoadingFakeMsgSender");
								$srJq("#srMsgSender").hide().removeClass("srNormalMsgSender");
				$srJq("#hiddenFrame").removeClass("srInvisibleFrame");
				handleBodyResize();

			} else if (typeof event.data.searchFunnelMsg != 'undefined') {

				console.log("RECEVIED MSG FROM FRAME, submitting");
				$srJq("#srMsgSender").val(event.data.searchFunnelMsg);
				submitMessage();

			} else {

								switch (event.data.elementType) {
					case "select":
						srProcessSelectOptions(event.data.element, event.data.options);
						break;
					case "radio":
						srProcessRadioOptions(event.data.element, event.data.options);
						break;
					default:
						srProcessSelectOptions(event.data.element, event.data.options);
						break;
				}

			}

		}
	});
});

		function handleFilterForm(filter_form) {
	if(filter_form.inverted) {
		for(var i in filter_form.inverted_field_group_selectors) {
			$srJq(filter_form.inverted_field_group_selectors[i]).trigger("click");
		}
	} else {
		for(var i in filter_form.element_selectors) {
			$srJq(filter_form.element_selectors[i]).trigger("click");
		}
	}
	if(filter_form.is_ajax_form == 0 && filter_form.submit_css_selector != "") {
		$srJq(filter_form.submit_css_selector).trigger("click");
	}
	if(filter_form.hasOwnProperty('matched_pretriggered_fields')) {
		for(var i in filter_form.matched_pretriggered_fields) {
			if(filter_form.matched_pretriggered_fields[i].fieldType == 'select') {
				srPopulateSelect(i, filter_form.matched_pretriggered_fields[i].value, true);
			} else if(filter_form.matched_pretriggered_fields[i].fieldType == 'radio-group') {
				srPopulateRadioGroup(i, filter_form.matched_pretriggered_fields[i].value, true);
			}
		}
	}
}
function srInFilterForm() {
	if(typeof filterFormSelectors !== 'null' && filterFormSelectors !== null) {
		return true;
	}
  return false;
}
function srCheckFilterFormValue (msg) {
		var selected = {};
	for(var i in filterFormSelectors) {
		selected[i] = srCompareToOptions(filterFormSelectors[i].selector, filterFormSelectors[i].fieldType, msg, 'filter-form');
	}
	return selected;

}
		
function handleAddressLookups ( triggerLookup ) {
		$srJq("#srAddress").off("keyup");
		if (triggerLookup) {
		$srJq("#srAddress").on("keyup", function(){
			var entered = $srJq(this).val();
			if (entered.length >= 4) {
								srCheckForOpts(entered, 750);
			}
		});
	}
}

var srIsAddChecking = false;
function srCheckForOpts ( enteredStr, throttleLength, appendElem ) {
	console.log('STARTED THE CHECK');
		if (!srIsAddChecking) {
				srIsAddChecking = true;
		setTimeout(function(){
						srIsAddChecking = false;

						var lookupElem = (typeof appendElem == "undefined") ? "#srAddress" : "#srMsgSender" ;
			var entered = $srJq(lookupElem).val();
			var uid = getUsrId();

			console.log("looking up: " + entered);
			$srJq.ajax({
				type: "POST",
				data: { addressStr: entered, clientRef: '302220474411', uid: uid },
				url: "//app.meetami.ai/chats/retrieve_addresses/",
				success: function(data) {
					data = JSON.parse(data);
					if (typeof data.rslt != 'undefined' && data.rslt == 'success') {
												var addressList = "<ul id='srAddressOpts'>";
												for (var i in data.data) {
							addressList += "<li><a href='#selOpt' data-aid='" + data.data[i].id + "' data-detail='" + data.data[i].value + "'>" + data.data[i].value + "</a></li>";
						}
						addressList += "</ul>";
 
												if (typeof appendElem != "undefined") {
							$srJq(appendElem).find('#srAddressOpts').remove();
							$srJq(appendElem).append(addressList);
							var height = $srJq('#srAddressOpts').append(addressList).height();
							$srJq('#srAddressOpts').css('top', "-" + height + "px").slideDown(250);
						} else {
							$srJq('#srAddOptions').html(addressList).slideDown(250);
						}

												srTriggerListListener(appendElem);
						scrollChat();
						
					} else {
												$srJq("#srAddressId").val("");
					}
				}
			});

		}, throttleLength);
	}

}

function srTriggerListListener ( appendElem ) {
	$srJq('ul#srAddressOpts li a').off('click');
	$srJq('ul#srAddressOpts li a').on('click', function(e){
		e.preventDefault();
				var addDetail = $srJq(this).data('detail');
		var addId = $srJq(this).data('aid');
				if (typeof appendElem == "undefined") {
			$srJq("#srAddress").val(addDetail);
			$srJq("#srAddressId").val(addId);
						$srJq('#srAddOptions').slideUp(250);
		} else {
			$srJq("#srMsgSender").val(addDetail);
			$srJq("#enteredAddressId").val(addId);
						$srJq('#srAddressOpts').slideUp(250);
						submitMessage();
						setTimeout(function(){
				$srJq('#enteredAddressId').remove();
			}, 1000);
			
		}
		
		scrollChat();
	});
}

function srHandleAddressLookup (delay) {
		$srJq('#srInputs').append('<input type="hidden" name="addressId" id="enteredAddressId" />');
		handleInlineAddressLookups(true, delay);
}

function srClearLookupListener ( incRemoval ) {
	handleInlineAddressLookups(false);
	if (typeof incRemoval != "undefined" && incRemoval && $srJq('#srAddressOpts').length > 0 ) {
		setTimeout(function () {
						$srJq('#srAddressOpts').slideUp(250, function(){
				$srJq(this).remove();
			});
							$srJq('#enteredAddressId').remove();
		}, 1000);
	}
}

function handleInlineAddressLookups(triggerLookup, delay) {
		$srJq("#srMsgSender").off("keypress");
		if (triggerLookup) {
		setTimeout(function(){
			$srJq("#srMsgSender").on('keypress', function (e) {
				var entered = $srJq(this).val();
				if (entered.length >= 4) {
										srCheckForOpts(entered, 750, '#srInputs');
				}
			});
						if (delay > 0) {
				var entered = $srJq("#srMsgSender").val();
				if (entered.length >= 4) {
										srCheckForOpts(entered, 750, '#srInputs');
				}
			}
		}, delay);
	}
}

		var callbackScheduled = false;

		function fadeOutCallbackModal(CallbackModal){
			$srJq('#callbackCover .srCoverContent').slideUp(350);
			$srJq('#callbackCover a.srCloseBtn').fadeOut(350);
			$srJq('#callbackCover').fadeOut(600);
			$srJq('#callbackLaunchContainer .bubble-container').hide();
			$srJq('#callbackLaunchContainer .triangle').hide();

			if(!callbackScheduled){
				$srJq('.ami-icon.callback').fadeIn(250);
			}

			$srJq('.ami-icon').not('.callback').fadeIn(250);

		}

		function setupBubbleFadeIn(){
			var fadeInDelayInSeconds = 10;

			if( $srJq.cookie("sr-bubble-appeared") != 1 ){
				setTimeout(function(){
					$srJq('.bubble-component').fadeIn(250);
				},fadeInDelayInSeconds * 1000);
			}
		}

		var scheduleFormOpen = false;

		
		
			function setupCallbackEventHandlers(domain){
				$srJq('#callbackLaunchContainer').on('click', function(){
					revealCallbackModal(domain);
					$srJq.cookie("sr-bubble-appeared", 1);
				})

				$srJq('.callbackCloseBtn').on('click', function(){
					fadeOutCallbackModal(domain);
					$srJq.cookie("sr-bubble-appeared", 1);
				})

				$srJq('.close-bubble').on('click', function(e){
					e.stopPropagation();

					$srJq('.bubble-component').fadeOut(250);
					$srJq.cookie("sr-bubble-appeared", 1);
				});

				initialiseCallbackTimes();
				setupBubbleFadeIn();
				checkIfCallbackScheduledForUser();

				$srJq('#request-callback-now-btn').on('click',function(e){
					e.preventDefault();
					triggerUserCallbackByAjax();
				});

				$srJq('#request-callback-scheduled-btn').on('click',function(e){
					e.preventDefault();
					var isScheduled = true;
					triggerUserCallbackByAjax(isScheduled);
				});

				$srJq('#openScheduleCallFormBtn').on('click',function(e){
					e.preventDefault();
					scheduleFormOpen = true;
					$srJq('#callbackCover .nowCallbackCoverContent').hide();
					$srJq('#callbackCover .futureCallbackCoverContent').show();
				});

				$srJq('#showCallbackNowBtn').on('click',function(e){
					e.preventDefault();
					scheduleFormOpen = false;
					$srJq('#callbackCover .nowCallbackCoverContent').show();
					$srJq('#callbackCover .futureCallbackCoverContent').hide();
				});

				$srJq('#ChatCallbackDay').on('change',function(){
					var day = $srJq(this).val();
					renderCallbackList(day);
				});

				$srJq('#openAmiChatBtn').on('click',function(e){
					e.preventDefault();
					fadeOutCallbackModal(domain);
					createChat();
				})
			}
		
		function checkIfCallbackScheduledForUser(){
			var chat_ref = $srJq('#chat_ref').val();
			var current_cookie = $srJq.cookie('sr-data');

			if(typeof current_cookie != 'undefined'){
				current_cookie = JSON.parse(current_cookie);
			} else {
								return;
			}

			var userId = current_cookie['uid'];

			var clientRef = '302220474411';
			var url = "//app.meetami.ai/chats/is_callback_established/"+clientRef+"/"+userId;


			$srJq.ajax({
				url: url,
				type: "GET",
				success: function(data) {
					if(data == 0){
						$srJq('#callbackLaunchContainer').show();
					}
				},
				error: function(e,f,g) {
					console.log(e);
				}
			});
		}


		function triggerUserCallbackByAjax(isScheduled){
			var chat_ref = $srJq('#chat_ref').val();
			var current_cookie = $srJq.cookie('sr-data');

			if(typeof current_cookie != 'undefined'){
				current_cookie = JSON.parse(current_cookie);
			} else {
								return;
			}

			var userId = current_cookie['uid'];

			var isValid = (isScheduled) ? $srJq('#scheduleFutureCallback').valid() : $srJq('#scheduleCallback').valid() ;
			if (!isValid) {
				return;
			}

			var separateNameInputs = 0;

						$srJq('#request-callback-now-btn').addClass('pending');
			$srJq('#request-callback-scheduled-btn').addClass('pending');

						$srJq('#request-callback-now-btn').addClass('pending');
			$srJq('#request-callback-scheduled-btn').addClass('pending');

			var data = {};

			if(isScheduled){
				if(separateNameInputs) {
					data.title = $srJq('.futureCallbackCoverContent').find('#srTitleFL').val();
					data.first = $srJq('.futureCallbackCoverContent').find('#srFirstNameFL').val();
					data.last = $srJq('.futureCallbackCoverContent').find('#srLastNameFL').val();
					data.name = data.title + ' ' + data.first + ' ' + data.last;
				} else {
					data.name = $srJq('.futureCallbackCoverContent').find('#srNameFL').val();
				}
				data.phone = $srJq('.futureCallbackCoverContent').find('#srPhoneFL').val();
				if($srJq("#srDept").length > 0) {
					var deptId = $srJq("#srDept").val();
				}

			} else {
				if(separateNameInputs) {
					data.title = $srJq('.nowCallbackCoverContent').find('#srTitleCCL').val();
					data.first = $srJq('.nowCallbackCoverContent').find('#srFirstNameCCL').val();
					data.last = $srJq('.nowCallbackCoverContent').find('#srLastNameCCL').val();
					data.name = data.title + ' ' + data.first + ' ' + data.last;
				} else {
					data.name = $srJq('.nowCallbackCoverContent').find('#srNameCCL').val();
				}
				data.phone = $srJq('.nowCallbackCoverContent').find('#srPhoneCCL').val();
				if($srJq("#srDeptCallNow").length > 0) {
					var deptId = $srJq("#srDeptCallNow").val();
				}
			}

			var clientRef = '302220474411';

			var url = "//app.meetami.ai/chats/store_details_form/"+clientRef+"/"+userId;

			sendData = CryptoJSAesEncrypt('gTw42021^uTq02^uTq' + getUsrId(), JSON.stringify(data)).replace(/=+=/g, "\=\=");

			$srJq.ajax({
				url: url,
				type: "POST",
				dataType: "text",
				data: {data: sendData},
				success: function(data) {

					if (data != 1) {
												$srJq('#scheduleFutureCallback').prepend("<div class='error srCBFormError' style='margin-bottom: 12px;'>Sorry but there was an error saving your details. Please check them and try again.</div>");
						$srJq('#scheduleCallback').prepend("<div class='error srCBFormError' style='margin-bottom: 12px;>Sorry but there was an error saving your details. Please check them and try again.</div>");
												$srJq('#request-callback-now-btn').removeClass('pending');
						$srJq('#request-callback-scheduled-btn').removeClass('pending');
					} else {

						$srJq('#scheduleFutureCallback .srCBFormError').remove();
						$srJq('#scheduleCallback .srCBFormError').remove();

						if(typeof(deptId) == 'undefined') {
							deptId = null;
						}

						var url = "//app.meetami.ai/chats/trigger_call_from_layer/"+clientRef+"/"+userId+'/none/ic/-/' + deptId;
						console.log('user details store');
						var data = {};
						if(isScheduled){
							data.cb_time = $srJq('#ChatCallbackTime').val();
							data.cb_day = $srJq('#ChatCallbackDay').val();

							var call_time = data.cb_day + ' '+ data.cb_time;
						}

						$srJq.ajax({
							url: url,
							type: "POST",
							data:data,
							success: function(data) {
								if(data == 1){
									var html = '<div class="centre phonecall"><img src="//'+siteUrl+'/img/widget/phonecall.png" alt="Phone success icon" class="centre"><p>Thank you. we’ve placed your number in our call queue.</p><p>Please wait while we contact you by telephone.</p></div>';
									$srJq('.callbackCoverContent').find('.callbackCoverInnerContent').html(html);

									callbackScheduled = true;																	}

								if(data != 0 && data != 'error-recent') {
																		
									var html = '<div class="centre phonecall"><img src="//'+siteUrl+'/img/widget/phonecall.png" alt="Phone success icon" class="centre"><p>Thank you. we’ve placed your number in our call queue.</p><p>Please wait while we contact you by telephone.</p></div>';
									$srJq('.callbackCoverContent').find('.callbackCoverInnerContent').html(html);
								}

																if (data == 'error-recent') {
									$srJq('#scheduleFutureCallback').prepend("<div class='error srCBFormError' style='margin-bottom: 12px;'>Sorry but there was an error triggering your call - you already have a callback scheduled.</div>");
									$srJq('#scheduleCallback').prepend("<div class='error srCBFormError' style='margin-bottom: 12px;>Sorry but there was an error triggering your call - you already have a callback scheduled.</div>");
								}
								if (data == 0) {
									$srJq('#scheduleFutureCallback').prepend("<div class='error srCBFormError' style='margin-bottom: 12px;'>Sorry but there was an error triggering your call. Please check the details you entered and try again.</div>");
									$srJq('#scheduleCallback').prepend("<div class='error srCBFormError' style='margin-bottom: 12px;>Sorry but there was an error triggering your call. Please check the details you entered and try again.</div>");
								}

								$srJq('#request-callback-now-btn').removeClass('pending');
								$srJq('#request-callback-scheduled-btn').removeClass('pending');

							}, error: function(e,f,g) {
								console.log(e);
								$srJq('#request-callback-now-btn').removeClass('pending');
								$srJq('#request-callback-scheduled-btn').removeClass('pending');
								$srJq('#scheduleFutureCallback').prepend("<div class='error srCBFormError' style='margin-bottom: 12px;'>Sorry but there was an error triggering your call. Please check the details you entered and try again.</div>");
								$srJq('#scheduleCallback').prepend("<div class='error srCBFormError' style='margin-bottom: 12px;>Sorry but there was an error triggering your call. Please check the details you entered and try again.</div>");
							}
						});
					}
				}, error: function(e,f,g) {
					console.log(e);
					$srJq('#request-callback-now-btn').removeClass('pending');
					$srJq('#request-callback-scheduled-btn').removeClass('pending');
					$srJq('#scheduleFutureCallback').prepend("<div class='error srCBFormError' style='margin-bottom: 12px;'>Sorry but there was an error saving your details. Please check them and try again.</div>");
					$srJq('#scheduleCallback').prepend("<div class='error srCBFormError' style='margin-bottom: 12px;>Sorry but there was an error saving your details. Please check them and try again.</div>");
				}
			});
		}

		

		function getSplitMessageString(message,index,character_count_threshold){

			if(parseInt(character_count_threshold) === 0){
								return message;
			}

			var cutOffIndex = getCutOffIndex(message,index,character_count_threshold);

			var messageLength = cutOffIndex - index + 1;
			var splitMessage = message.substr(index,messageLength );

						while(splitMessage.indexOf('<br/>') === 0){
				splitMessage = splitMessage.substr(5);
			}

						while( splitMessage.length > 4 && splitMessage.lastIndexOf('<br/>') === splitMessage.length -  5){
				splitMessage = splitMessage.substr(0,splitMessage.length -  5);
			}

			return splitMessage;
		}

		function getCutOffIndex(message,index,character_count_threshold){

			if(parseInt(character_count_threshold) === 0){
								return message.length;
			}

			var cutOffIndex = parseInt(index)+ parseInt(character_count_threshold);
			var remainingMessage = message.substr(cutOffIndex);

			var minIndex = 0;
			var foundSentenceEndindex = -1;
			var foundBrIndex = -1;
			var reg = /[.!?]\s/;
			var match = reg.exec(remainingMessage);

			if(match){
								foundSentenceEndindex = match.index;
			}

			var brIndex = remainingMessage.indexOf('<br/>');

			if(brIndex !== -1){
				foundBrIndex  = brIndex;
			}

			if(foundSentenceEndindex == -1 && foundBrIndex === -1){
								cutOffIndex += message.substr(index).length
			} else if (foundSentenceEndindex >=0   && foundBrIndex === -1){
								cutOffIndex += foundSentenceEndindex + 1;
			} else if(foundSentenceEndindex == -1 && foundBrIndex >=0 ){
								cutOffIndex += foundBrIndex +4;
			} else if (foundSentenceEndindex < foundBrIndex) {
								cutOffIndex += foundSentenceEndindex + 1;
			} else {
								cutOffIndex += foundBrIndex +4;
			}

			return cutOffIndex;
		}

		function formatAutoMessageStrForRegularExpression(message){

			if (typeof message == "string" && message != null) {
				message = message.replace(/<br \/>/g,'<br/>');
				message = message.trim();
				message += ' ';
			}

			return message;
		}

		function appendViewMoreLinkToResponse(){
					}



		function revealCallbackModal(domain){

			if(sr_isWelcomeMessageOpen()) {
				closeReplier();
			}

			$srJq('#callbackCover').fadeIn(350);
			setTimeout(function () {
				$srJq('#callbackCover .srCoverContent').slideDown(350);
				$srJq('#callbackCover a.srCloseBtn').slideDown(350);
			}, 550);

			$srJq('.ami-icon').fadeOut(250);
			$srJq('.bubble-component').fadeOut(250);

						if(typeof existing != 'undefined'){
				existing['rl'] = 1;
			} else {
				existing = { rl: 1, srch: 0 }
			}
			existing = JSON.stringify(existing);
			$srJq.cookie('cb-rl', existing, { path: '/', domain: domain });
		}

				function stripIncorrectSpaces ( str ) {

			var delimiters = [".", ",", "?", "!", ":", ";"];

			for ( var i in delimiters ) {
				str = str.replace(" " + delimiters[i], delimiters[i]);
			}

						str = str.trim();
			str = str.replace(/^\n|\n$/g, '');

			return str;

		}

		
	}

	</script>
	<script>
			</script>



</body></html>